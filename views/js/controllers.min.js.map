{"version":3,"sources":["routes.js","json!taoItems/preview/resources/device-list.json","../preview/tpl/preview!tpl","../../taoItemsCss/preview!css","../preview/preview.js","items/action.js","items/edit.js","../component/category/switch!tpl","../component/category/switch.js","../provider/category.js","items/editItemClass.js","../../serviceApi/ServiceApi.js","../../serviceApi/PseudoStorage.js","../../serviceApi/UserInfoService.js","../runtime/ItemServiceImpl.js","../preview/actionBarHook.js","preview/itemRunner.js","runtime/itemRunner.js","../../../../../../../../../onLayerEnd0.js"],"names":["define","Items","deps","actions","editItem","editItemClass","ItemPreview","index","tablets","193986c3715c81838870f908fa98d69a","label","width","height","4e8eafab11aad1486992d7ee2c8c16ca","5aac2932d9ad00d6d8a1604b8f9e4e8d","9805d9753ad08c7630a9ee5418aa6c6c","d4a431cedf4705d6bf2cba6d5788378b","phones","1b89338531ef0155c8d6abc2ac02c81a","scaleFactor","dpWidth","dpHeight","3f89da99d84214cde7df87ebe0699a6f","0d36971a5b98b367f54ced708c9af849","026beffcc051af995660ebdede986ace","fd2dd53e667d6d49e4fa73356fa941dd","707584c1ae17d9b5b2cbe8603c91c147","91823264de952e7f2347e07db5c4058b","cd69817a6e147e8a4677389e56fcf568","75994faa6a38e31e99b53fcd75534a33","0cab4dfccdfc880687cb608cfe4159db","c4ff41fcba24d74fc21dc3490ca1edc9","fa969a5e0dd2de53700eeee4ba4ba142","33c4f9364e295ec03531f3a3425819cf","bc47f5275f0efd56fee52d43a8082981","0732887e6e324fd10777b735520a34cf","2e38a78364f09d0da0e9e1a3a68e7fb0","bd4b78dddc7c9625a4141a1b1ddabb87","3bf1edf21cfa81006183d2b02974c84e","ab5a352e0e016b97dac986f06c394f55","4826fb7d7257aeaac992ce699df41b3c","0a691ab20add7c432200f8fa6527b488","9c23ee31be29960fbac9e9bbfc2fc7b0","92177c0508c1d73905a58e2338f2a81f","5222b8866dc4cc606725e16ffcc0a783","37c1541e2bd55cfd0f4073b0ccdf68b3","2f7f64b7dda0144907ff300e83eed465","9c24f9057744dad56043702a9703127f","0a8b2732a016a9395c3af5f12dd9c0da","5a153d7f53d82dcb0801f041574a6a43","screens","9e523ae15b61dc766f5c818726881ecf","07769cd8d0a7d09818b2f0b018042fb7","72d5478a24194f98b9378e8e0fd65737","b7a6dd5900cc72e61f0d3479c7e314ec","43193b0ff671a37d8232ab664190a125","c29e48814af5443ff5688d9e967ce917","hb","template","Handlebars","depth0","helpers","partials","data","program1","stack1","helper","buffer","value","call","hash","functionType","escapeExpression","selected","inverse","self","noop","fn","program","program2","program4","each","themes","program6","dataValue","this","compilerInfo","merge","options","helperMissing","previewType","previewTypes","hasThemes","desktopDevices","mobileDevices","__","$","_","strPad","Promise","deviceList","previewTpl","themeHandler","themeLoader","UrlParser","_setupScreenSize","screenSize","innerWidth","innerHeight","overlay","container","typeDependant","$feedbackBox","$console","previewContainerMaxWidth","itemUri","state","orientation","desktop","mobile","standard","themeObj","get","$doc","document","$window","window","$body","body","sizeSettings","winScrollObj","x","y","_getDeviceSelectorData","type","devices","forEach","push","join","_setupTypeDependantElements","add","find","_setPreviewType","newType","re","RegExp","i","el","className","replace","_setOrientation","newOrientation","previewFrame","_scale","_computeScaleFactor","$scaleContainer","_scaleFactor","containerScaledWidth","left","css","-webkit-transform","-ms-transform","transform","-webkit-transform-origin","-ms-transform-origin","transform-origin","_positionPreview","topBarHeight","outerHeight","style","top","maxHeight","scaleValues","requiredSize","Math","min","_setupDeviceSelectors","previewDeviceSelectors","on","elem","option","nodeName","toLowerCase","selectedIndex","val","split","length","parseFloat","_adaptFrameSize","select2","minimumResultsForSearch","_setupOrientationSelectors","_setupClosers","$closer","$feedbackCloser","$hideForever","$iframe","trigger","scrollTo","hide","removeClass","off","attr","keyup","e","keyCode","addClass","preventDefault","cookie","expires","path","_getThemes","activeTheme","isPlainObject","isEmpty","base","getActiveTheme","available","id","name","_getPreviewTypes","_previewLabel","_previewType","_setupViewSelector","_setupThemeSelector","iframe","getElementById","iframeDoc","contentWindow","contentDocument","$previewContainer","_iframe","contentHeight","contents","containerHeight","_updateStandardPreviewSize","$selector","values","toString","valueStr","_initConsole","$listing","event","message","timer","Date","logTime","getHours","getMinutes","getSeconds","msgStr","append","is","scrollTop","slideDown","show","slideUp","resolve","reject","parsed","params","JSON","stringify","ajax","url","dataType","method","done","scrollX","scrollY","display","not","html","fail","xhr","Error","status","statusText","init","_itemUri","_state","TypeError","remove","size","parseInt","binder","uri","context","preview","register","actionContext","_url","shownExtension","module","lock","section","editItemController","start","config","previewAction","isPreviewEnabled","isAuthoringEnabled","getBy","authoringAction","disabled","updateState","sectionContext","exec","component","switchTpl","titles","expose","unexpose","$container","propertyId","exposed","categorySwitchComponent","setExposed","setState","getElement","isExposed","render","$component","defer","setTemplate","request","defaultConfig","getExposedsByClass","route","defaults","isBoolean","uriUtil","categorySwitch","categoryProvider","feedback","provider","injectButtonPlaceholder","$placeholder","$propertyToolbar","$editButton","$propContainer","encode","hasClass","insertAfter","handleError","err","error","addCategorySwitch","propertyUri","propUri","then","success","catch","classUri","results","ServiceApi","baseUrl","parameters","serviceCallId","stateStorage","userService","paused","connected","hasBeenPaused","SIG_SUCCESS","SIG_ERROR","prototype","loadInto","frame","$frame","callUrl","getCallUrl","isCORSAllowed","checkCORS","connect","__knownParent__","onServiceApiReady","param","getUserPropertyValues","property","callback","getServiceCallId","getState","set","getHasBeenPaused","setHasBeenPaused","getParameter","identifier","onFinish","onFinishCallback","onKill","onKillCallback","onExit","onExitCallback","kill","exit","finish","valueArray","PseudoStorage","UserInfoService","requestUrl","hasOwnProperty","service","r","key","ItemServiceImpl","itemId","serviceApi","resultApi","responses","scores","events","rawstate","parseJSON","stateVariables","beforeFinishCallbacks","itemApi","onItemApiReady","saveResponses","attrname","traceEvents","eventArray","saveScores","beforeFinish","submit","after","submitItemVariables","getVariable","setVariable","setVariables","v","errorHandler","isValidConfig","toolconfig","isObject","hook","triggerItemLoaded","tool","itemLoaded","initExtraButtons","$toolContainer","isString","tools","$toolContainers","require","$button","$existingBtn","isValidHook","children","clear","_appendInOrder","_ns","throw","$after","$before","order","prepend","isNaN","$btn","_order","before","reduce","result","isFunction","isValid","encoder","actionBarHook","_initCustomButtons","buttons","extraButtons","forIn","previewItemRunner","conf","previewUrl","resultServer","endpoint","ResultServerApi","resultServerApi","userInfoServiceRequestUrl","addParam","clientConfigUrl","getUrl","parse","decodeBase64","click","iframeNotifier","itemRunner","appendTo","itemPath","itemService","timeout","ItemService","setIframeHeight","newHeight","neverResized","resize","notifyParent","parent","delay","itemUrl","throttle","responseId","response","elmentId","c","d","a","s","createElement","getElementsByTagName","cssText","createTextNode"],"mappings":"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","file":"routes.js","sourcesContent":["/**\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\r\n *\r\n *\r\n */\r\n\r\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\r\ndefine('taoItems/controller/routes',[],function(){\r\n    'use strict';\r\n\r\n    return {\r\n        'Items' : {\r\n            'deps' : 'controller/items/action',\r\n            'actions' : {\r\n                'editItem' : 'controller/items/edit',\r\n                'editItemClass': 'controller/items/editItemClass'\r\n            }\r\n        },\r\n        'ItemPreview' : {\r\n            'actions' : {\r\n                'index' : 'controller/preview/itemRunner'\r\n            }\r\n        }\r\n    };\r\n});\r\n\n","\ndefine(\"json!taoItems/preview/resources/device-list.json\", function(){ return {\r\n    \"tablets\": {\r\n        \"193986c3715c81838870f908fa98d69a\": {\r\n            \"label\": \"Amazon Kindle Fire HDX 7\\u2033\",\r\n            \"width\": 960,\r\n            \"height\": 600\r\n        },\r\n        \"4e8eafab11aad1486992d7ee2c8c16ca\": {\r\n            \"label\": \"Apple iPad\",\r\n            \"width\": 1024,\r\n            \"height\": 768\r\n        },\r\n        \"5aac2932d9ad00d6d8a1604b8f9e4e8d\": {\r\n            \"label\": \"Google Nexus 10, Motorola Xoom, Xyboard\",\r\n            \"width\": 1280,\r\n            \"height\": 800\r\n        },\r\n        \"9805d9753ad08c7630a9ee5418aa6c6c\": {\r\n            \"label\": \"Google Nexus 7\",\r\n            \"width\": 966,\r\n            \"height\": 604\r\n        },\r\n        \"d4a431cedf4705d6bf2cba6d5788378b\": {\r\n            \"label\": \"Samsung Galaxy Tab 7.7, 8.9, 10.1\",\r\n            \"width\": 1280,\r\n            \"height\": 800\r\n        }\r\n    },\r\n    \"phones\": {\r\n        \"1b89338531ef0155c8d6abc2ac02c81a\": {\r\n            \"label\": \"Apple iPhone 3GS\",\r\n            \"width\": 320,\r\n            \"height\": 480,\r\n            \"scaleFactor\": 1,\r\n            \"dpWidth\": 320,\r\n            \"dpHeight\": 480\r\n        },\r\n        \"3f89da99d84214cde7df87ebe0699a6f\": {\r\n            \"label\": \"Apple iPhone 4\",\r\n            \"width\": 640,\r\n            \"height\": 960,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 320,\r\n            \"dpHeight\": 1920\r\n        },\r\n        \"0d36971a5b98b367f54ced708c9af849\": {\r\n            \"label\": \"Apple iPhone 5\",\r\n            \"width\": 640,\r\n            \"height\": 1136,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 320,\r\n            \"dpHeight\": 2272\r\n        },\r\n        \"026beffcc051af995660ebdede986ace\": {\r\n            \"label\": \"BlackBerry Z10\",\r\n            \"width\": 768,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 384,\r\n            \"dpHeight\": 2560\r\n        },\r\n        \"fd2dd53e667d6d49e4fa73356fa941dd\": {\r\n            \"label\": \"BlackBerry Z30\",\r\n            \"width\": 720,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 360,\r\n            \"dpHeight\": 2560\r\n        },\r\n        \"707584c1ae17d9b5b2cbe8603c91c147\": {\r\n            \"label\": \"Google Nexus 4\",\r\n            \"width\": 768,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 384,\r\n            \"dpHeight\": 2560\r\n        },\r\n        \"91823264de952e7f2347e07db5c4058b\": {\r\n            \"label\": \"Google Nexus 5\",\r\n            \"width\": 1080,\r\n            \"height\": 1920,\r\n            \"scaleFactor\": 3,\r\n            \"dpWidth\": 360,\r\n            \"dpHeight\": 5760\r\n        },\r\n        \"cd69817a6e147e8a4677389e56fcf568\": {\r\n            \"label\": \"Google Nexus S\",\r\n            \"width\": 480,\r\n            \"height\": 800,\r\n            \"scaleFactor\": 1.5,\r\n            \"dpWidth\": 320,\r\n            \"dpHeight\": 1200\r\n        },\r\n        \"75994faa6a38e31e99b53fcd75534a33\": {\r\n            \"label\": \"HTC Evo, Touch HD, Desire HD, Desire\",\r\n            \"width\": 480,\r\n            \"height\": 800,\r\n            \"scaleFactor\": 1.5,\r\n            \"dpWidth\": 320,\r\n            \"dpHeight\": 1200\r\n        },\r\n        \"0cab4dfccdfc880687cb608cfe4159db\": {\r\n            \"label\": \"HTC One X, EVO LTE\",\r\n            \"width\": 720,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 360,\r\n            \"dpHeight\": 2560\r\n        },\r\n        \"c4ff41fcba24d74fc21dc3490ca1edc9\": {\r\n            \"label\": \"HTC Sensation, Evo 3D\",\r\n            \"width\": 540,\r\n            \"height\": 960,\r\n            \"scaleFactor\": 1.5,\r\n            \"dpWidth\": 360,\r\n            \"dpHeight\": 1440\r\n        },\r\n        \"fa969a5e0dd2de53700eeee4ba4ba142\": {\r\n            \"label\": \"LG Optimus 2X, Optimus 3D, Optimus Black\",\r\n            \"width\": 480,\r\n            \"height\": 800,\r\n            \"scaleFactor\": 1.5,\r\n            \"dpWidth\": 320,\r\n            \"dpHeight\": 1200\r\n        },\r\n        \"33c4f9364e295ec03531f3a3425819cf\": {\r\n            \"label\": \"LG Optimus G\",\r\n            \"width\": 768,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 384,\r\n            \"dpHeight\": 2560\r\n        },\r\n        \"bc47f5275f0efd56fee52d43a8082981\": {\r\n            \"label\": \"LG Optimus LTE, Optimus 4X HD\",\r\n            \"width\": 720,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 1.7,\r\n            \"dpWidth\": 424,\r\n            \"dpHeight\": 2176\r\n        },\r\n        \"0732887e6e324fd10777b735520a34cf\": {\r\n            \"label\": \"LG Optimus One\",\r\n            \"width\": 320,\r\n            \"height\": 480,\r\n            \"scaleFactor\": 1.5,\r\n            \"dpWidth\": 213,\r\n            \"dpHeight\": 720\r\n        },\r\n        \"2e38a78364f09d0da0e9e1a3a68e7fb0\": {\r\n            \"label\": \"Motorola Defy, Droid, Droid X, Milestone\",\r\n            \"width\": 480,\r\n            \"height\": 854,\r\n            \"scaleFactor\": 1.5,\r\n            \"dpWidth\": 320,\r\n            \"dpHeight\": 1281\r\n        },\r\n        \"bd4b78dddc7c9625a4141a1b1ddabb87\": {\r\n            \"label\": \"Motorola Droid 3, Droid 4, Droid Razr, Atrix 4G, Atrix 2\",\r\n            \"width\": 540,\r\n            \"height\": 960,\r\n            \"scaleFactor\": 1,\r\n            \"dpWidth\": 540,\r\n            \"dpHeight\": 960\r\n        },\r\n        \"3bf1edf21cfa81006183d2b02974c84e\": {\r\n            \"label\": \"Motorola Droid Razr HD\",\r\n            \"width\": 720,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 1,\r\n            \"dpWidth\": 720,\r\n            \"dpHeight\": 1280\r\n        },\r\n        \"ab5a352e0e016b97dac986f06c394f55\": {\r\n            \"label\": \"Nokia C5, C6, C7, N97, N8, X7\",\r\n            \"width\": 360,\r\n            \"height\": 640,\r\n            \"scaleFactor\": 1,\r\n            \"dpWidth\": 360,\r\n            \"dpHeight\": 640\r\n        },\r\n        \"4826fb7d7257aeaac992ce699df41b3c\": {\r\n            \"label\": \"Nokia Lumia 7X0, Lumia 8XX, Lumia 900, N800, N810, N900\",\r\n            \"width\": 480,\r\n            \"height\": 800,\r\n            \"scaleFactor\": 1.5,\r\n            \"dpWidth\": 320,\r\n            \"dpHeight\": 1200\r\n        },\r\n        \"0a691ab20add7c432200f8fa6527b488\": {\r\n            \"label\": \"Samsung Galaxy Note\",\r\n            \"width\": 800,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 400,\r\n            \"dpHeight\": 2560\r\n        },\r\n        \"9c23ee31be29960fbac9e9bbfc2fc7b0\": {\r\n            \"label\": \"Samsung Galaxy Note 3\",\r\n            \"width\": 1080,\r\n            \"height\": 1920,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 540,\r\n            \"dpHeight\": 3840\r\n        },\r\n        \"92177c0508c1d73905a58e2338f2a81f\": {\r\n            \"label\": \"Samsung Galaxy Note II\",\r\n            \"width\": 720,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 360,\r\n            \"dpHeight\": 2560\r\n        },\r\n        \"5222b8866dc4cc606725e16ffcc0a783\": {\r\n            \"label\": \"Samsung Galaxy S III, Galaxy Nexus\",\r\n            \"width\": 720,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 360,\r\n            \"dpHeight\": 2560\r\n        },\r\n        \"37c1541e2bd55cfd0f4073b0ccdf68b3\": {\r\n            \"label\": \"Samsung Galaxy S, S II, W\",\r\n            \"width\": 480,\r\n            \"height\": 800,\r\n            \"scaleFactor\": 1.5,\r\n            \"dpWidth\": 320,\r\n            \"dpHeight\": 1200\r\n        },\r\n        \"2f7f64b7dda0144907ff300e83eed465\": {\r\n            \"label\": \"Samsung Galaxy S4\",\r\n            \"width\": 1080,\r\n            \"height\": 1920,\r\n            \"scaleFactor\": 3,\r\n            \"dpWidth\": 360,\r\n            \"dpHeight\": 5760\r\n        },\r\n        \"9c24f9057744dad56043702a9703127f\": {\r\n            \"label\": \"Sony Xperia S, Ion\",\r\n            \"width\": 720,\r\n            \"height\": 1280,\r\n            \"scaleFactor\": 2,\r\n            \"dpWidth\": 360,\r\n            \"dpHeight\": 2560\r\n        },\r\n        \"0a8b2732a016a9395c3af5f12dd9c0da\": {\r\n            \"label\": \"Sony Xperia Sola, U\",\r\n            \"width\": 480,\r\n            \"height\": 854,\r\n            \"scaleFactor\": 1,\r\n            \"dpWidth\": 480,\r\n            \"dpHeight\": 854\r\n        },\r\n        \"5a153d7f53d82dcb0801f041574a6a43\": {\r\n            \"label\": \"Sony Xperia Z, Z1\",\r\n            \"width\": 1080,\r\n            \"height\": 1920,\r\n            \"scaleFactor\": 3,\r\n            \"dpWidth\": 360,\r\n            \"dpHeight\": 5760\r\n        }\r\n    },\r\n    \"screens\": {\r\n        \"9e523ae15b61dc766f5c818726881ecf\": {\r\n            \"label\": \"1920 \\u00d7 1080\",\r\n            \"width\": 1920,\r\n            \"height\": 1080,\r\n            \"dpWidth\": 1920,\r\n            \"dpHeight\": 1080,\r\n            \"scaleFactor\": 1\r\n        },\r\n        \"07769cd8d0a7d09818b2f0b018042fb7\": {\r\n            \"label\": \"1366 \\u00d7 768\",\r\n            \"width\": 1366,\r\n            \"height\": 768,\r\n            \"dpWidth\": 1366,\r\n            \"dpHeight\": 768,\r\n            \"scaleFactor\": 1\r\n        },\r\n        \"72d5478a24194f98b9378e8e0fd65737\": {\r\n            \"label\": \"1280 \\u00d7 1024\",\r\n            \"width\": 1280,\r\n            \"height\": 1024,\r\n            \"dpWidth\": 1280,\r\n            \"dpHeight\": 1024,\r\n            \"scaleFactor\": 1\r\n        },\r\n        \"b7a6dd5900cc72e61f0d3479c7e314ec\": {\r\n            \"label\": \"1280 \\u00d7 800\",\r\n            \"width\": 1280,\r\n            \"height\": 800,\r\n            \"dpWidth\": 1280,\r\n            \"dpHeight\": 800,\r\n            \"scaleFactor\": 1\r\n        },\r\n        \"43193b0ff671a37d8232ab664190a125\": {\r\n            \"label\": \"1024 \\u00d7 768\",\r\n            \"width\": 1024,\r\n            \"height\": 768,\r\n            \"dpWidth\": 1024,\r\n            \"dpHeight\": 768,\r\n            \"scaleFactor\": 1\r\n        },\r\n        \"c29e48814af5443ff5688d9e967ce917\": {\r\n            \"label\": \"800 \\u00d7 600\",\r\n            \"width\": 800,\r\n            \"height\": 600,\r\n            \"dpWidth\": 800,\r\n            \"dpHeight\": 600,\r\n            \"scaleFactor\": 1\r\n        }\r\n    }\r\n};});\n\n","\ndefine('tpl!taoItems/preview/tpl/preview', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\r\\n                        <option value=\\\"\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\r\\n                        \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\r\\n                    <select class=\\\"preview-theme-selector\\\">\\r\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.themes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n                    </select>\\r\\n                    \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\r\\n                        <option value=\\\"\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-value=\\\"\";\n  if (helper = helpers.dataValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.dataValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\r\\n                        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"preview-overlay tao-scope overlay preview-\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" item-no-print\\\"\\r\\n     style=\\\"display:none\\\">\\r\\n    <div class=\\\"preview-container-outer\\\">\\r\\n        <form class=\\\"preview-utility-bar plain\\\">\\r\\n            <div class=\\\"preview-utility-bar-inner grid-row\\\">\\r\\n\\r\\n                <div class=\\\"col-4\\\">\\r\\n                    <input type=\\\"hidden\\\" value=\\\"\\\" data-value=\\\"\\\" class=\\\"standard-device-selector preview-device-selector\\\" data-target=\\\"standard\\\">\\r\\n                    <select class=\\\"preview-type-selector\\\">\\r\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.previewTypes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n                    </select>\\r\\n                    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasThemes), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n                </div>\\r\\n                <div class=\\\"col-6 standard-only device-type-and-orientation\\\"></div>\\r\\n                <div class=\\\"col-6 desktop-only device-type-and-orientation\\\">\\r\\n                    <select class=\\\"desktop-device-selector preview-device-selector\\\" data-target=\\\"desktop\\\">\\r\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.desktopDevices), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n                    </select>\\r\\n                </div>\\r\\n                <div class=\\\"col-6 mobile-only device-type-and-orientation\\\">\\r\\n                    <select class=\\\"mobile-device-selector preview-device-selector\\\" data-target=\\\"mobile\\\">\\r\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mobileDevices), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n                    </select>\\r\\n                    <select tabindex=\\\"-1\\\" class=\\\"mobile-orientation-selector orientation-selector\\\"\\r\\n                            data-target=\\\"mobile\\\">\\r\\n                        <option value=\\\"landscape\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Landscape\", options) : helperMissing.call(depth0, \"__\", \"Landscape\", options)))\n    + \"</option>\\r\\n                        <option value=\\\"portrait\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Portrait\", options) : helperMissing.call(depth0, \"__\", \"Portrait\", options)))\n    + \"</option>\\r\\n                    </select>\\r\\n                </div>\\r\\n                <div class=\\\"col-2\\\">\\r\\n                    <span class=\\\"btn-info small preview-closer rgt\\\">\\r\\n                        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close\", options) : helperMissing.call(depth0, \"__\", \"Close\", options)))\n    + \"\\r\\n                        <span class=\\\"icon-close r\\\"></span>\\r\\n                    </span>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"preview-message-box\\\">\\r\\n                <div class=\\\"feedback-info small\\\">\\r\\n                    <span class=\\\"icon-info\\\"></span>\\r\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This preview may be scaled to fit your screen. The final rendering may differ.\", options) : helperMissing.call(depth0, \"__\", \"This preview may be scaled to fit your screen. The final rendering may differ.\", options)))\n    + \"\\r\\n                    <a href=\\\"#\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Dont show this again!\", options) : helperMissing.call(depth0, \"__\", \"Dont show this again!\", options)))\n    + \"</a>\\r\\n                    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove this message\", options) : helperMissing.call(depth0, \"__\", \"Remove this message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\r\\n                </div>\\r\\n            </div>\\r\\n        </form>\\r\\n        <div class=\\\"preview-canvas\\\">\\r\\n            <div class=\\\"preview-scale-container\\\">\\r\\n                <div class=\\\"\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-frame preview-outer-frame \";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-landscape\\\">\\r\\n                    <div class=\\\"\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-container preview-container\\\">\\r\\n                        <div class=\\\"preview-item-container\\\"></div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <div id=\\\"preview-console\\\">\\r\\n        <span class=\\\"icon-close preview-console-closer\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close console\", options) : helperMissing.call(depth0, \"__\", \"Close console\", options)))\n    + \"\\\"></span>\\r\\n        <div class=\\\"preview-console-header grid-row clearfix\\\">\\r\\n            <ul class=\\\"col-10 plain action-bar extra-button-action-bar horizontal-action-bar\\\">\\r\\n            </ul>\\r\\n            <ul class=\\\"col-2 plain action-bar console-button-action-bar horizontal-action-bar\\\">\\r\\n                <li class=\\\"small btn-info action action-button rgt\\\" id=\\\"preview-submit-button\\\">\\r\\n                    <a class=\\\"li-inner\\\" href=\\\"#\\\">\\r\\n                        <span class=\\\"label\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Submit\", options) : helperMissing.call(depth0, \"__\", \"Submit\", options)))\n    + \"</span>\\r\\n                    </a>\\r\\n                </li>\\r\\n            </ul>\\r\\n        </div>\\r\\n        <div class=\\\"preview-console-body clear\\\">\\r\\n            <ul></ul>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('css!taoItemsCss/preview',[],function(){});\n","/*\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2015 (original work) Open Assessment Techniologies SA\r\n *\r\n */\r\ndefine('taoItems/preview/preview',[\r\n    'jquery',\r\n    'lodash',\r\n    'i18n',\r\n    'util/strPad',\r\n    'core/promise',\r\n    'json!taoItems/preview/resources/device-list.json',\r\n    'tpl!taoItems/preview/tpl/preview',\r\n    'ui/themes',\r\n    'ui/themeLoader',\r\n    'urlParser',\r\n    'ui/modal',\r\n    'select2',\r\n    'jquery.cookie',\r\n    'css!taoItemsCss/preview'\r\n], function ($, _, __, strPad, Promise, deviceList, previewTpl, themeHandler, themeLoader, UrlParser) {\r\n    'use strict';\r\n\r\n\r\n    var overlay,\r\n        container,\r\n        orientation = 'landscape',\r\n        previewType = 'standard',\r\n        previewTypes = {\r\n            desktop: __('Desktop preview'),\r\n            mobile: __('Mobile preview'),\r\n            standard: __('Actual size')\r\n        },\r\n        themeObj = themeHandler.get('items') || {},\r\n        $doc = $(document),\r\n        $window = $(window),\r\n        $body = $(document.body),\r\n        screenSize = {\r\n            width: $window.innerWidth(),\r\n            height: $window.innerHeight()\r\n        },\r\n        sizeSettings = {\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        scaleFactor = 1,\r\n        typeDependant,\r\n        $feedbackBox,\r\n        $console,\r\n        previewContainerMaxWidth,\r\n        itemUri,\r\n        state,\r\n        winScrollObj = { x:0, y:0 };\r\n\r\n\r\n    /**\r\n     * Create data set for device selectors\r\n     *\r\n     * @param type\r\n     * @returns {Array}\r\n     * @private\r\n     */\r\n    var _getDeviceSelectorData = function (type) {\r\n\r\n        /*\r\n         * @todo\r\n         * The device list is currently based on the devices found on the Chrome emulator.\r\n         * This is not ideal and should be changed in the future.\r\n         * I have http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density in mind but we\r\n         * will need to figure what criteria to apply when generating the list.\r\n         */\r\n        var devices = type === 'mobile' ? deviceList.tablets : deviceList.screens,\r\n            options = [];\r\n\r\n        _.forEach(devices, function (value) {\r\n\r\n            options.push({\r\n                value: value.label,\r\n                label: value.label,\r\n                dataValue: [value.width, value.height].join(','),\r\n                selected: previewType === value.label\r\n            });\r\n        });\r\n\r\n\r\n        return options;\r\n    };\r\n\r\n    /**\r\n     * Collect all elements that can toggle their class name between mobile-* and desktop-*\r\n     *\r\n     * @private\r\n     */\r\n    var _setupTypeDependantElements = function () {\r\n        typeDependant = overlay.add(overlay.find('.preview-scale-container').find('[class*=\"' + previewType + '\"]'));\r\n    };\r\n\r\n\r\n    /**\r\n     * Change the class name of all type dependant elements\r\n     *\r\n     * @param {String} newType\r\n     */\r\n    var _setPreviewType = function (newType) {\r\n\r\n        if (newType === previewType) {\r\n            return;\r\n        }\r\n        var re = new RegExp(previewType, 'g');\r\n\r\n        typeDependant.each(function (i, el) {\r\n            el.className = el.className.replace(re, newType);\r\n        });\r\n\r\n        previewType = newType;\r\n    };\r\n\r\n\r\n    /**\r\n     * Set orientation\r\n     *\r\n     * @param {String} newOrientation\r\n     * @private\r\n     */\r\n    var _setOrientation = function (newOrientation) {\r\n        if (newOrientation === orientation) {\r\n            return;\r\n        }\r\n\r\n        var re = new RegExp(orientation, 'g'),\r\n            previewFrame = $('.preview-outer-frame')[0];\r\n\r\n        previewFrame.className = previewFrame.className.replace(re, newOrientation);\r\n\r\n        // reset global orientation\r\n        orientation = newOrientation;\r\n    };\r\n\r\n    /**\r\n     * Scale devices down to fit screen\r\n     * @private\r\n     */\r\n    var _scale = function () {\r\n\r\n        _computeScaleFactor();\r\n\r\n        var $scaleContainer = $('.preview-scale-container'),\r\n            _scaleFactor = previewType === 'standard' ? 1 : scaleFactor,\r\n            containerScaledWidth = $scaleContainer.width() * _scaleFactor,\r\n            left = (screenSize.width - containerScaledWidth) / 2;\r\n\r\n        $scaleContainer.css({\r\n            left: left > 0 ? left : 0,\r\n            '-webkit-transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\r\n            '-ms-transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\r\n            'transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\r\n            '-webkit-transform-origin': '0 0',\r\n            '-ms-transform-origin': '0 0',\r\n            'transform-origin': '0 0'\r\n        });\r\n    };\r\n\r\n    /**\r\n     * position the preview depending on the height of the toolbar\r\n     *\r\n     * @private\r\n     */\r\n    var _positionPreview = function () {\r\n        var topBarHeight = $(\".preview-utility-bar\").outerHeight();\r\n\r\n        overlay[0].style.top = topBarHeight + 'px';\r\n        overlay[0].style.maxHeight = 'calc(100vh - ' + topBarHeight + 'px - ' + $console.outerHeight() + 'px )';\r\n    };\r\n\r\n\r\n    /**\r\n     * Compute scale factor based on screen size and device size\r\n     *\r\n     * @private\r\n     */\r\n    var _computeScaleFactor = function () {\r\n\r\n        var scaleValues = {\r\n            x: 1,\r\n            y: 1\r\n        };\r\n\r\n        // 150/200 = device frames plus toolbar plus console plus some margin\r\n\r\n        var requiredSize = {\r\n            width: sizeSettings.width + 150,\r\n            height: sizeSettings.height + 275\r\n        };\r\n\r\n        if (requiredSize.width > screenSize.width) {\r\n            scaleValues.x = screenSize.width / requiredSize.width;\r\n        }\r\n\r\n        if (requiredSize.height > screenSize.height) {\r\n            scaleValues.y = screenSize.height / requiredSize.height;\r\n        }\r\n\r\n        scaleFactor = Math.min(scaleValues.x, scaleValues.y);\r\n    };\r\n\r\n    /**\r\n     * Add functionality to device selectors\r\n     *\r\n     * @private\r\n     */\r\n    var _setupDeviceSelectors = function () {\r\n\r\n\r\n        var previewDeviceSelectors = overlay.find('.preview-device-selector');\r\n\r\n        previewDeviceSelectors.on('change', function () {\r\n            var elem = $(this),\r\n                option = this.nodeName.toLowerCase() === 'select' ? this.options[this.selectedIndex] : this,\r\n                type = elem.data('target'),\r\n                val = $(option).data('value').split(','),\r\n                i = val.length,\r\n                container = overlay.find('.' + type + '-preview-container');\r\n\r\n\r\n            while (i--) {\r\n                val[i] = parseFloat(val[i]);\r\n            }\r\n\r\n            if (type === 'mobile' && orientation === 'portrait') {\r\n                sizeSettings = {\r\n                    width: val[1],\r\n                    height: val[0]\r\n                };\r\n            }\r\n            else {\r\n                sizeSettings = {\r\n                    width: val[0],\r\n                    height: val[1]\r\n                };\r\n            }\r\n\r\n            if (sizeSettings.width === container.width() && sizeSettings.height === container.height()) {\r\n                return false;\r\n            }\r\n\r\n            _setPreviewType(type);\r\n            container.css(sizeSettings);\r\n            _scale();\r\n            _adaptFrameSize();\r\n        });\r\n\r\n        previewDeviceSelectors.each(function () {\r\n            if (this.nodeName.toLowerCase() === 'select') {\r\n                $(this).select2({\r\n                    minimumResultsForSearch: -1\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Setup orientation selector. There is no actual orientation switch for desktop but it could\r\n     * be added easily if required.\r\n     * @private\r\n     */\r\n    var _setupOrientationSelectors = function () {\r\n\r\n        $('select.orientation-selector').on('change',function () {\r\n\r\n            var type = $(this).data('target'),\r\n                previewFrame = $('.' + type + '-preview-frame'),\r\n                container = previewFrame.find('.' + type + '-preview-container'),\r\n                newOrientation = $(this).val();\r\n\r\n            if (newOrientation === orientation) {\r\n                return false;\r\n            }\r\n\r\n            sizeSettings = {\r\n                height: container.width(),\r\n                width: container.height()\r\n            };\r\n\r\n            container.css(sizeSettings);\r\n\r\n            _setOrientation(newOrientation);\r\n\r\n            _scale();\r\n            _adaptFrameSize();\r\n\r\n\r\n        }).select2({\r\n            minimumResultsForSearch: -1\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Close preview\r\n     *\r\n     * @returns {*|HTMLElement}\r\n     */\r\n    var _setupClosers = function () {\r\n        var $closer = overlay.find('.preview-closer'),\r\n            $feedbackCloser = $feedbackBox.find('.close-trigger'),\r\n            $hideForever = $feedbackBox.find('a');\r\n        var $iframe = $('#preview-iframe');\r\n\r\n        $closer.on('click', function () {\r\n            $doc.trigger('itemunload.preview');\r\n//            commonRenderer.setContext($('.item-editor-item'));\r\n\r\n            window.scrollTo(winScrollObj.x, winScrollObj.y);\r\n\r\n            overlay.hide();\r\n            $body.removeClass('preview-mode');\r\n\r\n            //empty the iframe\r\n            $iframe.off('load').attr('src', 'about:blank');\r\n        });\r\n\r\n        $doc.keyup(function (e) {\r\n            if (e.keyCode === 27) {\r\n                $closer.trigger('click');\r\n            }\r\n        });\r\n\r\n        $feedbackCloser.on('click', function () {\r\n            $feedbackBox.hide();\r\n            $body.addClass('no-preview-feedback');\r\n            _positionPreview();\r\n            _scale();\r\n        });\r\n\r\n        $hideForever.on('click', function (e) {\r\n            e.preventDefault();\r\n            $.cookie('hidePreviewFeedback', true, { expires: 1000, path: '/' });\r\n            $feedbackCloser.trigger('click');\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Build options for themes\r\n     *\r\n     * @todo is there a way to know the selected theme?\r\n     *\r\n     * @returns {Array}\r\n     * @private\r\n     */\r\n    var _getThemes = function() {\r\n\r\n        var options = [];\r\n        var activeTheme;\r\n\r\n        //don't load themes if there is none\r\n        if(_.isPlainObject(themeObj) && !_.isEmpty(themeObj.base)){\r\n            activeTheme = themeLoader(themeObj).getActiveTheme();\r\n\r\n            _(themeObj.available).forEach(function (data) {\r\n                options.push({\r\n                    value: data.id,\r\n                    label: data.name,\r\n                    selected: data.id === activeTheme\r\n                });\r\n            });\r\n        }\r\n        return options;\r\n    };\r\n\r\n    /**\r\n     * Build options for preview types\r\n     *\r\n     * @returns {Array}\r\n     * @private\r\n     */\r\n    var _getPreviewTypes = function () {\r\n        var options = [];\r\n        _(previewTypes).forEach(function (_previewLabel, _previewType) {\r\n            options.push({\r\n                value: _previewType,\r\n                label: _previewLabel,\r\n                selected: previewType === _previewType\r\n            });\r\n        });\r\n        return options;\r\n    };\r\n\r\n    /**\r\n     * Select preview type\r\n     *\r\n     * @private\r\n     */\r\n    var _setupViewSelector = function () {\r\n\r\n        $('select.preview-type-selector').on('change',function () {\r\n            var _previewType = $(this),\r\n                value = _previewType.val();\r\n\r\n            _setPreviewType(value);\r\n\r\n            $('.' + value + '-device-selector').trigger('change');\r\n        }).select2({\r\n            minimumResultsForSearch: -1\r\n        });\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Select preview theme\r\n     *\r\n     * @private\r\n     */\r\n    var _setupThemeSelector = function () {\r\n        $('select.preview-theme-selector').on('change',function () {\r\n            var iframe = document.getElementById('preview-container');\r\n            var iframeDoc = iframe.contentWindow || iframe.contentDocument;\r\n            iframeDoc.$('.qti-item').trigger('themechange', [$(this).val()]);\r\n\r\n        }).select2({\r\n            minimumResultsForSearch: -1\r\n        });\r\n\r\n    };\r\n\r\n    var _adaptFrameSize = function () {\r\n\r\n        var $previewContainer = $('.preview-container'),\r\n            $iframe = (function () {\r\n                var _iframe = $previewContainer.find('iframe');\r\n                _iframe.height('');\r\n                return _iframe;\r\n            }()),\r\n            contentHeight = $iframe.contents().outerHeight(),\r\n            containerHeight = $previewContainer.innerHeight();\r\n\r\n        if (previewType !== 'standard') {\r\n            if (contentHeight < containerHeight) {\r\n                contentHeight = containerHeight;\r\n            }\r\n        }\r\n        else {\r\n            $previewContainer.height(contentHeight + 10);\r\n        }\r\n\r\n        $iframe.height(contentHeight);\r\n    };\r\n\r\n\r\n    /**\r\n     * Set the size for the standard preview\r\n     * @param height\r\n     * @private\r\n     */\r\n    var _updateStandardPreviewSize = function (height) {\r\n        var $selector = $('.standard-device-selector'),\r\n            values = ($selector.val() ? $selector.val().split(',') : '') || [$window.width().toString()],\r\n            valueStr = values.join(',');\r\n\r\n        values[1] = height || values[1] || '1200';\r\n\r\n        $selector.val(valueStr).data('value', valueStr);\r\n    };\r\n\r\n\r\n    /**\r\n     * Console\r\n     *\r\n     * @private\r\n     */\r\n    var _initConsole = function () {\r\n        var $body = $console.find('.preview-console-body'),\r\n            $listing = $body.find('ul'),\r\n            $closer = $console.find('.preview-console-closer');\r\n\r\n        $console.off('updateConsole').on('updateConsole', function (event, type, message) {\r\n            var timer = new Date(),\r\n                logTime = [\r\n                    strPad(timer.getHours(), 2, '0', 'STR_PAD_LEFT'),\r\n                    strPad(timer.getMinutes(), 2, '0', 'STR_PAD_LEFT'),\r\n                    strPad(timer.getSeconds(), 2, '0', 'STR_PAD_LEFT')\r\n                ].join(':'),\r\n                msgStr = '<span class=\"log-time\">' + strPad(logTime, 12, ' ') + '</span> ' +\r\n                    '<span class=\"log-type\">' + strPad(type, 18, ' ') + '</span> ' +\r\n                    '<span class=\"log-message\">' + strPad(message, 18, ' ') + '</span>';\r\n            $listing.append('<li><pre>' + msgStr + '</pre></li>');\r\n            if (!$body.is(':visible')) {\r\n                $body.slideDown('slow', function () {\r\n                    $closer.show();\r\n                    $listing.scrollTop(10000);\r\n                });\r\n            }\r\n            else {\r\n                $listing.scrollTop(10000);\r\n            }\r\n        });\r\n\r\n        $closer.on('click', function () {\r\n            $body.slideUp('slow', function () {\r\n                $closer.hide();\r\n            });\r\n        });\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * Display the preview\r\n     * @returns {Promise} resolve once the preview is shown\r\n     */\r\n    var show = function () {\r\n        return new Promise(function (resolve, reject){\r\n            var parsed = new UrlParser(itemUri);\r\n            parsed.params.state = JSON.stringify(state);\r\n            $.ajax({\r\n                url: itemUri,\r\n                dataType: 'html',\r\n                method : 'POST',\r\n                data : parsed.params\r\n            }).done(function (data) {\r\n\r\n                winScrollObj = { x: window.scrollX, y: window.scrollY };\r\n                window.scrollTo(0,0);\r\n\r\n                $body.addClass('preview-mode');\r\n\r\n                // $.show() does not work from the item manager\r\n                // this is either a miracle or a jquery bug\r\n                // overlay.hide().show();\r\n                overlay[0].style.display = 'block';\r\n\r\n                overlay.find('select:visible').not('.preview-theme-selector').trigger('change');\r\n                _scale();\r\n                _positionPreview();\r\n                $('.preview-item-container').html(data);\r\n                resolve();\r\n\r\n            }).fail(function(xhr){\r\n                reject(new Error(__('Unable to render the item from %s : %s %s', itemUri, xhr.status, xhr.statusText)));\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Setting up screen size according preview viewport size\r\n     * @private\r\n     */\r\n    function _setupScreenSize() {\r\n        screenSize = {\r\n            width: $('.preview-overlay').innerWidth(),\r\n            height: $('.preview-overlay').innerHeight()\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Create preview\r\n     *\r\n     * @param {String} _itemUri\r\n     * @param {Object} _state\r\n     */\r\n    var init = function (_itemUri, _state) {\r\n\r\n        if(!_itemUri || _itemUri.length === 0){\r\n            throw new TypeError('Wrong URI');\r\n        }\r\n\r\n        $('.preview-overlay').remove();\r\n        container = null;\r\n        overlay = $(previewTpl({\r\n            mobileDevices: _getDeviceSelectorData('mobile'),\r\n            desktopDevices: _getDeviceSelectorData('desktop'),\r\n            previewTypes: _getPreviewTypes(),\r\n            previewType: previewType,\r\n            themes: _getThemes(),\r\n            hasThemes: _.size(themeObj.available) > 1\r\n        }));\r\n\r\n        $body.append(overlay);\r\n\r\n        previewContainerMaxWidth = parseInt($('.preview-container').css('max-width'), 10);\r\n\r\n        $feedbackBox = overlay.find('.preview-message-box');\r\n        if ($.cookie('hidePreviewFeedback')) {\r\n            $feedbackBox.hide();\r\n            $body.addClass('no-preview-feedback');\r\n        }\r\n\r\n        $console = overlay.find('#preview-console');\r\n\r\n        _initConsole();\r\n        _updateStandardPreviewSize();\r\n        _setupTypeDependantElements();\r\n        _setupDeviceSelectors();\r\n        _setupOrientationSelectors();\r\n        _setupViewSelector();\r\n        _setupThemeSelector();\r\n        _setupClosers();\r\n        _setupScreenSize();\r\n        _computeScaleFactor();\r\n        _setPreviewType(previewType);\r\n        _setOrientation(orientation);\r\n\r\n        $window.on('resize orientationchange', function () {\r\n            _setupScreenSize();\r\n            _updateStandardPreviewSize();\r\n            _computeScaleFactor();\r\n            _scale();\r\n        });\r\n\r\n        itemUri = _itemUri;\r\n        state = _state;\r\n\r\n        return overlay;\r\n    };\r\n\r\n    return {\r\n        init: init,\r\n        show: show\r\n    };\r\n});\r\n\n","/*\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2014 (original work) Open Assessment Techniologies SA\r\n *\r\n */\r\ndefine('taoItems/controller/items/action',[\r\n    'layout/actions/binder',\r\n    'uri',\r\n    'jquery',\r\n    'context',\r\n    'taoItems/preview/preview',\r\n    'helpers'\r\n], function(binder, uri, $, context, preview, helpers){\r\n    'use strict';\r\n\r\n    binder.register('itemPreview', function itemPreview(actionContext){\r\n        preview.init(helpers._url('forwardMe', 'ItemPreview', context.shownExtension, {uri : actionContext.id}));\r\n        preview.show();\r\n    });\r\n\r\n});\r\n\n","/**\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA;\r\n */\r\ndefine('taoItems/controller/items/edit',[\r\n    'jquery',\r\n    'i18n',\r\n    'module',\r\n    'layout/actions',\r\n    'ui/lock',\r\n    'layout/section'\r\n],\r\nfunction($, __, module, actions, lock, section){\r\n    'use strict';\r\n\r\n    /**\r\n     * The item properties controller\r\n     */\r\n    var editItemController = {\r\n\r\n        /**\r\n         * Controller entry point\r\n         */\r\n        start : function start(){\r\n            var config = module.config();\r\n\r\n            var isPreviewEnabled = !!config.isPreviewEnabled;\r\n            var isAuthoringEnabled = !!config.isAuthoringEnabled;\r\n\r\n            var previewAction = actions.getBy('item-preview');\r\n            var authoringAction = actions.getBy('item-authoring');\r\n\r\n            if(previewAction){\r\n                previewAction.state.disabled = !config.isPreviewEnabled;\r\n            }\r\n            if(authoringAction){\r\n                authoringAction.state.disabled = !config.isAuthoringEnabled;\r\n            }\r\n            actions.updateState();\r\n\r\n            $('#lock-box').each(function() {\r\n                lock($(this)).register();\r\n            });\r\n\r\n            //some of the others sections (like the authoring) might have an impact\r\n            //on the state of the other actions, so we reload when we come back\r\n            section\r\n                .off('show')\r\n                .on('show', function(sectionContext){\r\n                    if(sectionContext.id === 'manage_items'){\r\n                        actions.exec('item-properties');\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    return editItemController;\r\n});\r\n\n","\ndefine('tpl!taoItems/component/category/switch', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<a href=\\\"#\\\" data-id=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"category-auto-adder\\\"><span class=\\\"icon-tag\\\"></span></a>\\r\\n\";\n  return buffer;\n  });\n});\n\n","/**\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA;\r\n */\r\n\r\n/**\r\n * A component to switch the exposition state for categories of a property\r\n *\r\n * @author Bertrand Chevrier <bertrand@taotesting.com>\r\n */\r\ndefine('taoItems/component/category/switch',[\r\n    'lodash',\r\n    'i18n',\r\n    'ui/component',\r\n    'tpl!taoItems/component/category/switch'\r\n], function(_, __, component, switchTpl){\r\n    'use strict';\r\n\r\n    /**\r\n     * The titles based on current exposition state\r\n     */\r\n    var titles = {\r\n        expose : __('Expose the property value to create automated categories.'),\r\n        unexpose : __('The property is exposed to category addition.&#13Remove exposition ?')\r\n    };\r\n\r\n\r\n    /**\r\n     * The factory to create a new component\r\n     *\r\n     * @param {jQueryElement} $container - where to append the component\r\n     * @param {string} propertyId - to keep the property identifier\r\n     * @param {boolean} exposed - the initial exposition state\r\n     *\r\n     * @returns {categorySwitchComponent} the component\r\n     *\r\n     * @throws {TypeError} whithout the propertyId\r\n     */\r\n    return function categorySwitchFactory($container, propertyId, exposed){\r\n\r\n        var categorySwitchComponent;\r\n\r\n        if(!propertyId){\r\n            throw new TypeError('We need the property id');\r\n        }\r\n\r\n\r\n        /**\r\n         * @typedef {categorySwitchComponent} The component itself\r\n         */\r\n        categorySwitchComponent =\r\n            component({\r\n\r\n                /**\r\n                 * Change the current state\r\n                 *\r\n                 * @param {boolean} exposed - the new state\r\n                 *\r\n                 * @returns {categorySwitchComponent} chains\r\n                 */\r\n                setExposed : function setExposed(value){\r\n                    if (!this.is('disabled')) {\r\n                        this.setState('exposed', !!value);\r\n\r\n                        if(this.is('rendered')){\r\n                            if(value){\r\n                                this.getElement()\r\n                                    .removeClass('placeholder')\r\n                                    .addClass('txt-success')\r\n                                    .attr('title', titles.unexpose);\r\n                            } else {\r\n                                this.getElement()\r\n                                    .removeClass('txt-success')\r\n                                    .addClass('placeholder')\r\n                                    .attr('title', titles.expose);\r\n                            }\r\n                        }\r\n                    }\r\n                    return this;\r\n                },\r\n\r\n                /**\r\n                 * Check the exposition state\r\n                 *\r\n                 * @returns {boolean} the current state\r\n                 */\r\n                isExposed : function isExposed(){\r\n                    return this.is('exposed');\r\n                }\r\n            }, {})\r\n                .on('init', function(){\r\n\r\n                    this.setState('exposed', exposed);\r\n\r\n                    this.render($container);\r\n                })\r\n                .on('render', function(){\r\n                    var self = this;\r\n                    var $component = this.getElement();\r\n\r\n                    this.setExposed(exposed);\r\n                    $component\r\n                        .off('click')\r\n                        .on('click', function(e){\r\n                            e.preventDefault();\r\n                            if(!self.is('disabled')){\r\n\r\n                                /**\r\n                                 * We request a state change\r\n                                 * @event categorySwitchComponent#requestChange\r\n                                 * @param {string} propertyId - the property identifier\r\n                                 * @param {boolean} exposed - the requested exposition state\r\n                                 */\r\n                                self.trigger('requestChange', self.config.id, !self.is('exposed'));\r\n                            }\r\n                        });\r\n                });\r\n\r\n        //defering initialization to be able to listen\r\n        _.defer(function(){\r\n            categorySwitchComponent\r\n                .setTemplate(switchTpl)\r\n                .init({\r\n                    id : propertyId,\r\n                });\r\n        });\r\n\r\n        return categorySwitchComponent;\r\n    };\r\n});\r\n\r\n\r\n\n","/**\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA;\r\n */\r\n\r\n/**\r\n * Provides category data.\r\n *\r\n * @author Bertrand Chevrier <bertrand@taotesting.com>\r\n */\r\ndefine('taoItems/provider/category',[\r\n    'lodash',\r\n    'i18n',\r\n    'util/url',\r\n    'core/dataProvider/request',\r\n    'core/promise'\r\n], function( _, __, url, request, Promise){\r\n    'use strict';\r\n\r\n    /**\r\n     * Per function requests configuration.\r\n     */\r\n    var defaultConfig = {\r\n        getExposedsByClass : {\r\n            url : url.route('getExposedsByClass', 'Category', 'taoItems')\r\n        },\r\n        setExposed : {\r\n            url : url.route('setExposed', 'Category', 'taoItems')\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * Creates a configured category provider\r\n     *\r\n     * @param {Object} [config] - to override the default config\r\n     * @returns {categoryProvider} the new provider\r\n     */\r\n    return function categoryProviderFactory(config){\r\n\r\n        config = _.defaults(config || {}, defaultConfig);\r\n\r\n        /**\r\n         * @typedef {categoryProvider}\r\n         */\r\n        return {\r\n\r\n            /**\r\n             * Get the properties and the exposed state for a given class\r\n             * @param {String} id - the class URI\r\n             * @returns {Promise} that resolves with and object like  propertyURI : exposed\r\n             */\r\n            getExposedsByClass: function getExposedsByClass(id){\r\n                return new Promise(function(resolve, reject){\r\n\r\n                    if(_.isEmpty(id)){\r\n                        return reject(new TypeError('The class URI must be provided in the id parameter'));\r\n                    }\r\n\r\n                    return resolve(request(config.getExposedsByClass.url, { id : id }));\r\n                });\r\n            },\r\n\r\n            /**\r\n             * Set the exposed state for a property\r\n             * @param {String} id - the property URI\r\n             * @param {Boolean} exposed - the exposed value\r\n             * @returns {Promise} that resolves with the list of ID definitions.\r\n             */\r\n            setExposed : function setExposed(id, exposed){\r\n                return new Promise(function(resolve, reject){\r\n\r\n                    if(_.isEmpty(id)){\r\n                        return reject(new TypeError('The property URI must be provided in the id parameter'));\r\n                    }\r\n                    if(!_.isBoolean(exposed)){\r\n                        return reject(new TypeError('The exposed value is required.'));\r\n                    }\r\n\r\n                    return resolve(request(config.setExposed.url, { id : id, exposed: exposed }));\r\n                });\r\n            }\r\n        };\r\n    };\r\n});\r\n\n","/*\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\r\n *\r\n */\r\n\r\n\r\n/**\r\n *\r\n * @author Bertrand Chevrier <bertrand@taotesting.com>\r\n */\r\ndefine('taoItems/controller/items/editItemClass',[\r\n    'jquery',\r\n    'lodash',\r\n    'uri',\r\n    'taoItems/component/category/switch',\r\n    'taoItems/provider/category',\r\n    'ui/feedback'\r\n], function($, _, uriUtil, categorySwitch, categoryProvider, feedback) {\r\n    'use strict';\r\n\r\n    var provider = categoryProvider();\r\n\r\n    /**\r\n     * We inject the placeholder of the switch for the given property\r\n     * @param {String} uri - the property uri\r\n     * @returns {jQueryElement} the placeholder if created\r\n     */\r\n    var injectButtonPlaceholder = function injectButtonPlaceholder(uri) {\r\n        var $propContainer = $('#property_' + uriUtil.encode(uri));\r\n        var $placeholder,\r\n            $propertyToolbar,\r\n            $editButton;\r\n\r\n        if($propContainer.length && $propContainer.hasClass('regular-property')){\r\n            $placeholder     = $('<span>');\r\n            $propertyToolbar = $('.property-heading-toolbar', $propContainer);\r\n            $editButton      = $('.icon-edit', $propertyToolbar);\r\n\r\n            if ($editButton.length) {\r\n                $placeholder.insertAfter($editButton);\r\n            } else {\r\n                $propertyToolbar.append($placeholder);\r\n            }\r\n        }\r\n        return $placeholder;\r\n    };\r\n\r\n    /**\r\n     * Display the error\r\n     * @param {Error} err - any error\r\n     */\r\n    var handleError = function handleError(err){\r\n        feedback().error(err.message);\r\n    };\r\n\r\n    /**\r\n     * Acc the expose category switch component to the container\r\n     * @param {jQueryElement} $container - where to append the switch\r\n     * @param {String} propertyUri - the property URI\r\n     * @param {Boolean} exposed - the initial state\r\n     * @returns {categorySwitchComponent} the component\r\n     */\r\n    var addCategorySwitch = function addCategorySwitch($container, propertyUri, exposed) {\r\n        return categorySwitch($container, propertyUri, exposed)\r\n            .on('requestChange', function(propUri, value) {\r\n                var self = this;\r\n                this.setState('disabled', true);\r\n\r\n                provider\r\n                    .setExposed(propUri, value)\r\n                    .then(function(success){\r\n                        self.setState('disabled', false);\r\n                        if(success){\r\n                            self.setExposed(value);\r\n                        }\r\n                    })\r\n                    .catch(handleError);\r\n            });\r\n    };\r\n\r\n    /**\r\n     * The contoller\r\n     */\r\n    return {\r\n\r\n        /**\r\n         * Usual entry point\r\n         */\r\n        start : function start() {\r\n            var classUri = $('#id').val();\r\n\r\n            provider\r\n                .getExposedsByClass(classUri)\r\n                .then(function(results){\r\n                    //we received the list of eligible properties and their expose state\r\n                    _.forEach(results, function(exposed, uri){\r\n                        var $container = injectButtonPlaceholder(uri);\r\n                        if($container && $container.length){\r\n                            addCategorySwitch($container, uri, exposed);\r\n                        }\r\n                    });\r\n                })\r\n                .catch(handleError);\r\n        }\r\n    };\r\n});\r\n\n","/**\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\r\n */\r\ndefine('serviceApi/ServiceApi',['jquery', 'urlParser'], function($, UrlParser){\r\n    'use strict';\r\n\r\n    /**\r\n     * @constructor\r\n     */\r\n    function ServiceApi(baseUrl, parameters, serviceCallId, stateStorage, userService, paused){\r\n        this.baseUrl = baseUrl;\r\n        this.parameters = parameters;\r\n        this.connected = false;\r\n\r\n        this.serviceCallId = serviceCallId;\r\n        this.state = stateStorage;\r\n        this.userService = userService;\r\n        this.hasBeenPaused = paused;\r\n    }\r\n\r\n    ServiceApi.SIG_SUCCESS = 0;\r\n    ServiceApi.SIG_ERROR = 1;\r\n\r\n    ServiceApi.prototype.loadInto = function(frame, connected){\r\n        var self = this;\r\n        var $frame = $(frame);\r\n        var callUrl = this.getCallUrl();\r\n        var isCORSAllowed = new UrlParser(callUrl).checkCORS();\r\n\r\n        $frame.on('load', function(e){\r\n             //if we are  in the same domain, we add a variable\r\n             //to the frame window, so the frame knows it can communicate\r\n             //with the parent\r\n            $(document).on('serviceready', function(){\r\n                self.connect(frame, function(){\r\n                    $(document).off('serviceready');\r\n                    if(typeof connected === 'function'){\r\n                        connected();\r\n                    }\r\n                });\r\n            });\r\n             if(isCORSAllowed === true){\r\n                 frame.contentWindow.__knownParent__ = true;\r\n             }\r\n         });\r\n\r\n        $frame.attr('src', callUrl);\r\n    };\r\n\r\n    ServiceApi.prototype.connect = function(frame, connected){\r\n        if(this.connected === false && frame.contentWindow){\r\n            //frame.contentWindow.serviceApi = this;\r\n            if (typeof(frame.contentWindow.onServiceApiReady) === \"function\") {\r\n                frame.contentWindow.onServiceApiReady(this);\r\n                this.connected = true;\r\n                if(typeof connected === 'function'){\r\n                    connected();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get the service call URL\r\n     * @returns {String} the URI\r\n     */\r\n    ServiceApi.prototype.getCallUrl = function(){\r\n        var params = this.parameters || {};\r\n        params.serviceCallId = this.serviceCallId;\r\n        return this.baseUrl + '?' + $.param(params);\r\n    };\r\n\r\n    ServiceApi.prototype.getUserPropertyValues = function(property, callback){\r\n    \tthis.userService.get(property, callback);\r\n    };\r\n\r\n    //Context\r\n    ServiceApi.prototype.getServiceCallId = function(){\r\n        return this.serviceCallId;\r\n    };\r\n\r\n    //Context\r\n    ServiceApi.prototype.getState = function(){\r\n        return this.state.get();\r\n    };\r\n\r\n    ServiceApi.prototype.setState = function(state, callback){\r\n        return this.state.set(state, callback);\r\n    };\r\n\r\n    //Context\r\n    ServiceApi.prototype.getHasBeenPaused = function(){\r\n        return this.hasBeenPaused;\r\n    };\r\n\r\n    ServiceApi.prototype.setHasBeenPaused = function(paused){\r\n        this.hasBeenPaused = paused;\r\n    };\r\n\r\n    // Variables\r\n    ServiceApi.prototype.getParameter = function(identifier){\r\n        if (typeof(this.parameters[identifier]) !== \"undefined\") {\r\n            return this.parameters[identifier];\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Sets a callback on the finish action\r\n     * @param {Function} callback\r\n     * @returns {ServiceApi}\r\n     */\r\n    ServiceApi.prototype.onFinish = function(callback) {\r\n        this.onFinishCallback = callback;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Sets a callback on the kill action\r\n     * @param {Function} callback\r\n     * @returns {ServiceApi}\r\n     */\r\n    ServiceApi.prototype.onKill = function(callback) {\r\n        this.onKillCallback = callback;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Sets a callback on the exit action\r\n     * @param {Function} callback\r\n     * @returns {ServiceApi}\r\n     */\r\n    ServiceApi.prototype.onExit = function(callback) {\r\n        this.onExitCallback = callback;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {Function} callback - Function called if no dedicated callback is found\r\n     */\r\n    ServiceApi.prototype.kill = function(callback) {\r\n    \tif (typeof this.onKillCallback === 'function') {\r\n    \t\tthis.onKillCallback(callback);\r\n    \t} else {\r\n    \t\tcallback(0);\r\n    \t}\r\n    };\r\n\r\n    /**\r\n     * Exits the flow\r\n     * @param {Function} callback - Function called if no dedicated callback is found\r\n     */\r\n    ServiceApi.prototype.exit = function(callback) {\r\n    \tif (typeof this.onExitCallback === 'function') {\r\n    \t\tthis.onExitCallback(callback);\r\n    \t} else {\r\n    \t\tcallback(0);\r\n    \t}\r\n    };\r\n\r\n    /**\r\n     * Finishes the flow\r\n     * @param valueArray - return parameters of the service.\r\n     */\r\n    ServiceApi.prototype.finish = function(valueArray) {\r\n        //return execution to service caller\r\n        if (typeof this.onFinishCallback === 'function') {\r\n                this.onFinishCallback(valueArray);\r\n        }\r\n    };\r\n\r\n    return ServiceApi;\r\n\r\n});\r\n\n","define('serviceApi/PseudoStorage',[],function(){\r\n    \r\n    function PseudoStorage() {\r\n    }\r\n\r\n    PseudoStorage.prototype.get = function(callback){\r\n        if (typeof callback === 'function') {\r\n            callback(null);\r\n        }\r\n        return null;\r\n    };\r\n\r\n    PseudoStorage.prototype.set = function(state, callback){\r\n        if (typeof callback === \"function\") {\r\n            callback();\r\n        }\r\n    };\r\n\r\n    return PseudoStorage;\r\n});\n","define('serviceApi/UserInfoService',['jquery'], function($){\r\n    \r\n    function UserInfoService(requestUrl, data) {\r\n        this.data = data;\r\n        this.requestUrl = requestUrl;\r\n    }\r\n\r\n    UserInfoService.prototype.get = function(property, callback){\r\n        if (this.data.hasOwnProperty(property)) {\r\n            if (typeof callback === \"function\") {\r\n                    callback(this.data[property]);\r\n            }\r\n        } else {\r\n            $.ajax({\r\n                url : this.requestUrl,\r\n                data \t\t: {\r\n                    'property' : property\r\n                },\r\n                type        : 'post',\r\n                dataType\t: 'json',\r\n                success     : (function(service, callback) {return function(r) {\r\n            \t\tfor (key in r.data) {\r\n            \t\t\tservice.data[key] = r.data[key];\r\n            \t\t}\r\n                    if (typeof callback === \"function\") {\r\n                        callback(service.data[property]);\r\n                    }\r\n\r\n                }})(this, callback)\r\n                /*\t\r\n            \tfunction(r){\r\n                    if(r.success){\r\n                    \tconsole.log(this.data);\r\n                    \tthis.data[property] = r.values;\r\n                    \t//console.log(this.data);\r\n\t                    if (typeof callback === \"function\") {\r\n\t                        callback(this.data[property]);\r\n\t                    }\r\n                    }\r\n                }\r\n                */\r\n                \r\n                \r\n            });\r\n        }\r\n    };\r\n\r\n    return UserInfoService;\r\n});\n","define('taoItems/runtime/ItemServiceImpl',[ 'jquery' ], function($) {\r\n\r\n    function ItemServiceImpl(data) {\r\n\r\n        this.itemId = data.itemId;\r\n        this.serviceApi = data.serviceApi;\r\n        this.resultApi = data.resultApi || null;\r\n        this.params = data.params || {};\r\n        this.responses = {};\r\n        this.scores = {};\r\n        this.events = {};\r\n        this.connected = false;\r\n\r\n        var rawstate = this.serviceApi.getState();\r\n        var state = (typeof rawstate === 'undefined' || rawstate === null) ? {}\r\n                : $.parseJSON(rawstate);\r\n        this.stateVariables = typeof state === 'object' ? state : {};\r\n\r\n        this.beforeFinishCallbacks = [];\r\n    }\r\n\r\n    ItemServiceImpl.prototype.connect = function(frame) {\r\n        if (this.connected === false && frame.contentWindow) {\r\n            frame.contentWindow.itemApi = this;\r\n            \r\n            if (typeof (frame.contentWindow.onItemApiReady) === \"function\") {\r\n                frame.contentWindow.onItemApiReady(this);\r\n                this.connected = true;\r\n            }\r\n        }\r\n    };\r\n\r\n    // Response\r\n\r\n    ItemServiceImpl.prototype.saveResponses = function(valueArray) {\r\n        for ( var attrname in valueArray) {\r\n            this.responses[attrname] = valueArray[attrname];\r\n        }\r\n    };\r\n\r\n    ItemServiceImpl.prototype.traceEvents = function(eventArray) {\r\n        for ( var attrname in eventArray) {\r\n            this.events[attrname] = eventArray[attrname];\r\n        }\r\n    };\r\n\r\n    // Scoring\r\n    ItemServiceImpl.prototype.saveScores = function(valueArray) {\r\n        for ( var attrname in valueArray) {\r\n            this.scores[attrname] = valueArray[attrname];\r\n        }\r\n    };\r\n\r\n    ItemServiceImpl.prototype.getUserPropertyValues = function(property,\r\n            callback) {\r\n        this.serviceApi.getUserPropertyValues(property, callback);\r\n    };\r\n\r\n    // Flow\r\n    ItemServiceImpl.prototype.beforeFinish = function(callback) {\r\n        this.beforeFinishCallbacks.push(callback);\r\n    };\r\n\r\n    ItemServiceImpl.prototype.finish = function() {\r\n        var self = this;\r\n        for ( var i = 0; i < this.beforeFinishCallbacks.length; i++) {\r\n            this.beforeFinishCallbacks[i]();\r\n        }\r\n\r\n        this.submit(function() {\r\n            self.serviceApi.finish();\r\n        });\r\n    };\r\n\r\n    ItemServiceImpl.prototype.submit = function(after) {\r\n        var self = this;\r\n\r\n        this.serviceApi.setState(JSON.stringify(self.stateVariables),\r\n                function() {\r\n                    // todo add item, call id etc\r\n\r\n                    if (self.resultApi) {\r\n                        self.resultApi\r\n                                .submitItemVariables(self.itemId,\r\n                                        self.serviceApi.getServiceCallId(),\r\n                                        self.responses, self.scores,\r\n                                        self.events, self.params, after);\r\n                    } else {\r\n                        after();\r\n                    }\r\n                });\r\n    }\r\n\r\n    ItemServiceImpl.prototype.onKill = function(callback) {\r\n        this.serviceApi.onKill(callback);\r\n    };\r\n\r\n    ItemServiceImpl.prototype.getVariable = function(identifier, callback) {\r\n        if (typeof callback === 'function') {\r\n            callback(this.stateVariables[identifier] || null);\r\n        }\r\n    };\r\n\r\n    ItemServiceImpl.prototype.setVariable = function(identifier, value) {\r\n        this.stateVariables[identifier] = value;\r\n        this.serviceApi.setState(JSON.stringify(this.stateVariables));\r\n    };\r\n    \r\n    ItemServiceImpl.prototype.setVariables = function(values) {\r\n        for(var v in values){\r\n            this.stateVariables[v] = values[v];\r\n        }\r\n        this.serviceApi.setState(JSON.stringify(this.stateVariables));\r\n    };\r\n    \r\n    return ItemServiceImpl;\r\n});\n","/*\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\r\n *\r\n */\r\n\r\n/**\r\n * This module allows adding extra buttons in the action bar of the test runner\r\n *\r\n */\r\ndefine('taoItems/preview/actionBarHook',[\r\n    'jquery',\r\n    'lodash',\r\n    'core/errorHandler',\r\n    'core/promise'\r\n], function ($, _, errorHandler, Promise) {\r\n\r\n    'use strict';\r\n\r\n    /**\r\n     * Events namespace\r\n     * @type {String}\r\n     * @private\r\n     */\r\n    var _ns = '.previewActionBarHook';\r\n\r\n\r\n    /**\r\n     * List of loaded and visible hooks\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    var tools = {};\r\n\r\n\r\n    /**\r\n     *\r\n     * @type {*|jQuery|HTMLElement}\r\n     */\r\n    var $toolContainers = $();\r\n\r\n\r\n    /**\r\n     * Remove tools when closing the item\r\n     */\r\n    $(document).off('.preview').on('itemunload.preview', function () {\r\n        $toolContainers.each(function () {\r\n            var $toolContainer = $(this);\r\n            _.forEach(tools, function (tool, id) {\r\n                var $btn = $toolContainer.children('[data-control=\"' + id + '\"]');\r\n                if ($btn.length) {\r\n                    tool.clear($btn);\r\n                    $btn.remove();\r\n                }\r\n            });\r\n        });\r\n    });\r\n\r\n\r\n    /**\r\n     * Check that the toolConfig is correct\r\n     *\r\n     * @param {Object} toolconfig\r\n     * @param {String} toolconfig.hook - the amd module to be loaded to initialize the button\r\n     * @param {String} [toolconfig.label] - the label to be displayed in the button\r\n     * @param {String} [toolconfig.icon] - the icon to be displayed in the button\r\n     * @param {String} [toolconfig.title] - the title to be displayed in the button\r\n     * @param {Array} [toolconfig.items] - an optional list of menu items\r\n     * @returns {Boolean}\r\n     */\r\n    function isValidConfig(toolconfig) {\r\n        return !!(_.isObject(toolconfig) && toolconfig.hook);\r\n    }\r\n\r\n    /**\r\n     * Triggers the itemLoaded event inside the provided actionBar hook\r\n     * @param {Object} tool\r\n     */\r\n    function triggerItemLoaded(tool) {\r\n        if (tool && tool.itemLoaded) {\r\n            tool.itemLoaded();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Init a test runner button from its config\r\n     *\r\n     * @param {String} id\r\n     * @param {Object|String} toolconfig\r\n     * @param {String} toolconfig.hook - the amd module to be loaded to initialize the button\r\n     * @param {String} [toolconfig.label] - the label to be displayed in the button\r\n     * @param {String} [toolconfig.icon] - the icon to be displayed in the button\r\n     * @param {String} [toolconfig.title] - the title to be displayed in the button\r\n     * @param {Array} [toolconfig.items] - an optional list of menu items\r\n     * // @param {Object} testContext - the complete state of the test\r\n     * @param {Object} testRunner - the test runner instance\r\n     * @fires ready.actionBarHook when the hook has been initialized\r\n     * @returns {Promise}\r\n     */\r\n    function initExtraButtons($toolContainer, id, toolconfig) {\r\n\r\n        if (_.isString(toolconfig)) {\r\n            toolconfig = {\r\n                hook: toolconfig\r\n            };\r\n        }\r\n\r\n        tools[id] = null;\r\n\r\n        $toolContainers = $toolContainers.add($toolContainer);\r\n\r\n        return new Promise(function(resolve) {\r\n            if (isValidConfig(toolconfig)) {\r\n\r\n                require([toolconfig.hook], function (hook) {\r\n\r\n                    var $button;\r\n                    var $existingBtn;\r\n\r\n                    if (isValidHook(hook)) {\r\n                        //init the control\r\n                        hook.init(id, toolconfig);\r\n\r\n                        //if an instance of the tool is already attached, remove it:\r\n                        $existingBtn = $toolContainer.children('[data-control=\"' + id + '\"]');\r\n                        if ($existingBtn.length) {\r\n                            hook.clear($existingBtn);\r\n                            $existingBtn.remove();\r\n                        }\r\n\r\n                        //keep access to the tool\r\n                        tools[id] = hook;\r\n\r\n                        // renders the button from the config\r\n                        $button = hook.render();\r\n\r\n                        //only attach the button to the dom when everything is ready\r\n                        _appendInOrder($toolContainer, $button);\r\n\r\n                        //ready !\r\n                        $button.trigger('ready' + _ns, [hook]);\r\n\r\n                        triggerItemLoaded(hook);\r\n\r\n                        resolve(hook);\r\n                    } else {\r\n                        errorHandler.throw(_ns, 'invalid hook format');\r\n                        resolve(null);\r\n                    }\r\n\r\n                }, function (e) {\r\n                    errorHandler.throw(_ns, 'the hook amd module cannot be found');\r\n                    resolve(null);\r\n                });\r\n\r\n            } else {\r\n                errorHandler.throw(_ns, 'invalid tool config format');\r\n                resolve(null);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Append a dom element $button to a $container in a specific order\r\n     * The orders are provided by data-order attribute set to the $button\r\n     *\r\n     * @param {JQuery} $container\r\n     * @param {JQuery} $button\r\n     */\r\n    function _appendInOrder($container, $button) {\r\n\r\n        var $after, $before;\r\n        var order = $button.data('order');\r\n\r\n        if ('last' === order) {\r\n\r\n            $container.append($button);\r\n\r\n        } else if ('first' === order) {\r\n\r\n            $container.prepend($button);\r\n\r\n        } else {\r\n\r\n            order = _.parseInt(order);\r\n            if (!_.isNaN(order)) {\r\n\r\n                $container.children('.action').each(function () {\r\n\r\n                    var $btn = $(this),\r\n                        _order = $btn.data('order');\r\n\r\n                    if ('last' === _order) {\r\n\r\n                        $before = $btn;\r\n                        $after = null;\r\n\r\n                    } else if ('first' === _order) {\r\n\r\n                        $before = null;\r\n                        $after = $btn;\r\n\r\n                    } else {\r\n\r\n                        _order = _.parseInt(_order);\r\n\r\n                        if (_.isNaN(_order) || _order > order) {\r\n                            $before = $btn;\r\n                            $after = null;\r\n                            //stops here because $container children returns the dom elements in the dom order\r\n                            return false;\r\n                        } else if (_order === order) {\r\n                            $after = $btn;\r\n                        } else if (_order < order) {\r\n                            $after = $btn;\r\n                            $before = null;\r\n                        }\r\n\r\n                    }\r\n\r\n                });\r\n\r\n                if ($after) {\r\n                    $after.after($button);\r\n                } else if ($before) {\r\n                    $before.before($button);\r\n                } else {\r\n                    $container.append($button);\r\n                }\r\n\r\n            } else {\r\n                //unordered buttons are append at the end (including when order equals 0)\r\n                $container.append($button);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if the hook object is valid\r\n     *\r\n     * @param {Object} hook\r\n     * @param {Function} hook.init\r\n     * @param {Function} hook.clear\r\n     * @param {Function} hook.isVisible\r\n     * @returns {Boolean}\r\n     */\r\n    function isValidHook(hook) {\r\n        return (_.isObject(hook) && _(['init', 'render', 'clear', 'isVisible']).reduce(function (result, method) {\r\n            return result && _.isFunction(hook[method]);\r\n        }, true));\r\n    }\r\n\r\n    return {\r\n        isValid: isValidConfig,\r\n        initExtraButtons: initExtraButtons\r\n    };\r\n});\r\n\n","/**\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\r\n *\r\n *\r\n */\r\ndefine('taoItems/controller/preview/itemRunner',[\r\n    'module',\r\n    'jquery',\r\n    'lodash',\r\n    'util/encode',\r\n    'serviceApi/ServiceApi',\r\n    'serviceApi/PseudoStorage',\r\n    'serviceApi/UserInfoService',\r\n    'taoItems/runtime/ItemServiceImpl',\r\n    'taoItems/preview/actionBarHook',\r\n    'urlParser'\r\n], function (\r\n    module,\r\n    $,\r\n    _,\r\n    encoder,\r\n    ServiceApi,\r\n    PseudoStorage,\r\n    UserInfoService,\r\n    ItemServiceImpl,\r\n    actionBarHook,\r\n    UrlParser\r\n) {\r\n    'use strict';\r\n\r\n\r\n        /**\r\n         * Custom Buttons, usually defined in a custom extension\r\n         *\r\n         * @private\r\n         */\r\n        var _initCustomButtons = function _initCustomButtons() {\r\n\r\n            var config = module.config(),\r\n                buttons = config.extraButtons || {},\r\n                $container = $('.extra-button-action-bar');\r\n\r\n\r\n            _.forIn(buttons, function(config, id) {\r\n                actionBarHook.initExtraButtons($container, id, config);\r\n            });\r\n\r\n        };\r\n\r\n        var previewItemRunner = {\r\n\r\n            start: function (options) {\r\n\r\n                var conf = _.merge(module.config(), options || {});\r\n\r\n                if (conf.previewUrl) {\r\n\r\n                    var resultServer = _.defaults(conf.resultServer, {\r\n                        module: 'taoResultServer/ResultServerApi',\r\n                        endpoint: '',\r\n                        params: {}\r\n                    });\r\n\r\n                    //load dynamically the right ResultServerApi\r\n                    require([resultServer.module], function (ResultServerApi) {\r\n\r\n                        var resultServerApi = new ResultServerApi(\r\n                            resultServer.endpoint,\r\n                            resultServer.params\r\n                        );\r\n\r\n                        var serviceApi = new ServiceApi(\r\n                            conf.previewUrl,\r\n                            {},\r\n                            'preview',\r\n                            new PseudoStorage(),\r\n                            new UserInfoService(conf.userInfoServiceRequestUrl, {})\r\n                        );\r\n\r\n                        var itemApi = new ItemServiceImpl({\r\n                            serviceApi: serviceApi,\r\n                            resultApi: resultServerApi\r\n                        });\r\n\r\n                        var callUrl = new UrlParser(serviceApi.getCallUrl());\r\n                        var isCORSAllowed = callUrl.checkCORS();\r\n                        callUrl.addParam('clientConfigUrl', conf.clientConfigUrl);\r\n\r\n                        //the iframe is 1st detached and then attached with src in order to prevent adding an entry in the history\r\n                        var $frame = $('<iframe id=\"preview-container\" name=\"preview-container\" src=\"' + callUrl.getUrl() + '\"></iframe>');\r\n\r\n                        var state;\r\n                        try {\r\n                            state = JSON.parse(encoder.decodeBase64(conf.state));\r\n                        } catch(e) {\r\n                            state = null;\r\n                        }\r\n\r\n                        if (state) {\r\n                            itemApi.setVariables(state);\r\n                        }\r\n\r\n                        $frame.on('load', function () {\r\n                            var frame = this;\r\n\r\n                            //1st try to connect the api on frame load\r\n                            itemApi.connect(frame);\r\n\r\n                            //if we are  in the same domain, we add a variable\r\n                            //to the frame window, so the frame knows it can communicate\r\n                            //with the parent\r\n                            if (isCORSAllowed === true) {\r\n                                frame.contentWindow.__knownParent__ = true;\r\n                            }\r\n                            //then we can wait a specific event triggered from the item\r\n                            $(document).off('itemready').on('itemready', function () {\r\n                                itemApi.connect(frame);\r\n                                if(frame.contentWindow.__knownParent__) {\r\n                                    frame.contentWindow.document.body.className += ' tao-preview-scope';\r\n\r\n                                    _initCustomButtons();\r\n                                }\r\n                            });\r\n                        });\r\n\r\n                        $('.preview-item-container').append($frame);\r\n\r\n                        $('#finishButton').click(function () {\r\n                            itemApi.finish();\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        return previewItemRunner;\r\n    });\r\n\n","/**\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\r\n *\r\n *\r\n */\r\ndefine('taoItems/controller/runtime/itemRunner',['jquery', 'lodash', 'iframeNotifier', 'urlParser'],\r\n    function($, _, iframeNotifier, UrlParser){\r\n        'use strict';\r\n\r\n        var itemRunner = {\r\n            start : function(options){\r\n\r\n                var $frame = $('<iframe id=\"item-container\" class=\"toolframe\" frameborder=\"0\" style=\"width:100%;\" scrolling=\"no\"></iframe>');\r\n                $frame.appendTo('body');\r\n                var itemId = options.itemId;\r\n                var itemPath = options.itemPath;\r\n                var resultServer = _.defaults(options.resultServer, {\r\n                    module : 'taoResultServer/ResultServerApi',\r\n                    params : {}\r\n                });\r\n                var itemService = _.defaults(options.itemService, {\r\n                    module : 'taoItems/runtime/ItemServiceImpl',\r\n                    params : {}\r\n                });\r\n                var clientConfigUrl = options.clientConfigUrl;\r\n                var timeout = options.timeout || 30;\r\n\r\n                //load dynamically the right ItemService and ResultServerApi\r\n                require([itemService.module, resultServer.module], function(ItemService, ResultServerApi){\r\n\r\n                    var resultServerApi = new ResultServerApi(resultServer.endpoint, resultServer.params);\r\n\r\n                    var setIframeHeight = function(newHeight) {\r\n\r\n                        var neverResized = $frame.height() === 150;\r\n\r\n                        var resize = function resize(newHeight, notifyParent) {\r\n                            $frame.css({height: newHeight});\r\n                            if(notifyParent) {\r\n                                iframeNotifier.parent('heightchange', newHeight);\r\n                            }\r\n                        };\r\n\r\n                        resize(newHeight || $frame.contents().outerHeight(true), !newHeight);\r\n\r\n                        if(neverResized) {\r\n                            _.delay(function() {\r\n                                resize($frame.contents().outerHeight(true), true);\r\n                            }, 200);\r\n                        }\r\n                    };\r\n\r\n                    window.onServiceApiReady = function(serviceApi){\r\n\r\n                        var itemApi = new ItemService(_.merge({\r\n                            serviceApi : serviceApi,\r\n                            itemId : itemId,\r\n                            resultApi : resultServerApi\r\n                        }, {\r\n                            params : itemService.params\r\n                        }));\r\n\r\n                        var itemUrl = new UrlParser(itemPath);\r\n                        var isCORSAllowed = itemUrl.checkCORS();\r\n                        itemUrl.addParam('clientConfigUrl', clientConfigUrl);\r\n                        itemUrl.addParam('timeout', timeout);\r\n\r\n                        $(document).on('itemloaded', function() {\r\n                            setIframeHeight();\r\n                            iframeNotifier.parent('serviceloaded');\r\n\r\n                            //hot fix\r\n                            _.delay(setIframeHeight, 1600);\r\n\r\n                            $frame.contents().find('img').on('load', _.throttle(function() {\r\n                                setIframeHeight();\r\n                            }, 50));\r\n                        }).on('responsechange', function(e, responseId, response){\r\n                            iframeNotifier.parent('responsechange', [responseId, response]);\r\n                        }).on('stateready', function(e, elmentId, state){\r\n                            iframeNotifier.parent('stateready', [elmentId, state]);\r\n                        }).on('itemready', function() {\r\n                            // item is ready, we can connect.\r\n                            itemApi.connect($frame[0]);\r\n                        }).on('itemcontentchange imageloaded', function() {\r\n                            setIframeHeight();\r\n                        });\r\n\r\n                        $frame.on('load', function(){\r\n                            itemApi.connect($frame[0]);\r\n\r\n                            if (isCORSAllowed === true) {\r\n                                this.contentWindow.__knownParent__ = true;\r\n                            }\r\n\r\n                            $('body').on('setheight', function(event, height) {\r\n                                setIframeHeight(height);\r\n                            });\r\n                        });\r\n                        $frame.attr('src', itemUrl.getUrl());\r\n                    };\r\n\r\n                    //tell the parent he can trigger onServiceApiReady\r\n                    _.defer(function(){\r\n                        iframeNotifier.parent('serviceready');\r\n                    });\r\n                });\r\n            }\r\n        };\r\n\r\n        return itemRunner;\r\n    });\r\n\n","\n(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('body.preview-mode{height:100vh !important;max-height:100vh;overflow:hidden}body.no-preview-feedback .preview-overlay .preview-container{background:white;overflow:auto}body.no-preview-feedback .preview-overlay .preview-container .preview-item-container,body.no-preview-feedback .preview-overlay .preview-container #preview-container{min-height:calc(100vh - 82px) !important}.preview-overlay{display:none;width:100%;height:100%;z-index:19995;position:absolute;left:0;background:rgba(0,0,0,0.7)}.preview-overlay.preview-desktop{overflow:visible}.preview-overlay.preview-desktop .mobile-only,.preview-overlay.preview-desktop .standard-only{display:none !important}.preview-overlay.preview-mobile{overflow:visible}.preview-overlay.preview-mobile .desktop-only,.preview-overlay.preview-mobile .standard-only{display:none !important}.preview-overlay.preview-standard{overflow:visible}.preview-overlay.preview-standard .desktop-only,.preview-overlay.preview-standard .mobile-only{display:none !important}.preview-overlay .preview-scale-container{position:relative;float:left}.preview-overlay .preview-container{background:white;overflow:auto}.preview-overlay .preview-container .preview-item-container,.preview-overlay .preview-container #preview-container{min-height:calc(100vh - 130px) !important}.preview-overlay .preview-container-outer{display:table;padding:0;width:100%;height:100%}.preview-overlay .preview-utility-bar{background:#f3f1ef;border-bottom:1px solid #8d949e;margin-bottom:20px;z-index:9996;overflow:hidden;padding:10px;position:fixed;top:0;left:0;width:100%}.preview-overlay .preview-utility-bar .preview-heading{min-width:140px}.preview-overlay .preview-utility-bar .device-type-and-orientation{min-width:340px}.preview-overlay .preview-utility-bar-inner{max-width:1024px;width:100%;margin:auto}.preview-overlay .preview-utility-bar-inner h1{font-size:18px;font-size:1.8rem;text-shadow:1px 1px 0px #eee}.preview-overlay .preview-utility-bar-inner .icon-info{top:7px;font-size:15px;font-size:1.5rem}.preview-overlay .preview-utility-bar-inner li{margin-left:10px}.preview-overlay .preview-utility-bar-inner .btn-info{margin-top:1px}.preview-overlay .preview-utility-bar-inner .mobile-device-selector{width:200px}.preview-overlay .preview-utility-bar-inner .preview-type-selector{width:140px}.preview-overlay .preview-utility-bar-inner .preview-theme-selector{width:140px}.preview-overlay .preview-utility-bar-inner .orientation-selector,.preview-overlay .preview-utility-bar-inner .desktop-device-selector{width:130px}.preview-overlay .preview-utility-bar-inner [class*=\\\" col-\\\"],.preview-overlay .preview-utility-bar-inner [class^=\\\"col-\\\"]{margin-bottom:0 !important}.preview-overlay #preview-console{margin:0;padding:0;border:none;z-index:auto;background:#266d9c;position:fixed;bottom:0;left:0;width:100%}.preview-overlay #preview-console .preview-console-closer{position:absolute;right:10px;top:10px;cursor:pointer;color:rgba(255,255,255,0.9);display:none;text-shadow:none}.preview-overlay #preview-console .preview-console-closer:hover{color:white}.preview-overlay #preview-console .preview-console-header{max-width:1024px;width:100%;margin:auto;padding:0}.preview-overlay #preview-console .preview-console-header [class*=\\\" col-\\\"],.preview-overlay #preview-console .preview-console-header [class^=\\\"col-\\\"]{margin-bottom:0 !important}.preview-overlay #preview-console .extra-button-action-bar{overflow:visible}.preview-overlay #preview-console .extra-button-action-bar li{margin:0 5px}.preview-overlay #preview-console .extra-button-action-bar li.btn-info{border-color:rgba(255,255,255,0.3)}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group{border:none !important;overflow:visible;padding:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a{float:left;margin:0 2px;padding:0 15px;border:1px solid rgba(255,255,255,0.3);border-radius:0px;display:inline-block;height:inherit}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a:first-of-type{border-top-left-radius:3px;border-bottom-left-radius:3px;margin-left:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a:last-of-type{border-top-right-radius:3px;border-bottom-right-radius:3px;margin-right:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a:hover,.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a.active{border-color:rgba(255,255,255,0.8)}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a .no-label{padding-right:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info:hover,.preview-overlay #preview-console .extra-button-action-bar li.btn-info.active{border-color:rgba(255,255,255,0.8)}.preview-overlay #preview-console .extra-button-action-bar.horizontal-action-bar.bottom-action-bar{overflow:visible}.preview-overlay #preview-console .extra-button-action-bar.horizontal-action-bar.bottom-action-bar .action{line-height:1.6}.preview-overlay #preview-console .preview-console-body{display:none}.preview-overlay #preview-console .preview-console-body ul{padding:5px;margin:0;height:300px;overflow:auto;background:#2b2b2b;font-family:Consolas,\\\"Andale Mono WT\\\",\\\"Andale Mono\\\",\\\"Lucida Console\\\",\\\"Lucida Sans Typewriter\\\",\\\"DejaVu Sans Mono\\\",\\\"Bitstream Vera Sans Mono\\\",\\\"Liberation Mono\\\",\\\"Nimbus Mono L\\\",Monaco,\\\"Courier New\\\",Courier,monospace;color:#fff}.preview-overlay #preview-console .preview-console-body ul .log-time{color:#999}.preview-overlay #preview-console .preview-console-body ul .log-type{color:#eee}.preview-overlay #preview-console .preview-console-body ul .log-message{color:#69f}.preview-overlay #preview-console .preview-console-body ul pre{margin:0}.preview-overlay .preview-message-box .feedback-info{margin:10px auto 0px;width:800px}.preview-overlay .preview-message-box a{float:right;padding-right:10px}.preview-overlay .desktop-preview-container{width:1024px;background:white url(data:image/gif;base64,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) no-repeat center 150px}.preview-overlay .desktop-preview-frame{position:relative;border:3px #aaa solid;border-radius:5px;background:#5a5a5a;background:linear-gradient(135deg, #5a5a5a 0%, #565656 7%, #444 15%, #141414 30%);box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7)}.preview-overlay .desktop-preview-frame.desktop-preview-landscape{padding:30px 30px}.preview-overlay .desktop-preview-frame.desktop-preview-landscape .desktop-device-toolbar{padding-right:30px}.preview-overlay .desktop-preview-frame.desktop-preview-portrait{padding:30px 30px}.preview-overlay .desktop-preview-frame.desktop-preview-portrait .desktop-device-toolbar{padding-right:30px}.preview-overlay .desktop-preview-item-container{min-height:500px;-webkit-box-shadow:0px 0px 8px #b7b1ac;-moz-box-shadow:0px 0px 8px #b7b1ac;box-shadow:0px 0px 8px #b7b1ac}.preview-overlay .preview-canvas{display:table-cell;text-align:center}.preview-overlay .preview-canvas *{text-align:left}.preview-overlay .preview-outer-frame{position:relative;display:inline-block}.preview-overlay .mobile-preview-container{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;position:relative}.preview-overlay .mobile-preview-item-container{height:100%}.preview-overlay .mobile-preview-frame{position:relative;border:3px #aaa ridge;border-radius:25px;background:#5a5a5a;background:linear-gradient(135deg, #5a5a5a 0%, #565656 7%, #444 15%, #141414 30%);box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7)}.preview-overlay .mobile-preview-frame.mobile-preview-landscape{padding:40px 40px}.preview-overlay .mobile-preview-frame.mobile-preview-landscape .mobile-device-toolbar{padding-right:40px}.preview-overlay .mobile-preview-frame.mobile-preview-portrait{padding:40px 40px}.preview-overlay .mobile-preview-frame.mobile-preview-portrait .mobile-device-toolbar{padding-right:40px}.preview-overlay .mobile-preview-container{background:white;border-radius:3px;border:2px solid;border-color:#444 #999 #999 #444}.preview-overlay .standard-preview-frame{box-shadow:0px 0px 8px rgba(0,0,0,0.7)}\\n\\n/*# sourceMappingURL=preview.css.map */');\n"]}
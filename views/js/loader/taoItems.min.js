function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}define("json!taoItems/preview/resources/device-list.json",function(){return{tablets:{"193986c3715c81838870f908fa98d69a":{label:"Amazon Kindle Fire HDX 7\u2033",width:960,height:600},"4e8eafab11aad1486992d7ee2c8c16ca":{label:"Apple iPad",width:1024,height:768},"5aac2932d9ad00d6d8a1604b8f9e4e8d":{label:"Google Nexus 10, Motorola Xoom, Xyboard",width:1280,height:800},"9805d9753ad08c7630a9ee5418aa6c6c":{label:"Google Nexus 7",width:966,height:604},d4a431cedf4705d6bf2cba6d5788378b:{label:"Samsung Galaxy Tab 7.7, 8.9, 10.1",width:1280,height:800}},phones:{"1b89338531ef0155c8d6abc2ac02c81a":{label:"Apple iPhone 3GS",width:320,height:480,scaleFactor:1,dpWidth:320,dpHeight:480},"3f89da99d84214cde7df87ebe0699a6f":{label:"Apple iPhone 4",width:640,height:960,scaleFactor:2,dpWidth:320,dpHeight:1920},"0d36971a5b98b367f54ced708c9af849":{label:"Apple iPhone 5",width:640,height:1136,scaleFactor:2,dpWidth:320,dpHeight:2272},"026beffcc051af995660ebdede986ace":{label:"BlackBerry Z10",width:768,height:1280,scaleFactor:2,dpWidth:384,dpHeight:2560},fd2dd53e667d6d49e4fa73356fa941dd:{label:"BlackBerry Z30",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"707584c1ae17d9b5b2cbe8603c91c147":{label:"Google Nexus 4",width:768,height:1280,scaleFactor:2,dpWidth:384,dpHeight:2560},"91823264de952e7f2347e07db5c4058b":{label:"Google Nexus 5",width:1080,height:1920,scaleFactor:3,dpWidth:360,dpHeight:5760},cd69817a6e147e8a4677389e56fcf568:{label:"Google Nexus S",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"75994faa6a38e31e99b53fcd75534a33":{label:"HTC Evo, Touch HD, Desire HD, Desire",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"0cab4dfccdfc880687cb608cfe4159db":{label:"HTC One X, EVO LTE",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},c4ff41fcba24d74fc21dc3490ca1edc9:{label:"HTC Sensation, Evo 3D",width:540,height:960,scaleFactor:1.5,dpWidth:360,dpHeight:1440},fa969a5e0dd2de53700eeee4ba4ba142:{label:"LG Optimus 2X, Optimus 3D, Optimus Black",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"33c4f9364e295ec03531f3a3425819cf":{label:"LG Optimus G",width:768,height:1280,scaleFactor:2,dpWidth:384,dpHeight:2560},bc47f5275f0efd56fee52d43a8082981:{label:"LG Optimus LTE, Optimus 4X HD",width:720,height:1280,scaleFactor:1.7,dpWidth:424,dpHeight:2176},"0732887e6e324fd10777b735520a34cf":{label:"LG Optimus One",width:320,height:480,scaleFactor:1.5,dpWidth:213,dpHeight:720},"2e38a78364f09d0da0e9e1a3a68e7fb0":{label:"Motorola Defy, Droid, Droid X, Milestone",width:480,height:854,scaleFactor:1.5,dpWidth:320,dpHeight:1281},bd4b78dddc7c9625a4141a1b1ddabb87:{label:"Motorola Droid 3, Droid 4, Droid Razr, Atrix 4G, Atrix 2",width:540,height:960,scaleFactor:1,dpWidth:540,dpHeight:960},"3bf1edf21cfa81006183d2b02974c84e":{label:"Motorola Droid Razr HD",width:720,height:1280,scaleFactor:1,dpWidth:720,dpHeight:1280},ab5a352e0e016b97dac986f06c394f55:{label:"Nokia C5, C6, C7, N97, N8, X7",width:360,height:640,scaleFactor:1,dpWidth:360,dpHeight:640},"4826fb7d7257aeaac992ce699df41b3c":{label:"Nokia Lumia 7X0, Lumia 8XX, Lumia 900, N800, N810, N900",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"0a691ab20add7c432200f8fa6527b488":{label:"Samsung Galaxy Note",width:800,height:1280,scaleFactor:2,dpWidth:400,dpHeight:2560},"9c23ee31be29960fbac9e9bbfc2fc7b0":{label:"Samsung Galaxy Note 3",width:1080,height:1920,scaleFactor:2,dpWidth:540,dpHeight:3840},"92177c0508c1d73905a58e2338f2a81f":{label:"Samsung Galaxy Note II",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"5222b8866dc4cc606725e16ffcc0a783":{label:"Samsung Galaxy S III, Galaxy Nexus",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"37c1541e2bd55cfd0f4073b0ccdf68b3":{label:"Samsung Galaxy S, S II, W",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"2f7f64b7dda0144907ff300e83eed465":{label:"Samsung Galaxy S4",width:1080,height:1920,scaleFactor:3,dpWidth:360,dpHeight:5760},"9c24f9057744dad56043702a9703127f":{label:"Sony Xperia S, Ion",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"0a8b2732a016a9395c3af5f12dd9c0da":{label:"Sony Xperia Sola, U",width:480,height:854,scaleFactor:1,dpWidth:480,dpHeight:854},"5a153d7f53d82dcb0801f041574a6a43":{label:"Sony Xperia Z, Z1",width:1080,height:1920,scaleFactor:3,dpWidth:360,dpHeight:5760}},screens:{"9e523ae15b61dc766f5c818726881ecf":{label:"1920 \xD7 1080",width:1920,height:1080,dpWidth:1920,dpHeight:1080,scaleFactor:1},"07769cd8d0a7d09818b2f0b018042fb7":{label:"1366 \xD7 768",width:1366,height:768,dpWidth:1366,dpHeight:768,scaleFactor:1},"72d5478a24194f98b9378e8e0fd65737":{label:"1280 \xD7 1024",width:1280,height:1024,dpWidth:1280,dpHeight:1024,scaleFactor:1},b7a6dd5900cc72e61f0d3479c7e314ec:{label:"1280 \xD7 800",width:1280,height:800,dpWidth:1280,dpHeight:800,scaleFactor:1},"43193b0ff671a37d8232ab664190a125":{label:"1024 \xD7 768",width:1024,height:768,dpWidth:1024,dpHeight:768,scaleFactor:1},c29e48814af5443ff5688d9e967ce917:{label:"800 \xD7 600",width:800,height:600,dpWidth:800,dpHeight:600,scaleFactor:1}}}}),define("tpl!taoItems/preview/tpl/preview",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="\n                        <option value=\"",(helper=helpers.value)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.value,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.selected,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</option>\n                        ",buffer}function program2(){return"selected=\"selected\""}function program4(depth0,data){var stack1,buffer="";return buffer+="\n                    <select class=\"preview-theme-selector\">\n                        ",stack1=helpers.each.call(depth0,depth0&&depth0.themes,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                    </select>\n                    ",buffer}function program6(depth0,data){var stack1,helper,buffer="";return buffer+="\n                        <option value=\"",(helper=helpers.value)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.value,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-value=\"",(helper=helpers.dataValue)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.dataValue,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.selected,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</option>\n                        ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;return buffer+="<div class=\"preview-overlay tao-scope overlay preview-",(helper=helpers.previewType)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.previewType,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" item-no-print\"\n     style=\"display:none\">\n    <div class=\"preview-container-outer\">\n        <form class=\"preview-utility-bar plain\">\n            <div class=\"preview-utility-bar-inner grid-row\">\n\n                <div class=\"col-4\">\n                    <input type=\"hidden\" value=\"\" data-value=\"\" class=\"standard-device-selector preview-device-selector\" data-target=\"standard\">\n                    <select class=\"preview-type-selector\">\n                        ",stack1=helpers.each.call(depth0,depth0&&depth0.previewTypes,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                    </select>\n                    ",stack1=helpers["if"].call(depth0,depth0&&depth0.hasThemes,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                </div>\n                <div class=\"col-6 standard-only device-type-and-orientation\"></div>\n                <div class=\"col-6 desktop-only device-type-and-orientation\">\n                    <select class=\"desktop-device-selector preview-device-selector\" data-target=\"desktop\">\n                        ",stack1=helpers.each.call(depth0,depth0&&depth0.desktopDevices,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                    </select>\n                </div>\n                <div class=\"col-6 mobile-only device-type-and-orientation\">\n                    <select class=\"mobile-device-selector preview-device-selector\" data-target=\"mobile\">\n                        ",stack1=helpers.each.call(depth0,depth0&&depth0.mobileDevices,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                    </select>\n                    <select tabindex=\"-1\" class=\"mobile-orientation-selector orientation-selector\"\n                            data-target=\"mobile\">\n                        <option value=\"landscape\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Landscape",options):helperMissing.call(depth0,"__","Landscape",options)))+"</option>\n                        <option value=\"portrait\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Portrait",options):helperMissing.call(depth0,"__","Portrait",options)))+"</option>\n                    </select>\n                </div>\n                <div class=\"col-2\">\n                    <span class=\"btn-info small preview-closer rgt\">\n                        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Close",options):helperMissing.call(depth0,"__","Close",options)))+"\n                        <span class=\"icon-close r\"></span>\n                    </span>\n                </div>\n            </div>\n            <div class=\"preview-message-box\">\n                <div class=\"feedback-info small\">\n                    <span class=\"icon-info\"></span>\n                    "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"This preview may be scaled to fit your screen. The final rendering may differ.",options):helperMissing.call(depth0,"__","This preview may be scaled to fit your screen. The final rendering may differ.",options)))+"\n                    <a href=\"#\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Don\u2019t show this again!",options):helperMissing.call(depth0,"__","Don\u2019t show this again!",options)))+"</a>\n                    <span title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Remove this message",options):helperMissing.call(depth0,"__","Remove this message",options)))+"\" class=\"icon-close close-trigger\"></span>\n                </div>\n            </div>\n        </form>\n        <div class=\"preview-canvas\">\n            <div class=\"preview-scale-container\">\n                <div class=\"",(helper=helpers.previewType)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.previewType,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"-preview-frame preview-outer-frame ",(helper=helpers.previewType)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.previewType,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"-preview-landscape\">\n                    <div class=\"",(helper=helpers.previewType)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.previewType,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"-preview-container preview-container\">\n                        <div class=\"preview-item-container\"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <div id=\"preview-console\">\n        <span class=\"icon-close preview-console-closer\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Close console",options):helperMissing.call(depth0,"__","Close console",options)))+"\"></span>\n        <div class=\"preview-console-header grid-row clearfix\">\n            <ul class=\"col-10 plain action-bar extra-button-action-bar horizontal-action-bar\">\n            </ul>\n            <ul class=\"col-2 plain action-bar console-button-action-bar horizontal-action-bar\">\n                <li class=\"small btn-info action action-button rgt\" id=\"preview-submit-button\">\n                    <a class=\"li-inner\" href=\"#\">\n                        <span class=\"label\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Submit",options):helperMissing.call(depth0,"__","Submit",options)))+"</span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n        <div class=\"preview-console-body clear\">\n            <ul></ul>\n        </div>\n    </div>\n</div>",buffer})}),define("css!taoItemsCss/preview",[],function(){}),define("taoItems/preview/preview",["jquery","lodash","i18n","util/strPad","core/promise","json!taoItems/preview/resources/device-list.json","tpl!taoItems/preview/tpl/preview","ui/themes","ui/themeLoader","util/urlParser","ui/modal","select2","jquery.cookie","css!taoItemsCss/preview"],function($,_,__,strPad,Promise,deviceList,previewTpl,themeHandler,themeLoader,UrlParser){'use strict';function _setupScreenSize(){screenSize={width:$(".preview-overlay").innerWidth(),height:$(".preview-overlay").innerHeight()}}var overlay,typeDependant,$feedbackBox,$console,itemUri,state,orientation="landscape",previewType="standard",previewTypes={desktop:__("Desktop preview"),mobile:__("Mobile preview"),standard:__("Actual size")},themeObj=themeHandler.get("items")||{},$doc=$(document),$window=$(window),$body=$(document.body),screenSize={width:$window.innerWidth(),height:$window.innerHeight()},sizeSettings={width:0,height:0},scaleFactor=1,winScrollObj={x:0,y:0},_getDeviceSelectorData=function(type){var devices="mobile"===type?deviceList.tablets:deviceList.screens,options=[];return _.forEach(devices,function(value){options.push({value:value.label,label:value.label,dataValue:[value.width,value.height].join(","),selected:previewType===value.label})}),options},_setupTypeDependantElements=function(){typeDependant=overlay.add(overlay.find(".preview-scale-container").find("[class*=\""+previewType+"\"]"))},_setPreviewType=function(newType){var re;newType===previewType||(re=new RegExp(previewType,"g"),typeDependant.each(function(i,el){el.className=el.className.replace(re,newType)}),previewType=newType)},_setOrientation=function(newOrientation){var re,previewFrame;newOrientation===orientation||(re=new RegExp(orientation,"g"),previewFrame=$(".preview-outer-frame")[0],previewFrame.className=previewFrame.className.replace(re,newOrientation),orientation=newOrientation)},_scale=function(){_computeScaleFactor();var $scaleContainer=$(".preview-scale-container"),_scaleFactor="standard"===previewType?1:scaleFactor,containerScaledWidth=$scaleContainer.width()*_scaleFactor,left=(screenSize.width-containerScaledWidth)/2;$scaleContainer.css({left:0<left?left:0,"-webkit-transform":"scale("+_scaleFactor+","+_scaleFactor+")","-ms-transform":"scale("+_scaleFactor+","+_scaleFactor+")",transform:"scale("+_scaleFactor+","+_scaleFactor+")","-webkit-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0"})},_positionPreview=function(){var topBarHeight=$(".preview-utility-bar").outerHeight();overlay[0].style.top=topBarHeight+"px",overlay[0].style.maxHeight="calc(100vh - "+topBarHeight+"px - "+$console.outerHeight()+"px )"},_computeScaleFactor=function(){var scaleValues={x:1,y:1},requiredSize={width:sizeSettings.width+150,height:sizeSettings.height+275};requiredSize.width>screenSize.width&&(scaleValues.x=screenSize.width/requiredSize.width),requiredSize.height>screenSize.height&&(scaleValues.y=screenSize.height/requiredSize.height),scaleFactor=Math.min(scaleValues.x,scaleValues.y)},_setupDeviceSelectors=function(){var previewDeviceSelectors=overlay.find(".preview-device-selector");previewDeviceSelectors.on("change",function(){for(var elem=$(this),option="select"===this.nodeName.toLowerCase()?this.options[this.selectedIndex]:this,type=elem.data("target"),val=$(option).data("value").split(","),i=val.length,container=overlay.find("."+type+"-preview-container");i--;)val[i]=parseFloat(val[i]);return sizeSettings="mobile"===type&&"portrait"===orientation?{width:val[1],height:val[0]}:{width:val[0],height:val[1]},(sizeSettings.width!==container.width()||sizeSettings.height!==container.height())&&void(_setPreviewType(type),container.css(sizeSettings),_scale())}),previewDeviceSelectors.each(function(){"select"===this.nodeName.toLowerCase()&&$(this).select2({minimumResultsForSearch:-1})})},_setupOrientationSelectors=function(){$("select.orientation-selector").on("change",function(){var type=$(this).data("target"),previewFrame=$("."+type+"-preview-frame"),container=previewFrame.find("."+type+"-preview-container"),newOrientation=$(this).val();return newOrientation!==orientation&&void(sizeSettings={height:container.width(),width:container.height()},container.css(sizeSettings),_setOrientation(newOrientation),_scale())}).select2({minimumResultsForSearch:-1})},_setupClosers=function(){var $closer=overlay.find(".preview-closer"),$feedbackCloser=$feedbackBox.find(".close-trigger"),$hideForever=$feedbackBox.find("a"),$iframe=$("#preview-iframe");$closer.on("click",function(){$doc.trigger("itemunload.preview"),window.scrollTo(winScrollObj.x,winScrollObj.y),overlay.hide(),$body.removeClass("preview-mode"),$iframe.off("load").attr("src","about:blank"),$(".preview-container").remove()}),$doc.keyup(function(e){27===e.keyCode&&$closer.trigger("click")}),$feedbackCloser.on("click",function(){$feedbackBox.hide(),$body.addClass("no-preview-feedback"),_positionPreview(),_scale()}),$hideForever.on("click",function(e){e.preventDefault(),$.cookie("hidePreviewFeedback",!0,{expires:1e3,path:"/"}),$feedbackCloser.trigger("click")})},_getThemes=function(){var activeTheme,options=[];return _.isPlainObject(themeObj)&&!_.isEmpty(themeObj.base)&&(activeTheme=themeLoader(themeObj).getActiveTheme(),_(themeObj.available).forEach(function(data){options.push({value:data.id,label:data.name,selected:data.id===activeTheme})})),options},_getPreviewTypes=function(){var options=[];return _(previewTypes).forEach(function(_previewLabel,_previewType){options.push({value:_previewType,label:_previewLabel,selected:previewType===_previewType})}),options},_setupViewSelector=function(){$("select.preview-type-selector").on("change",function(){var _previewType=$(this),value=_previewType.val();_setPreviewType(value),$("."+value+"-device-selector").trigger("change")}).select2({minimumResultsForSearch:-1})},_setupThemeSelector=function(){$("select.preview-theme-selector").on("change",function(){var iframe=document.getElementById("preview-container"),iframeDoc=iframe.contentWindow||iframe.contentDocument;iframeDoc.$(".qti-item").trigger("themechange",[$(this).val()])}).select2({minimumResultsForSearch:-1})},_updateStandardPreviewSize=function(height){var $selector=$(".standard-device-selector"),values=($selector.val()?$selector.val().split(","):"")||[$window.width().toString()],valueStr=values.join(",");values[1]=height||values[1]||"1200",$selector.val(valueStr).data("value",valueStr)},_initConsole=function(){var $body=$console.find(".preview-console-body"),$listing=$body.find("ul"),$closer=$console.find(".preview-console-closer");$console.off("updateConsole").on("updateConsole",function(event,type,message){var timer=new Date,logTime=[strPad(timer.getHours(),2,"0","STR_PAD_LEFT"),strPad(timer.getMinutes(),2,"0","STR_PAD_LEFT"),strPad(timer.getSeconds(),2,"0","STR_PAD_LEFT")].join(":"),msgStr="<span class=\"log-time\">"+strPad(logTime,12," ")+"</span> <span class=\"log-type\">"+strPad(type,18," ")+"</span> <span class=\"log-message\">"+strPad(message,18," ")+"</span>";$listing.append("<li><pre>"+msgStr+"</pre></li>"),$body.is(":visible")?$listing.scrollTop(1e4):$body.slideDown("slow",function(){$closer.show(),$listing.scrollTop(1e4)})}),$closer.on("click",function(){$body.slideUp("slow",function(){$closer.hide()})})},init=function(_itemUri,_state){if(!_itemUri||0===_itemUri.length)throw new TypeError("Wrong URI");return $(".preview-overlay").remove(),overlay=$(previewTpl({mobileDevices:_getDeviceSelectorData("mobile"),desktopDevices:_getDeviceSelectorData("desktop"),previewTypes:_getPreviewTypes(),previewType:previewType,themes:_getThemes(),hasThemes:1<_.size(themeObj.available)})),$body.append(overlay),$feedbackBox=overlay.find(".preview-message-box"),$.cookie("hidePreviewFeedback")&&($feedbackBox.hide(),$body.addClass("no-preview-feedback")),$console=overlay.find("#preview-console"),_initConsole(),_updateStandardPreviewSize(),_setupTypeDependantElements(),_setupDeviceSelectors(),_setupOrientationSelectors(),_setupViewSelector(),_setupThemeSelector(),_setupClosers(),_setupScreenSize(),_computeScaleFactor(),_setPreviewType(previewType),_setOrientation(orientation),$window.on("resize orientationchange",function(){_setupScreenSize(),_updateStandardPreviewSize(),_computeScaleFactor(),_scale()}),itemUri=_itemUri,state=_state,overlay};return{init:init,show:function show(){return new Promise(function(resolve,reject){var parsed=new UrlParser(itemUri);parsed.params.state=JSON.stringify(state),$.ajax({url:itemUri,dataType:"html",method:"POST",data:parsed.params}).done(function(data){winScrollObj={x:window.scrollX,y:window.scrollY},window.scrollTo(0,0),$body.addClass("preview-mode"),overlay[0].style.display="block",overlay.find("select:visible").not(".preview-theme-selector").trigger("change"),_scale(),_positionPreview(),$(".preview-item-container").html(data),resolve()}).fail(function(xhr){reject(new Error(__("Unable to render the item from %s : %s %s",itemUri,xhr.status,xhr.statusText)))})})}}}),define("taoItems/previewer/adapter/legacy",["util/url","taoItems/preview/preview"],function(urlHelper,preview){'use strict';return{name:"legacy",init:function(uri,state){return"object"===_typeof(uri)&&uri.uri&&(uri=uri.uri),window.scrollTo(0,0),preview.init(urlHelper.route("forwardMe","ItemPreview","taoItems",{uri:uri}),state),preview.show(),preview}}}),define("taoItems/previewer/factory",["lodash","context","module","core/providerLoader","core/providerRegistry","taoItems/previewer/adapter/legacy"],function(_,context,module,providerLoaderFactory,providerRegistry,legacyPreviewer){'use strict';function previewerFactory(type,uri,state,config){return config=_.defaults(config||{},module.config()),providerLoaderFactory().addList(config.previewers).load(context.bundle).then(function(providers){previewerFactory.registerProvider(legacyPreviewer.name,legacyPreviewer),_.forEach(providers,function(provider){previewerFactory.registerProvider(provider.name,provider)})}).then(function(){return previewerFactory.getProvider(type||legacyPreviewer.name)}).then(function(provider){return provider.init(uri,state,config)})}return providerRegistry(previewerFactory,function(provider){if(!_.isFunction(provider.init))throw new TypeError("The previewer provider MUST have a init() method");return!0})}),define("tpl!taoItems/controller/items/tpl/relatedTestsPopup",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var helper,options;return escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"s",options):helperMissing.call(depth0,"__","s",options)))}function program3(depth0){var stack1,buffer="";return buffer+="<li>"+escapeExpression((stack1=depth0&&depth0.label,"function"===_typeof(stack1)?stack1.apply(depth0):stack1))+"</li>",buffer}function program5(depth0,data){var stack1,helper,options,buffer="";return buffer+="\n<span class=\"gray-others\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"and",options):helperMissing.call(depth0,"__","and",options)))+" ",(helper=helpers.numberOther)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.numberOther,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"other",options):helperMissing.call(depth0,"__","other",options))),stack1=helpers["if"].call(depth0,depth0&&depth0.multipleOthers,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=".</span><br><br>\n",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,self=this;return buffer+="<span class=\"icon icon-warning\"></span> <b>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Warning",options):helperMissing.call(depth0,"__","Warning",options)))+"</b><br><br>\n"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The item",options):helperMissing.call(depth0,"__","The item",options)))+" <b>",(helper=helpers.name)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.name,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</b> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"is currently in use.",options):helperMissing.call(depth0,"__","is currently in use.",options)))+"\n"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Deleting this item will break the",options):helperMissing.call(depth0,"__","Deleting this item will break the",options)))+" <b>",(helper=helpers.number)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.number,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</b> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"test",options):helperMissing.call(depth0,"__","test",options))),stack1=helpers["if"].call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"using it:",options):helperMissing.call(depth0,"__","using it:",options)))+"\n<ul>\n",stack1=helpers.each.call(depth0,depth0&&depth0.tests,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</ul>\n",stack1=helpers["if"].call(depth0,depth0&&depth0.numberOther,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n<b>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Are you sure you want to delete this item?",options):helperMissing.call(depth0,"__","Are you sure you want to delete this item?",options)))+"</b>",buffer})}),define("tpl!taoItems/controller/items/tpl/relatedClassTestsPopup",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var helper,options;return escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"s",options):helperMissing.call(depth0,"__","s",options)))}function program3(depth0){var stack1,buffer="";return buffer+="<li>"+escapeExpression((stack1=depth0&&depth0.label,"function"===_typeof(stack1)?stack1.apply(depth0):stack1))+"</li>",buffer}function program5(depth0,data){var stack1,helper,options,buffer="";return buffer+="\n<span class=\"gray-others\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"and",options):helperMissing.call(depth0,"__","and",options)))+" ",(helper=helpers.numberOther)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.numberOther,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"other",options):helperMissing.call(depth0,"__","other",options))),stack1=helpers["if"].call(depth0,depth0&&depth0.multipleOthers,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=".</span><br><br>\n",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,self=this;return buffer+="<span class=\"icon icon-warning\"></span> <b>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Warning",options):helperMissing.call(depth0,"__","Warning",options)))+"</b><br><br>\n"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The class",options):helperMissing.call(depth0,"__","The class",options)))+" <b>",(helper=helpers.name)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.name,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</b> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"contains content that is currently in use.",options):helperMissing.call(depth0,"__","contains content that is currently in use.",options)))+"\n"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Deleting this class will break the",options):helperMissing.call(depth0,"__","Deleting this class will break the",options)))+" <b>",(helper=helpers.number)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.number,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</b> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"test",options):helperMissing.call(depth0,"__","test",options))),stack1=helpers["if"].call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"using it:",options):helperMissing.call(depth0,"__","using it:",options)))+"\n<ul>\n",stack1=helpers.each.call(depth0,depth0&&depth0.tests,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</ul>\n",stack1=helpers["if"].call(depth0,depth0&&depth0.numberOther,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n<b>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Are you sure you want to delete this class and all of its content?",options):helperMissing.call(depth0,"__","Are you sure you want to delete this class and all of its content?",options)))+"</b>",buffer})}),define("tpl!taoItems/controller/items/tpl/forbiddenClassAction",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+="<b>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Forbidden action",options):helperMissing.call(depth0,"__","Forbidden action",options)))+"</b><br><br>\n"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The class",options):helperMissing.call(depth0,"__","The class",options)))+" <b>",(helper=helpers.name)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.name,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</b> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"you are trying to delete is too large and contains too many subclasses.",options):helperMissing.call(depth0,"__","you are trying to delete is too large and contains too many subclasses.",options)))+"<br>\n"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Please delete the subclasses before.",options):helperMissing.call(depth0,"__","Please delete the subclasses before.",options))),buffer})}),define("css!taoItems/controller/items/css/relatedTestsPopup",[],function(){}),define("taoItems/controller/items/action",["lodash","jquery","i18n","module","layout/actions/binder","taoItems/previewer/factory","core/request","ui/feedback","ui/dialog/confirm","ui/dialog/alert","ui/dialog/confirmDelete","util/url","uri","util/wrapLongWords","tpl!taoItems/controller/items/tpl/relatedTestsPopup","tpl!taoItems/controller/items/tpl/relatedClassTestsPopup","tpl!taoItems/controller/items/tpl/forbiddenClassAction","css!taoItems/controller/items/css/relatedTestsPopup.css"],function(_,$,__,module,binder,previewerFactory,request,feedback,confirmDialog,alertDialog,confirmDeleteDialog,urlUtil,uri,wrapLongWords,relatedTestsPopupTpl,relatedClassTestsPopupTpl,forbiddenClassActionTpl){'use strict';function checkRelations(data){return request({url:urlUtil.route("index","ResourceRelations","tao"),data:data,method:"GET",noToken:!0})}function accept(actionContext,url,resolve,reject){return request({url:url,method:"POST",data:{uri:uri.decode(actionContext.uri),classUri:actionContext.classUri,id:actionContext.id,signature:actionContext.signature},dataType:"json"}).then(function(response){return response.success&&response.deleted?(feedback().success(response.message||__("Resource deleted")),actionContext.tree&&$(actionContext.tree).trigger("removenode.taotree",[{id:actionContext.uri||actionContext.classUri}]),resolve({uri:actionContext.uri||actionContext.classUri})):void(response.success&&!response.deleted&&($(actionContext.tree).trigger("refresh.taotree"),reject(response.msg||response.message||__("Unable to delete the selected resource because you do not have the required rights to delete part of its content."))),reject(response.msg||response.message||__("Unable to delete the selected resource")))})}function cancel(reject){reject({cancel:!0})}function prepareName(name){return 50>name.length?name:wrapLongWords(name,50)}binder.register("itemPreview",function(actionContext){var defaultConfig={provider:"qtiItem",state:{},uri:actionContext.id},config=_.merge(defaultConfig,module.config());previewerFactory(config.provider,config.uri,config.state,{readOnly:!1,fullPage:!0})}),binder.register("deleteItem",function(actionContext){var _this=this;return new Promise(function(resolve,reject){checkRelations({sourceId:actionContext.id,type:"item"}).then(function(responseRelated){var relatedTests=responseRelated.data.relations,name=prepareName($("a.clicked",actionContext.tree).text().trim());0===relatedTests.length?confirmDialog(__("Are you sure you want to delete the item %s?","<b>".concat(name,"</b>")),function(){return accept(actionContext,_this.url,resolve,reject)},function(){return cancel(reject)}):confirmDeleteDialog(relatedTestsPopupTpl({name:name,number:relatedTests.length,numberOther:0<relatedTests.length-3?relatedTests.length-3:0,tests:3>=relatedTests.length?relatedTests:relatedTests.slice(0,3),multiple:1<relatedTests.length,multipleOthers:1<relatedTests.length-3}),function(){return accept(actionContext,_this.url,resolve,reject)},function(){return cancel(reject)})})})}),binder.register("deleteItemClass",function(actionContext){var _this2=this;return new Promise(function(resolve,reject){checkRelations({classId:actionContext.id,type:"item"}).then(function(responseRelated){var relatedTests=responseRelated.data.relations,name=prepareName($("a.clicked",actionContext.tree).text().trim());0===relatedTests.length?confirmDeleteDialog(__("Are you sure you want to delete the class %s and all of its content?","<b>".concat(name,"</b>")),function(){return accept(actionContext,_this2.url,resolve,reject)},function(){return cancel(reject)}):confirmDeleteDialog(relatedClassTestsPopupTpl({name:name,number:relatedTests.length,numberOther:0<relatedTests.length-3?relatedTests.length-3:0,tests:3>=relatedTests.length?relatedTests:relatedTests.slice(0,3),multiple:1<relatedTests.length,multipleOthers:1<relatedTests.length-3}),function(){return accept(actionContext,_this2.url,resolve,reject)},function(){return cancel(reject)})}).catch(function(errorObject){999===errorObject.response.code&&alertDialog(forbiddenClassActionTpl(),function(){return cancel(reject)})})})})}),define("taoItems/controller/items/edit",["jquery","i18n","module","layout/actions","ui/lock","layout/section"],function($,__,module,actions,lock,section){'use strict';return{start:function start(){var config=module.config(),previewAction=actions.getBy("item-preview"),authoringAction=actions.getBy("item-authoring");previewAction&&(previewAction.state.disabled=!config.isPreviewEnabled),authoringAction&&(authoringAction.state.disabled=!config.isAuthoringEnabled),actions.updateState(),$("#lock-box").each(function(){lock($(this)).register()}),section.off("show").on("show",function(sectionContext){"manage_items"===sectionContext.id&&actions.exec("item-properties")})}}}),define("tpl!taoItems/component/category/switch",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",escapeExpression=this.escapeExpression;return buffer+="<a href=\"#\" data-id=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" class=\"category-auto-adder\"><span class=\"icon-tag\"></span></a>",buffer})}),define("taoItems/component/category/switch",["lodash","i18n","ui/component","tpl!taoItems/component/category/switch"],function(_,__,component,switchTpl){'use strict';var titles={expose:__("Expose the property value to create automated categories."),unexpose:__("The property is exposed to category addition.&#13Remove exposition ?")};return function($container,propertyId,exposed){var categorySwitchComponent;if(!propertyId)throw new TypeError("We need the property id");return categorySwitchComponent=component({setExposed:function(value){return this.is("disabled")||(this.setState("exposed",!!value),this.is("rendered")&&(value?this.getElement().removeClass("placeholder").addClass("txt-success").attr("title",titles.unexpose):this.getElement().removeClass("txt-success").addClass("placeholder").attr("title",titles.expose))),this},isExposed:function(){return this.is("exposed")}},{}).on("init",function(){this.setState("exposed",exposed),this.render($container)}).on("render",function(){var self=this,$component=this.getElement();this.setExposed(exposed),$component.off("click").on("click",function(e){e.preventDefault(),self.is("disabled")||self.trigger("requestChange",self.config.id,!self.is("exposed"))})}),_.defer(function(){categorySwitchComponent.setTemplate(switchTpl).init({id:propertyId})}),categorySwitchComponent}}),define("taoItems/provider/category",["lodash","i18n","util/url","core/dataProvider/request","core/promise"],function(_,__,url,request,Promise){'use strict';var defaultConfig={getExposedsByClass:{url:url.route("getExposedsByClass","Category","taoItems")},setExposed:{url:url.route("setExposed","Category","taoItems")}};return function(config){return config=_.defaults(config||{},defaultConfig),{getExposedsByClass:function(id){return new Promise(function(resolve,reject){return _.isEmpty(id)?reject(new TypeError("The class URI must be provided in the id parameter")):resolve(request(config.getExposedsByClass.url,{id:id}))})},setExposed:function(id,exposed){return new Promise(function(resolve,reject){return _.isEmpty(id)?reject(new TypeError("The property URI must be provided in the id parameter")):_.isBoolean(exposed)?resolve(request(config.setExposed.url,{id:id,exposed:exposed})):reject(new TypeError("The exposed value is required."))})}}}}),define("taoItems/controller/items/editItemClass",["jquery","lodash","uri","taoItems/component/category/switch","taoItems/provider/category","ui/feedback"],function($,_,uriUtil,categorySwitch,categoryProvider,feedback){'use strict';var provider=categoryProvider(),injectButtonPlaceholder=function(uri){var $placeholder,$propertyToolbar,$editButton,$propContainer=$("#property_"+uriUtil.encode(uri));return $propContainer.length&&$propContainer.hasClass("regular-property")&&($placeholder=$("<span>"),$propertyToolbar=$(".property-heading-toolbar",$propContainer),$editButton=$(".icon-edit",$propertyToolbar),$editButton.length?$placeholder.insertAfter($editButton):$propertyToolbar.append($placeholder)),$placeholder},handleError=function(err){feedback().error(err.message)},addCategorySwitch=function($container,propertyUri,exposed){return categorySwitch($container,propertyUri,exposed).on("requestChange",function(propUri,value){var self=this;this.setState("disabled",!0),provider.setExposed(propUri,value).then(function(success){self.setState("disabled",!1),success&&self.setExposed(value)}).catch(handleError)})};return{start:function(){var classUri=$("#id").val();provider.getExposedsByClass(classUri).then(function(results){_.forEach(results,function(exposed,uri){var $container=injectButtonPlaceholder(uri);$container&&$container.length&&addCategorySwitch($container,uri,exposed)})}).catch(handleError)}}}),define("taoItems/controller/routes",[],function(){'use strict';return{Items:{deps:"controller/items/action",actions:{editItem:"controller/items/edit",editItemClass:"controller/items/editItemClass"}}}}),define("taoItems/assets/manager",["lodash","util/url"],function(_,urlUtil){'use strict';function _interopDefaultLegacy(e){return e&&"object"===_typeof(e)&&"default"in e?e:{default:e}}var ___default=_interopDefaultLegacy(_),urlUtil__default=_interopDefaultLegacy(urlUtil),checkStrategy=function(strategy){if(!___default["default"].isPlainObject(strategy)||!___default["default"].isFunction(strategy.handle)||!___default["default"].isString(strategy.name))throw new TypeError("An asset resolution strategy is an object with a handle method and a name")};return function(strategies,data,options){var assetManager,cache={};return strategies=___default["default"].isArray(strategies)?strategies:[strategies],data=data||{},options=___default["default"].defaults(options||{},{parseUrl:!0}),assetManager={_strategies:[],addStrategy:function(strategy){checkStrategy(strategy),this._strategies.push(strategy)},prependStrategy:function(strategy){checkStrategy(strategy),this._strategies.unshift(strategy)},setStrategies:function(newStrategies){var self=this;this._strategies=[],___default["default"].forEach(newStrategies,function(strategy){___default["default"].isPlainObject(strategy)?assetManager.addStrategy(strategy):___default["default"].isFunction(strategy)&&self.addStrategy({name:"strategy_".concat(self._strategies.length+1),handle:strategy})})},setData:function(key,value){___default["default"].isString(key)&&"undefined"!=typeof value?data[key]=value:___default["default"].isPlainObject(key)&&(data=key)},getData:function(key){return ___default["default"].isString(key)?data[key]:data},resolve:function(url){var resolved,inputUrl;return options.cache&&"undefined"!=typeof cache[url]?cache[url]:(inputUrl=options.parseUrl?urlUtil__default["default"].parse(url):url,___default["default"].forEach(this._strategies,function(strategy){var result=strategy.handle(inputUrl,data);if(result)return resolved=result,!1}),resolved=resolved||"",options.cache&&(cache[url]=resolved),resolved)},resolveBy:function(name,url){var inputUrl,resolved="",strategy=___default["default"].find(this._strategies,{name:name});return strategy&&(inputUrl=options.parseUrl?urlUtil__default["default"].parse(url):url,resolved=strategy.handle(inputUrl,data)),resolved},clearCache:function(){options.cache&&(cache={})}},assetManager.setStrategies(strategies),assetManager}}),define("taoItems/assets/strategies",["util/url","lodash"],function(urlUtil,_){'use strict';function _interopDefaultLegacy(e){return e&&"object"===_typeof(e)&&"default"in e?e:{default:e}}var urlUtil__default=_interopDefaultLegacy(urlUtil),___default=_interopDefaultLegacy(_),prependToUrl=function(url,base,slashcat){return!0===slashcat?"".concat(base.replace(/\/$/,""),"/").concat(url.directory.replace(/^\.\//,"").replace(/^\//,"")).concat(encodeURIComponent(url.file.replace(/^\.\//,"").replace(/^\//,""))):base+url.directory.replace(/^\.?\//,"")+encodeURIComponent(url.file.replace(/^\.?\//,""))};return{packedUrl:{name:"packedUrl",handle:function(url,data){var type;if(!___default["default"].isUndefined(url.source)&&!___default["default"].isUndefined(data.assets)&&(type=___default["default"].findKey(data.assets,url.source),type&&urlUtil__default["default"].isAbsolute(data.assets[type][url.source])))return data.assets[type][url.source]}},baseUrl:{name:"baseUrl",handle:function(url,data){if("string"==typeof data.baseUrl&&urlUtil__default["default"].isRelative(url))return prependToUrl(url,data.baseUrl,data.slashcat)}},itemCssNoCache:{name:"itemCssNoCache",handle:function(url,data){if("string"==typeof data.baseUrl&&urlUtil__default["default"].isRelative(url)&&/\.css$/.test(url.file))return urlUtil__default["default"].build(prependToUrl(url,data.baseUrl,data.slashcat),{bust:Date.now()})}},external:{name:"external",handle:function(url){if(urlUtil__default["default"].isAbsolute(url))return url.toString()}},base64:{name:"base64",handle:function(url){if(urlUtil__default["default"].isBase64(url))return url.toString()}},taomedia:{name:"taomedia",handle:function(url,data){var baseUrl=data.baseUrl||"./";if("object"===_typeof(url)&&"taomedia"===url.protocol||/^taomedia:\/\//.test(url.toString()))return baseUrl+url.toString()}}}}),define("taoItems/preview/actionBarHook",["jquery","lodash","core/errorHandler","core/promise"],function($,_,errorHandler,Promise){'use strict';function isValidConfig(toolconfig){return!!(_.isObject(toolconfig)&&toolconfig.hook)}function triggerItemLoaded(tool){tool&&tool.itemLoaded&&tool.itemLoaded()}function initExtraButtons($toolContainer,id,toolconfig){return _.isString(toolconfig)&&(toolconfig={hook:toolconfig}),tools[id]=null,$toolContainers=$toolContainers.add($toolContainer),new Promise(function(resolve){isValidConfig(toolconfig)?require([toolconfig.hook],function(hook){var $button,$existingBtn;isValidHook(hook)?(hook.init(id,toolconfig),$existingBtn=$toolContainer.children("[data-control=\""+id+"\"]"),$existingBtn.length&&(hook.clear($existingBtn),$existingBtn.remove()),tools[id]=hook,$button=hook.render(),_appendInOrder($toolContainer,$button),$button.trigger("ready.previewActionBarHook",[hook]),triggerItemLoaded(hook),resolve(hook)):(errorHandler.throw(".previewActionBarHook","invalid hook format"),resolve(null))},function(){errorHandler.throw(".previewActionBarHook","the hook amd module cannot be found"),resolve(null)}):(errorHandler.throw(".previewActionBarHook","invalid tool config format"),resolve(null))})}function _appendInOrder($container,$button){var $after,$before,order=$button.data("order");"last"===order?$container.append($button):"first"===order?$container.prepend($button):(order=_.parseInt(order),_.isNaN(order)?$container.append($button):($container.children(".action").each(function(){var $btn=$(this),_order=$btn.data("order");if("last"===_order)$before=$btn,$after=null;else if("first"===_order)$before=null,$after=$btn;else{if(_order=_.parseInt(_order),_.isNaN(_order)||_order>order)return $before=$btn,$after=null,!1;_order===order?$after=$btn:_order<order&&($after=$btn,$before=null)}}),$after?$after.after($button):$before?$before.before($button):$container.append($button)))}function isValidHook(hook){return _.isObject(hook)&&_(["init","render","clear","isVisible"]).reduce(function(result,method){return result&&_.isFunction(hook[method])},!0)}var tools={},$toolContainers=$();return $(document).off(".preview").on("itemunload.preview",function(){$toolContainers.each(function(){var $toolContainer=$(this);_.forEach(tools,function(tool,id){var $btn=$toolContainer.children("[data-control=\""+id+"\"]");$btn.length&&(tool.clear($btn),$btn.remove())})})}),{isValid:isValidConfig,initExtraButtons:initExtraButtons}}),define("taoItems/runner/api/itemRunner",["jquery","core/eventifier","taoItems/assets/manager"],function($,eventifier,assetManagerFactory){'use strict';function _interopDefaultLegacy(e){return e&&"object"===_typeof(e)&&"default"in e?e:{default:e}}var $__default=_interopDefaultLegacy($),eventifier__default=_interopDefaultLegacy(eventifier),assetManagerFactory__default=_interopDefaultLegacy(assetManagerFactory),itemRunnerFactory=function itemRunnerFactory(providerName){var data=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},options=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},flow={init:{done:!1,pending:[]},render:{done:!1,pending:[]}};"object"===_typeof(providerName)&&(data=providerName,providerName=void 0);var providers=itemRunnerFactory.providers;if(!providers||0===Object.keys(providers).length)throw new Error("No provider registered");var provider;if("string"==typeof providerName&&0<providerName.length?provider=providers[providerName]:1===Object.keys(providers).length&&(providerName=Object.keys(providers)[0],provider=providers[providerName]),!provider)throw new Error("No candidate found for the provider");var assetManager=options.assetManager||assetManagerFactory__default["default"](function(url){return url.toString()}),suspended=!1,closed=!1;return eventifier__default["default"]({container:null,assetManager:assetManager,options:options,init:function init(newData){var _this3=this,initDone=function(){!1===flow.init.done&&(flow.init.done=!0,flow.init.pending.filter(function(pendingTask){return"function"==typeof pendingTask}).forEach(function(pendingTask){return pendingTask()}),flow.init.pending=[]),_this3.trigger("init")};return newData&&(data=Object.assign(data,newData)),"function"==typeof provider.init?provider.init.call(this,data,initDone):initDone(),this},assets:function assets(strategies,contextData,assetManagerOptions){try{this.assetManager=assetManagerFactory__default["default"](strategies,contextData,assetManagerOptions)}catch(err){this.trigger("error",new Error("Something was wrong while configuring the asset manager : ".concat(err.message)))}return this},render:function render(elt){var _this4=this,newOptions=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},renderDone=function(){!1===flow.render.done&&(flow.render.done=!0,flow.render.pending.filter(function(pendingTask){return"function"==typeof pendingTask}).forEach(function(pendingTask){return pendingTask()}),flow.render.pending=[]),_this4.trigger("render"),_this4.trigger("ready")};return(options=Object.assign(options||{},newOptions),options.state||(options.state={}),!(elt instanceof HTMLElement)&&!(elt instanceof $__default["default"]))?this.trigger("error",new Error("A valid HTMLElement (or a jquery element) at least is required to render the item")):(options.state&&this.setState(options.state,!0),!1===flow.init.done?flow.init.pending.push(function(){return _this4.render(elt,options)}):(this.container=elt instanceof $__default["default"]?elt.get(0):elt,"function"==typeof provider.render?provider.render.call(this,this.container,renderDone,options):renderDone()),this)},clear:function clear(){var _this5=this,clearDone=function(){_this5.trigger("clear")};return"function"==typeof provider.clear?provider.clear.call(this,this.container,clearDone):clearDone(),this},getState:function getState(){return"function"==typeof provider.getState?provider.getState.call(this):null},setState:function setState(state){var _this6=this,isInitialStateRestore=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];return!state||"object"!==_typeof(state)||Array.isArray(state)?this.trigger("error",new Error("The item's state must be a JavaScript Plain Object: ".concat(_typeof(state)," given"))):(!1===flow.render.done?flow.render.pending.push(function(){return _this6.setState(state,isInitialStateRestore)}):"function"==typeof provider.setState&&provider.setState.call(this,state,isInitialStateRestore),this)},getData:function getData(){return data},setData:function setData(itemData){return data=itemData,"function"==typeof provider.setData?provider.setData.call(this,itemData):Promise.resolve()},getOptions:function getOptions(){return this.options},setOptions:function setOptions(){var newOptions=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.options=newOptions,"function"==typeof provider.setOptions?provider.setOptions.call(this,this.options):Promise.resolve()},getResponses:function getResponses(){return"function"==typeof provider.getResponses?provider.getResponses.call(this):{}},renderFeedbacks:function renderFeedbacks(feedbacks,itemSession,done){"function"==typeof provider.renderFeedbacks&&provider.renderFeedbacks.call(this,feedbacks,itemSession,done)},suspend:function suspend(){return!suspended&&flow.render.done&&"function"==typeof provider.suspend?provider.suspend.call(this).then(function(result){return suspended=!0,result}):Promise.resolve()},close:function close(){return!closed&&flow.render.done&&"function"==typeof provider.close?provider.close.call(this).then(function(result){return closed=!0,result}):Promise.resolve()},resume:function resume(){return(suspended||closed)&&flow.render.done&&"function"==typeof provider.resume?provider.resume.call(this).then(function(result){return suspended=!1,closed=!1,result}):Promise.resolve()},isSuspended:function isSuspended(){return suspended},isClosed:function isClosed(){return closed}})};return itemRunnerFactory.register=function(name,provider){if("string"!=typeof name||0>=name.length)throw new TypeError("It is required to give a name to your provider.");if("object"!==_typeof(provider)||"function"!=typeof provider.init&&"function"!=typeof provider.render)throw new TypeError("A provider is an object that contains at least an init function or a render function.");this.providers=this.providers||{},this.providers[name]=provider},itemRunnerFactory}),define("taoItems/runtime/ConsoleResultServer",["jquery"],function($){function ConsoleResultServer(){}return ConsoleResultServer.prototype.submitItemVariables=function(itemId,serviceCallId,responses,scores,events,callback){var previewConsole=$("#preview-console");if(0<previewConsole.length){var niceResponses="";for(var key in responses)niceResponses=niceResponses+key+" = "+responses[key]+"<br />";previewConsole.trigger("updateConsole",["RESPONSES",niceResponses.substring(0,niceResponses.length-2)]);var niceScore="";for(var key in scores)niceScore=niceScore+key+" = "+scores[key]+", ";previewConsole.trigger("updateConsole",["SCORE",niceScore.substring(0,niceScore.length-2)])}"function"==typeof callback&&callback()},ConsoleResultServer}),define("taoItems/runtime/ItemServiceImpl",["jquery"],function($){function ItemServiceImpl(data){this.itemId=data.itemId,this.serviceApi=data.serviceApi,this.resultApi=data.resultApi||null,this.params=data.params||{},this.responses={},this.scores={},this.events={},this.connected=!1;var rawstate=this.serviceApi.getState(),state="undefined"==typeof rawstate||null===rawstate?{}:$.parseJSON(rawstate);this.stateVariables="object"===_typeof(state)?state:{},this.beforeFinishCallbacks=[]}return ItemServiceImpl.prototype.connect=function(frame){!1===this.connected&&frame.contentWindow&&(frame.contentWindow.itemApi=this,"function"==typeof frame.contentWindow.onItemApiReady&&(frame.contentWindow.onItemApiReady(this),this.connected=!0))},ItemServiceImpl.prototype.saveResponses=function(valueArray){for(var attrname in valueArray)this.responses[attrname]=valueArray[attrname]},ItemServiceImpl.prototype.traceEvents=function(eventArray){for(var attrname in eventArray)this.events[attrname]=eventArray[attrname]},ItemServiceImpl.prototype.saveScores=function(valueArray){for(var attrname in valueArray)this.scores[attrname]=valueArray[attrname]},ItemServiceImpl.prototype.getUserPropertyValues=function(property,callback){this.serviceApi.getUserPropertyValues(property,callback)},ItemServiceImpl.prototype.beforeFinish=function(callback){this.beforeFinishCallbacks.push(callback)},ItemServiceImpl.prototype.finish=function(){for(var self=this,i=0;i<this.beforeFinishCallbacks.length;i++)this.beforeFinishCallbacks[i]();this.submit(function(){self.serviceApi.finish()})},ItemServiceImpl.prototype.submit=function(after){var self=this;this.serviceApi.setState(JSON.stringify(self.stateVariables),function(){self.resultApi?self.resultApi.submitItemVariables(self.itemId,self.serviceApi.getServiceCallId(),self.responses,self.scores,self.events,self.params,after):after()})},ItemServiceImpl.prototype.onKill=function(callback){this.serviceApi.onKill(callback)},ItemServiceImpl.prototype.getVariable=function(identifier,callback){"function"==typeof callback&&callback(this.stateVariables[identifier]||null)},ItemServiceImpl.prototype.setVariable=function(identifier,value){this.stateVariables[identifier]=value,this.serviceApi.setState(JSON.stringify(this.stateVariables))},ItemServiceImpl.prototype.setVariables=function(values){for(var v in values)this.stateVariables[v]=values[v];this.serviceApi.setState(JSON.stringify(this.stateVariables))},ItemServiceImpl}),function(c){var d=document,s=d.createElement("style");s.type="text/css",d.getElementsByTagName("head")[0].appendChild(s),s.styleSheet?s.styleSheet.cssText=c:s.appendChild(d.createTextNode(c))}("body.preview-mode{height:100vh !important;max-height:100vh;overflow:hidden}body.no-preview-feedback .preview-overlay .preview-container{background:white;overflow:auto}body.no-preview-feedback .preview-overlay .preview-container .preview-item-container,body.no-preview-feedback .preview-overlay .preview-container #preview-container{min-height:calc(100vh - 82px) !important}.preview-overlay{display:none;width:100%;height:100%;z-index:19995;position:absolute;left:0;background:rgba(0,0,0,0.7)}.preview-overlay.preview-desktop{overflow:visible}.preview-overlay.preview-desktop .mobile-only,.preview-overlay.preview-desktop .standard-only{display:none !important}.preview-overlay.preview-mobile{overflow:visible}.preview-overlay.preview-mobile .desktop-only,.preview-overlay.preview-mobile .standard-only{display:none !important}.preview-overlay.preview-standard{overflow:visible}.preview-overlay.preview-standard .desktop-only,.preview-overlay.preview-standard .mobile-only{display:none !important}.preview-overlay .preview-scale-container{position:relative;float:left}.preview-overlay .preview-container{background:white;overflow:auto}.preview-overlay .preview-container .preview-item-container,.preview-overlay .preview-container #preview-container{min-height:calc(100vh - 130px) !important}.preview-overlay .preview-container-outer{display:table;padding:0;width:100%;height:100%}.preview-overlay .preview-utility-bar{background:#f3f1ef;border-bottom:1px solid #8d949e;margin-bottom:20px;z-index:9996;overflow:hidden;padding:10px;position:fixed;top:0;left:0;width:100%}.preview-overlay .preview-utility-bar .preview-heading{min-width:140px}.preview-overlay .preview-utility-bar .device-type-and-orientation{min-width:340px}.preview-overlay .preview-utility-bar-inner{max-width:1024px;width:100%;margin:auto}.preview-overlay .preview-utility-bar-inner h1{font-size:18px;font-size:1.8rem;text-shadow:1px 1px 0px #eee}.preview-overlay .preview-utility-bar-inner .icon-info{top:7px;font-size:15px;font-size:1.5rem}.preview-overlay .preview-utility-bar-inner li{margin-left:10px}.preview-overlay .preview-utility-bar-inner .btn-info{margin-top:1px}.preview-overlay .preview-utility-bar-inner .mobile-device-selector{width:200px}.preview-overlay .preview-utility-bar-inner .preview-type-selector{width:140px}.preview-overlay .preview-utility-bar-inner .preview-theme-selector{width:140px}.preview-overlay .preview-utility-bar-inner .orientation-selector,.preview-overlay .preview-utility-bar-inner .desktop-device-selector{width:130px}.preview-overlay .preview-utility-bar-inner [class*=\" col-\"],.preview-overlay .preview-utility-bar-inner [class^=\"col-\"]{margin-bottom:0 !important}.preview-overlay #preview-console{margin:0;padding:0;border:none;z-index:auto;background:#266d9c;position:fixed;bottom:0;left:0;width:100%}.preview-overlay #preview-console .preview-console-closer{position:absolute;right:10px;top:10px;cursor:pointer;color:rgba(255,255,255,0.9);display:none;text-shadow:none}.preview-overlay #preview-console .preview-console-closer:hover{color:white}.preview-overlay #preview-console .preview-console-header{max-width:1024px;width:100%;margin:auto;padding:0}.preview-overlay #preview-console .preview-console-header [class*=\" col-\"],.preview-overlay #preview-console .preview-console-header [class^=\"col-\"]{margin-bottom:0 !important}.preview-overlay #preview-console .extra-button-action-bar{overflow:visible}.preview-overlay #preview-console .extra-button-action-bar li{margin:0 5px}.preview-overlay #preview-console .extra-button-action-bar li.btn-info{border-color:rgba(255,255,255,0.3)}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group{border:none !important;overflow:visible;padding:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a{float:left;margin:0 2px;padding:0 15px;border:1px solid rgba(255,255,255,0.3);border-radius:0px;display:inline-block;height:inherit}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a:first-of-type{border-top-left-radius:3px;border-bottom-left-radius:3px;margin-left:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a:last-of-type{border-top-right-radius:3px;border-bottom-right-radius:3px;margin-right:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a:hover,.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a.active{border-color:rgba(255,255,255,0.8)}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a .no-label{padding-right:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info:hover,.preview-overlay #preview-console .extra-button-action-bar li.btn-info.active{border-color:rgba(255,255,255,0.8)}.preview-overlay #preview-console .extra-button-action-bar.horizontal-action-bar.bottom-action-bar{overflow:visible}.preview-overlay #preview-console .extra-button-action-bar.horizontal-action-bar.bottom-action-bar .action{line-height:1.6}.preview-overlay #preview-console .preview-console-body{display:none}.preview-overlay #preview-console .preview-console-body ul{padding:5px;margin:0;height:300px;overflow:auto;background:#2b2b2b;font-family:Consolas,\"Andale Mono WT\",\"Andale Mono\",\"Lucida Console\",\"Lucida Sans Typewriter\",\"DejaVu Sans Mono\",\"Bitstream Vera Sans Mono\",\"Liberation Mono\",\"Nimbus Mono L\",Monaco,\"Courier New\",Courier,monospace;color:#fff}.preview-overlay #preview-console .preview-console-body ul .log-time{color:#999}.preview-overlay #preview-console .preview-console-body ul .log-type{color:#eee}.preview-overlay #preview-console .preview-console-body ul .log-message{color:#69f}.preview-overlay #preview-console .preview-console-body ul pre{margin:0}.preview-overlay .preview-message-box .feedback-info{margin:10px auto 0px;width:800px}.preview-overlay .preview-message-box a{float:right;padding-right:10px}.preview-overlay .desktop-preview-container{width:1024px;background:white url(data:image/gif;base64,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) no-repeat center 150px}.preview-overlay .desktop-preview-frame{position:relative;border:3px #aaa solid;border-radius:5px;background:#5a5a5a;background:linear-gradient(135deg, #5a5a5a 0%, #565656 7%, #444 15%, #141414 30%);box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7)}.preview-overlay .desktop-preview-frame.desktop-preview-landscape{padding:30px 30px}.preview-overlay .desktop-preview-frame.desktop-preview-landscape .desktop-device-toolbar{padding-right:30px}.preview-overlay .desktop-preview-frame.desktop-preview-portrait{padding:30px 30px}.preview-overlay .desktop-preview-frame.desktop-preview-portrait .desktop-device-toolbar{padding-right:30px}.preview-overlay .desktop-preview-item-container{min-height:500px;-webkit-box-shadow:0px 0px 8px #b7b1ac;-moz-box-shadow:0px 0px 8px #b7b1ac;box-shadow:0px 0px 8px #b7b1ac}.preview-overlay .preview-canvas{display:table-cell;text-align:center}.preview-overlay .preview-canvas *{text-align:left}.preview-overlay .preview-outer-frame{position:relative;display:inline-block}.preview-overlay .mobile-preview-container{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;position:relative}.preview-overlay .mobile-preview-item-container{height:100%}.preview-overlay .mobile-preview-frame{position:relative;border:3px #aaa ridge;border-radius:25px;background:#5a5a5a;background:linear-gradient(135deg, #5a5a5a 0%, #565656 7%, #444 15%, #141414 30%);box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7)}.preview-overlay .mobile-preview-frame.mobile-preview-landscape{padding:40px 40px}.preview-overlay .mobile-preview-frame.mobile-preview-landscape .mobile-device-toolbar{padding-right:40px}.preview-overlay .mobile-preview-frame.mobile-preview-portrait{padding:40px 40px}.preview-overlay .mobile-preview-frame.mobile-preview-portrait .mobile-device-toolbar{padding-right:40px}.preview-overlay .mobile-preview-container{background:white;border-radius:3px;border:2px solid;border-color:#444 #999 #999 #444}.preview-overlay .standard-preview-frame{box-shadow:0px 0px 8px rgba(0,0,0,0.7)}\n\n/*# sourceMappingURL=../../../taoItems/views/css/preview.css.map */.preview-modal-feedback.modal .icon-warning{font-size:150%;position:relative;top:2px}.preview-modal-feedback.modal .gray-others{opacity:0.4}\n\n/*# sourceMappingURL=taoItems/controller/items/css/relatedTestsPopup.css.map */"),define("taoItems/loader/taoItems.bundle",function(){});
//# sourceMappingURL=taoItems.min.js.map
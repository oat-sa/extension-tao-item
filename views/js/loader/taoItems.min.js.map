{"version":3,"mappings":"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","names":["define","buffer","helper","stack1","helpers","data","escapeExpression","screenSize","width","height","overlay","typeDependant","$feedbackBox","$console","itemUri","state","orientation","previewType","previewTypes","desktop","mobile","standard","themeObj","$doc","$window","$body","sizeSettings","scaleFactor","winScrollObj","_getDeviceSelectorData","options","_","value","label","dataValue","selected","_setupTypeDependantElements","_setPreviewType","newType","re","el","_setOrientation","previewFrame","newOrientation","_scale","_computeScaleFactor","_scaleFactor","containerScaledWidth","left","$scaleContainer","_positionPreview","scaleValues","x","y","requiredSize","_setupDeviceSelectors","previewDeviceSelectors","option","type","val","i","container","$","minimumResultsForSearch","_setupOrientationSelectors","select2","_setupClosers","$closer","$feedbackCloser","$hideForever","$iframe","window","e","_getThemes","activeTheme","_getPreviewTypes","_setupViewSelector","_setupThemeSelector","iframe","iframeDoc","_updateStandardPreviewSize","values","valueStr","$selector","_initConsole","$listing","logTime","strPad","join","msgStr","show","parsed","url","dataType","method","done","resolve","fail","reject","init","mobileDevices","desktopDevices","themes","hasThemes","_setupScreenSize","name","uri","preview","context","module","providerLoaderFactory","providerRegistry","legacyPreviewer","config","addList","load","then","previewerFactory","__","binder","request","feedback","confirmDialog","alertDialog","confirmDeleteDialog","urlUtil","wrapLongWords","relatedTestsPopupTpl","relatedClassTestsPopupTpl","forbiddenClassActionTpl","noToken","classUri","id","signature","response","actionContext","defaultConfig","provider","previewerConfig","readOnly","fullPage","pluginsOptions","checkRelations","sourceId","relatedTests","number","numberOther","tests","multiple","multipleOthers","classId","catch","start","previewAction","authoringAction","actions","lock","section","off","on","expose","unexpose","categorySwitchComponent","component","setExposed","removeClass","addClass","attr","titles","isExposed","self","$component","setTemplate","switchTpl","getExposedsByClass","injectButtonPlaceholder","$placeholder","$propertyToolbar","$editButton","$propContainer","handleError","addCategorySwitch","propUri","success","$container","___default","urlUtil__default","checkStrategy","assetManagerFactory","assetManager","strategies","parseUrl","_strategies","addStrategy","prependStrategy","setStrategies","handle","setData","getData","resolved","inputUrl","cache","resolveBy","strategy","clearCache","prependToUrl","base","encodeURIComponent","packedUrl","baseUrl","itemCssNoCache","external","base64","taomedia","tool","toolconfig","hook","tools","$toolContainers","isValidConfig","require","$button","$existingBtn","isValidHook","_appendInOrder","triggerItemLoaded","errorHandler","$after","$before","order","_order","_ns","$btn","isValid","initExtraButtons","$__default","eventifier__default","assetManagerFactory__default","itemRunnerFactory","flow","pending","render","providerName","suspended","closed","newData","initDone","filter","forEach","assets","contextData","assetManagerOptions","elt","renderDone","clear","clearDone","getState","setState","itemData","Promise","getOptions","setOptions","getResponses","renderFeedbacks","feedbacks","itemSession","suspend","close","resume","isSuspended","isClosed","ConsoleResultServer","niceResponses","previewConsole","niceScore","callback","rawstate","ItemServiceImpl","frame","submitItemVariables","after"],"sources":["json!taoItems/preview/resources/device-list.json","../preview/tpl/preview!tpl","../../taoItemsCss/preview!css","../preview/preview.js","../previewer/adapter/legacy.js","../previewer/factory.js","../controller/items/tpl/relatedTestsPopup!tpl","../controller/items/tpl/relatedClassTestsPopup!tpl","../controller/items/tpl/forbiddenClassAction!tpl","../controller/items/css/relatedTestsPopup!css","../controller/items/action.js","../controller/items/edit.js","../component/category/switch!tpl","../component/category/switch.js","../provider/category.js","../controller/items/editItemClass.js","../controller/routes.js","../assets/manager.js","../assets/strategies.js","../preview/actionBarHook.js","../runner/api/itemRunner.js","../runtime/ConsoleResultServer.js","../runtime/ItemServiceImpl.js","onLayerEnd0.js","module-create.js"],"sourcesContent":["\ndefine(\"json!taoItems/preview/resources/device-list.json\", function(){ return {\n    \"tablets\": {\n        \"193986c3715c81838870f908fa98d69a\": {\n            \"label\": \"Amazon Kindle Fire HDX 7\\u2033\",\n            \"width\": 960,\n            \"height\": 600\n        },\n        \"4e8eafab11aad1486992d7ee2c8c16ca\": {\n            \"label\": \"Apple iPad\",\n            \"width\": 1024,\n            \"height\": 768\n        },\n        \"5aac2932d9ad00d6d8a1604b8f9e4e8d\": {\n            \"label\": \"Google Nexus 10, Motorola Xoom, Xyboard\",\n            \"width\": 1280,\n            \"height\": 800\n        },\n        \"9805d9753ad08c7630a9ee5418aa6c6c\": {\n            \"label\": \"Google Nexus 7\",\n            \"width\": 966,\n            \"height\": 604\n        },\n        \"d4a431cedf4705d6bf2cba6d5788378b\": {\n            \"label\": \"Samsung Galaxy Tab 7.7, 8.9, 10.1\",\n            \"width\": 1280,\n            \"height\": 800\n        }\n    },\n    \"phones\": {\n        \"1b89338531ef0155c8d6abc2ac02c81a\": {\n            \"label\": \"Apple iPhone 3GS\",\n            \"width\": 320,\n            \"height\": 480,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 320,\n            \"dpHeight\": 480\n        },\n        \"3f89da99d84214cde7df87ebe0699a6f\": {\n            \"label\": \"Apple iPhone 4\",\n            \"width\": 640,\n            \"height\": 960,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1920\n        },\n        \"0d36971a5b98b367f54ced708c9af849\": {\n            \"label\": \"Apple iPhone 5\",\n            \"width\": 640,\n            \"height\": 1136,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 320,\n            \"dpHeight\": 2272\n        },\n        \"026beffcc051af995660ebdede986ace\": {\n            \"label\": \"BlackBerry Z10\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"fd2dd53e667d6d49e4fa73356fa941dd\": {\n            \"label\": \"BlackBerry Z30\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"707584c1ae17d9b5b2cbe8603c91c147\": {\n            \"label\": \"Google Nexus 4\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"91823264de952e7f2347e07db5c4058b\": {\n            \"label\": \"Google Nexus 5\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        },\n        \"cd69817a6e147e8a4677389e56fcf568\": {\n            \"label\": \"Google Nexus S\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"75994faa6a38e31e99b53fcd75534a33\": {\n            \"label\": \"HTC Evo, Touch HD, Desire HD, Desire\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"0cab4dfccdfc880687cb608cfe4159db\": {\n            \"label\": \"HTC One X, EVO LTE\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"c4ff41fcba24d74fc21dc3490ca1edc9\": {\n            \"label\": \"HTC Sensation, Evo 3D\",\n            \"width\": 540,\n            \"height\": 960,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 360,\n            \"dpHeight\": 1440\n        },\n        \"fa969a5e0dd2de53700eeee4ba4ba142\": {\n            \"label\": \"LG Optimus 2X, Optimus 3D, Optimus Black\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"33c4f9364e295ec03531f3a3425819cf\": {\n            \"label\": \"LG Optimus G\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"bc47f5275f0efd56fee52d43a8082981\": {\n            \"label\": \"LG Optimus LTE, Optimus 4X HD\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 1.7,\n            \"dpWidth\": 424,\n            \"dpHeight\": 2176\n        },\n        \"0732887e6e324fd10777b735520a34cf\": {\n            \"label\": \"LG Optimus One\",\n            \"width\": 320,\n            \"height\": 480,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 213,\n            \"dpHeight\": 720\n        },\n        \"2e38a78364f09d0da0e9e1a3a68e7fb0\": {\n            \"label\": \"Motorola Defy, Droid, Droid X, Milestone\",\n            \"width\": 480,\n            \"height\": 854,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1281\n        },\n        \"bd4b78dddc7c9625a4141a1b1ddabb87\": {\n            \"label\": \"Motorola Droid 3, Droid 4, Droid Razr, Atrix 4G, Atrix 2\",\n            \"width\": 540,\n            \"height\": 960,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 540,\n            \"dpHeight\": 960\n        },\n        \"3bf1edf21cfa81006183d2b02974c84e\": {\n            \"label\": \"Motorola Droid Razr HD\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 720,\n            \"dpHeight\": 1280\n        },\n        \"ab5a352e0e016b97dac986f06c394f55\": {\n            \"label\": \"Nokia C5, C6, C7, N97, N8, X7\",\n            \"width\": 360,\n            \"height\": 640,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 360,\n            \"dpHeight\": 640\n        },\n        \"4826fb7d7257aeaac992ce699df41b3c\": {\n            \"label\": \"Nokia Lumia 7X0, Lumia 8XX, Lumia 900, N800, N810, N900\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"0a691ab20add7c432200f8fa6527b488\": {\n            \"label\": \"Samsung Galaxy Note\",\n            \"width\": 800,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 400,\n            \"dpHeight\": 2560\n        },\n        \"9c23ee31be29960fbac9e9bbfc2fc7b0\": {\n            \"label\": \"Samsung Galaxy Note 3\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 540,\n            \"dpHeight\": 3840\n        },\n        \"92177c0508c1d73905a58e2338f2a81f\": {\n            \"label\": \"Samsung Galaxy Note II\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"5222b8866dc4cc606725e16ffcc0a783\": {\n            \"label\": \"Samsung Galaxy S III, Galaxy Nexus\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"37c1541e2bd55cfd0f4073b0ccdf68b3\": {\n            \"label\": \"Samsung Galaxy S, S II, W\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"2f7f64b7dda0144907ff300e83eed465\": {\n            \"label\": \"Samsung Galaxy S4\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        },\n        \"9c24f9057744dad56043702a9703127f\": {\n            \"label\": \"Sony Xperia S, Ion\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"0a8b2732a016a9395c3af5f12dd9c0da\": {\n            \"label\": \"Sony Xperia Sola, U\",\n            \"width\": 480,\n            \"height\": 854,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 480,\n            \"dpHeight\": 854\n        },\n        \"5a153d7f53d82dcb0801f041574a6a43\": {\n            \"label\": \"Sony Xperia Z, Z1\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        }\n    },\n    \"screens\": {\n        \"9e523ae15b61dc766f5c818726881ecf\": {\n            \"label\": \"1920 \\u00d7 1080\",\n            \"width\": 1920,\n            \"height\": 1080,\n            \"dpWidth\": 1920,\n            \"dpHeight\": 1080,\n            \"scaleFactor\": 1\n        },\n        \"07769cd8d0a7d09818b2f0b018042fb7\": {\n            \"label\": \"1366 \\u00d7 768\",\n            \"width\": 1366,\n            \"height\": 768,\n            \"dpWidth\": 1366,\n            \"dpHeight\": 768,\n            \"scaleFactor\": 1\n        },\n        \"72d5478a24194f98b9378e8e0fd65737\": {\n            \"label\": \"1280 \\u00d7 1024\",\n            \"width\": 1280,\n            \"height\": 1024,\n            \"dpWidth\": 1280,\n            \"dpHeight\": 1024,\n            \"scaleFactor\": 1\n        },\n        \"b7a6dd5900cc72e61f0d3479c7e314ec\": {\n            \"label\": \"1280 \\u00d7 800\",\n            \"width\": 1280,\n            \"height\": 800,\n            \"dpWidth\": 1280,\n            \"dpHeight\": 800,\n            \"scaleFactor\": 1\n        },\n        \"43193b0ff671a37d8232ab664190a125\": {\n            \"label\": \"1024 \\u00d7 768\",\n            \"width\": 1024,\n            \"height\": 768,\n            \"dpWidth\": 1024,\n            \"dpHeight\": 768,\n            \"scaleFactor\": 1\n        },\n        \"c29e48814af5443ff5688d9e967ce917\": {\n            \"label\": \"800 \\u00d7 600\",\n            \"width\": 800,\n            \"height\": 600,\n            \"dpWidth\": 800,\n            \"dpHeight\": 600,\n            \"scaleFactor\": 1\n        }\n    }\n};});\n\n","\ndefine('tpl!taoItems/preview/tpl/preview', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                        <option value=\\\"\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n                        \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n                    <select class=\\\"preview-theme-selector\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.themes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                    \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                        <option value=\\\"\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-value=\\\"\";\n  if (helper = helpers.dataValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.dataValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n                        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"preview-overlay tao-scope overlay preview-\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" item-no-print\\\"\\n     style=\\\"display:none\\\">\\n    <div class=\\\"preview-container-outer\\\">\\n        <form class=\\\"preview-utility-bar plain\\\">\\n            <div class=\\\"preview-utility-bar-inner grid-row\\\">\\n\\n                <div class=\\\"col-4\\\">\\n                    <input type=\\\"hidden\\\" value=\\\"\\\" data-value=\\\"\\\" class=\\\"standard-device-selector preview-device-selector\\\" data-target=\\\"standard\\\">\\n                    <select class=\\\"preview-type-selector\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.previewTypes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasThemes), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                </div>\\n                <div class=\\\"col-6 standard-only device-type-and-orientation\\\"></div>\\n                <div class=\\\"col-6 desktop-only device-type-and-orientation\\\">\\n                    <select class=\\\"desktop-device-selector preview-device-selector\\\" data-target=\\\"desktop\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.desktopDevices), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                </div>\\n                <div class=\\\"col-6 mobile-only device-type-and-orientation\\\">\\n                    <select class=\\\"mobile-device-selector preview-device-selector\\\" data-target=\\\"mobile\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mobileDevices), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                    <select tabindex=\\\"-1\\\" class=\\\"mobile-orientation-selector orientation-selector\\\"\\n                            data-target=\\\"mobile\\\">\\n                        <option value=\\\"landscape\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Landscape\", options) : helperMissing.call(depth0, \"__\", \"Landscape\", options)))\n    + \"</option>\\n                        <option value=\\\"portrait\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Portrait\", options) : helperMissing.call(depth0, \"__\", \"Portrait\", options)))\n    + \"</option>\\n                    </select>\\n                </div>\\n                <div class=\\\"col-2\\\">\\n                    <span class=\\\"btn-info small preview-closer rgt\\\">\\n                        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close\", options) : helperMissing.call(depth0, \"__\", \"Close\", options)))\n    + \"\\n                        <span class=\\\"icon-close r\\\"></span>\\n                    </span>\\n                </div>\\n            </div>\\n            <div class=\\\"preview-message-box\\\">\\n                <div class=\\\"feedback-info small\\\">\\n                    <span class=\\\"icon-info\\\"></span>\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This preview may be scaled to fit your screen. The final rendering may differ.\", options) : helperMissing.call(depth0, \"__\", \"This preview may be scaled to fit your screen. The final rendering may differ.\", options)))\n    + \"\\n                    <a href=\\\"#\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Don’t show this again!\", options) : helperMissing.call(depth0, \"__\", \"Don’t show this again!\", options)))\n    + \"</a>\\n                    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove this message\", options) : helperMissing.call(depth0, \"__\", \"Remove this message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\n                </div>\\n            </div>\\n        </form>\\n        <div class=\\\"preview-canvas\\\">\\n            <div class=\\\"preview-scale-container\\\">\\n                <div class=\\\"\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-frame preview-outer-frame \";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-landscape\\\">\\n                    <div class=\\\"\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-container preview-container\\\">\\n                        <div class=\\\"preview-item-container\\\"></div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n\\n    <div id=\\\"preview-console\\\">\\n        <span class=\\\"icon-close preview-console-closer\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close console\", options) : helperMissing.call(depth0, \"__\", \"Close console\", options)))\n    + \"\\\"></span>\\n        <div class=\\\"preview-console-header grid-row clearfix\\\">\\n            <ul class=\\\"col-10 plain action-bar extra-button-action-bar horizontal-action-bar\\\">\\n            </ul>\\n            <ul class=\\\"col-2 plain action-bar console-button-action-bar horizontal-action-bar\\\">\\n                <li class=\\\"small btn-info action action-button rgt\\\" id=\\\"preview-submit-button\\\">\\n                    <a class=\\\"li-inner\\\" href=\\\"#\\\">\\n                        <span class=\\\"label\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Submit\", options) : helperMissing.call(depth0, \"__\", \"Submit\", options)))\n    + \"</span>\\n                    </a>\\n                </li>\\n            </ul>\\n        </div>\\n        <div class=\\\"preview-console-body clear\\\">\\n            <ul></ul>\\n        </div>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('css!taoItemsCss/preview',[],function(){});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Techniologies SA\n *\n */\ndefine('taoItems/preview/preview',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'util/strPad',\n    'core/promise',\n    'json!taoItems/preview/resources/device-list.json',\n    'tpl!taoItems/preview/tpl/preview',\n    'ui/themes',\n    'ui/themeLoader',\n    'util/urlParser',\n    'ui/modal',\n    'select2',\n    'jquery.cookie',\n    'css!taoItemsCss/preview'\n], function ($, _, __, strPad, Promise, deviceList, previewTpl, themeHandler, themeLoader, UrlParser) {\n    'use strict';\n\n\n    var overlay,\n        orientation = 'landscape',\n        previewType = 'standard',\n        previewTypes = {\n            desktop: __('Desktop preview'),\n            mobile: __('Mobile preview'),\n            standard: __('Actual size')\n        },\n        themeObj = themeHandler.get('items') || {},\n        $doc = $(document),\n        $window = $(window),\n        $body = $(document.body),\n        screenSize = {\n            width: $window.innerWidth(),\n            height: $window.innerHeight()\n        },\n        sizeSettings = {\n            width: 0,\n            height: 0\n        },\n        scaleFactor = 1,\n        typeDependant,\n        $feedbackBox,\n        $console,\n        itemUri,\n        state,\n        winScrollObj = { x:0, y:0 };\n\n\n    /**\n     * Create data set for device selectors\n     *\n     * @param type\n     * @returns {Array}\n     * @private\n     */\n    var _getDeviceSelectorData = function (type) {\n\n        /*\n         * @todo\n         * The device list is currently based on the devices found on the Chrome emulator.\n         * This is not ideal and should be changed in the future.\n         * I have http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density in mind but we\n         * will need to figure what criteria to apply when generating the list.\n         */\n        var devices = type === 'mobile' ? deviceList.tablets : deviceList.screens,\n            options = [];\n\n        _.forEach(devices, function (value) {\n\n            options.push({\n                value: value.label,\n                label: value.label,\n                dataValue: [value.width, value.height].join(','),\n                selected: previewType === value.label\n            });\n        });\n\n\n        return options;\n    };\n\n    /**\n     * Collect all elements that can toggle their class name between mobile-* and desktop-*\n     *\n     * @private\n     */\n    var _setupTypeDependantElements = function () {\n        typeDependant = overlay.add(overlay.find('.preview-scale-container').find('[class*=\"' + previewType + '\"]'));\n    };\n\n\n    /**\n     * Change the class name of all type dependant elements\n     *\n     * @param {String} newType\n     */\n    var _setPreviewType = function (newType) {\n        var re;\n\n        if (newType === previewType) {\n            return;\n        }\n\n        re = new RegExp(previewType, 'g');\n\n        typeDependant.each(function (i, el) {\n            el.className = el.className.replace(re, newType);\n        });\n\n        previewType = newType;\n    };\n\n\n    /**\n     * Set orientation\n     *\n     * @param {String} newOrientation\n     * @private\n     */\n    var _setOrientation = function (newOrientation) {\n        var re;\n        var previewFrame;\n\n        if (newOrientation === orientation) {\n            return;\n        }\n\n        re = new RegExp(orientation, 'g');\n        previewFrame = $('.preview-outer-frame')[0];\n\n        previewFrame.className = previewFrame.className.replace(re, newOrientation);\n\n        // reset global orientation\n        orientation = newOrientation;\n    };\n\n    /**\n     * Scale devices down to fit screen\n     * @private\n     */\n    var _scale = function () {\n\n        _computeScaleFactor();\n\n        var $scaleContainer = $('.preview-scale-container'),\n            _scaleFactor = previewType === 'standard' ? 1 : scaleFactor,\n            containerScaledWidth = $scaleContainer.width() * _scaleFactor,\n            left = (screenSize.width - containerScaledWidth) / 2;\n\n        $scaleContainer.css({\n            left: left > 0 ? left : 0,\n            '-webkit-transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            '-ms-transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            'transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            '-webkit-transform-origin': '0 0',\n            '-ms-transform-origin': '0 0',\n            'transform-origin': '0 0'\n        });\n    };\n\n    /**\n     * position the preview depending on the height of the toolbar\n     *\n     * @private\n     */\n    var _positionPreview = function () {\n        var topBarHeight = $(\".preview-utility-bar\").outerHeight();\n\n        overlay[0].style.top = topBarHeight + 'px';\n        overlay[0].style.maxHeight = 'calc(100vh - ' + topBarHeight + 'px - ' + $console.outerHeight() + 'px )';\n    };\n\n\n    /**\n     * Compute scale factor based on screen size and device size\n     *\n     * @private\n     */\n    var _computeScaleFactor = function () {\n\n        var scaleValues = {\n            x: 1,\n            y: 1\n        };\n\n        // 150/200 = device frames plus toolbar plus console plus some margin\n\n        var requiredSize = {\n            width: sizeSettings.width + 150,\n            height: sizeSettings.height + 275\n        };\n\n        if (requiredSize.width > screenSize.width) {\n            scaleValues.x = screenSize.width / requiredSize.width;\n        }\n\n        if (requiredSize.height > screenSize.height) {\n            scaleValues.y = screenSize.height / requiredSize.height;\n        }\n\n        scaleFactor = Math.min(scaleValues.x, scaleValues.y);\n    };\n\n    /**\n     * Add functionality to device selectors\n     *\n     * @private\n     */\n    var _setupDeviceSelectors = function () {\n\n\n        var previewDeviceSelectors = overlay.find('.preview-device-selector');\n\n        previewDeviceSelectors.on('change', function () {\n            var elem = $(this),\n                option = this.nodeName.toLowerCase() === 'select' ? this.options[this.selectedIndex] : this,\n                type = elem.data('target'),\n                val = $(option).data('value').split(','),\n                i = val.length,\n                container = overlay.find('.' + type + '-preview-container');\n\n\n            while (i--) {\n                val[i] = parseFloat(val[i]);\n            }\n\n            if (type === 'mobile' && orientation === 'portrait') {\n                sizeSettings = {\n                    width: val[1],\n                    height: val[0]\n                };\n            }\n            else {\n                sizeSettings = {\n                    width: val[0],\n                    height: val[1]\n                };\n            }\n\n            if (sizeSettings.width === container.width() && sizeSettings.height === container.height()) {\n                return false;\n            }\n\n            _setPreviewType(type);\n            container.css(sizeSettings);\n            _scale();\n        });\n\n        previewDeviceSelectors.each(function () {\n            if (this.nodeName.toLowerCase() === 'select') {\n                $(this).select2({\n                    minimumResultsForSearch: -1\n                });\n            }\n        });\n    };\n\n    /**\n     * Setup orientation selector. There is no actual orientation switch for desktop but it could\n     * be added easily if required.\n     * @private\n     */\n    var _setupOrientationSelectors = function () {\n\n        $('select.orientation-selector').on('change',function () {\n\n            var type = $(this).data('target'),\n                previewFrame = $('.' + type + '-preview-frame'),\n                container = previewFrame.find('.' + type + '-preview-container'),\n                newOrientation = $(this).val();\n\n            if (newOrientation === orientation) {\n                return false;\n            }\n\n            sizeSettings = {\n                height: container.width(),\n                width: container.height()\n            };\n\n            container.css(sizeSettings);\n\n            _setOrientation(newOrientation);\n\n            _scale();\n\n        }).select2({\n            minimumResultsForSearch: -1\n        });\n    };\n\n    /**\n     * Close preview\n     *\n     * @returns {*|HTMLElement}\n     */\n    var _setupClosers = function () {\n        var $closer = overlay.find('.preview-closer'),\n            $feedbackCloser = $feedbackBox.find('.close-trigger'),\n            $hideForever = $feedbackBox.find('a');\n        var $iframe = $('#preview-iframe');\n\n        $closer.on('click', function () {\n            $doc.trigger('itemunload.preview');\n\n            window.scrollTo(winScrollObj.x, winScrollObj.y);\n            \n            overlay.hide();\n            $body.removeClass('preview-mode');\n\n            //empty the iframe\n            $iframe.off('load').attr('src', 'about:blank');\n            $(\".preview-container\").remove();\n        });\n\n        $doc.keyup(function (e) {\n            if (e.keyCode === 27) {\n                $closer.trigger('click');\n            }\n        });\n\n        $feedbackCloser.on('click', function () {\n            $feedbackBox.hide();\n            $body.addClass('no-preview-feedback');\n            _positionPreview();\n            _scale();\n        });\n\n        $hideForever.on('click', function (e) {\n            e.preventDefault();\n            $.cookie('hidePreviewFeedback', true, { expires: 1000, path: '/' });\n            $feedbackCloser.trigger('click');\n        });\n    };\n\n    /**\n     * Build options for themes\n     *\n     * @todo is there a way to know the selected theme?\n     *\n     * @returns {Array}\n     * @private\n     */\n    var _getThemes = function() {\n\n        var options = [];\n        var activeTheme;\n\n        //don't load themes if there is none\n        if(_.isPlainObject(themeObj) && !_.isEmpty(themeObj.base)){\n            activeTheme = themeLoader(themeObj).getActiveTheme();\n\n            _(themeObj.available).forEach(function (data) {\n                options.push({\n                    value: data.id,\n                    label: data.name,\n                    selected: data.id === activeTheme\n                });\n            });\n        }\n        return options;\n    };\n\n    /**\n     * Build options for preview types\n     *\n     * @returns {Array}\n     * @private\n     */\n    var _getPreviewTypes = function () {\n        var options = [];\n        _(previewTypes).forEach(function (_previewLabel, _previewType) {\n            options.push({\n                value: _previewType,\n                label: _previewLabel,\n                selected: previewType === _previewType\n            });\n        });\n        return options;\n    };\n\n    /**\n     * Select preview type\n     *\n     * @private\n     */\n    var _setupViewSelector = function () {\n\n        $('select.preview-type-selector').on('change',function () {\n            var _previewType = $(this),\n                value = _previewType.val();\n\n            _setPreviewType(value);\n\n            $('.' + value + '-device-selector').trigger('change');\n        }).select2({\n            minimumResultsForSearch: -1\n        });\n\n    };\n\n\n    /**\n     * Select preview theme\n     *\n     * @private\n     */\n    var _setupThemeSelector = function () {\n        $('select.preview-theme-selector').on('change',function () {\n            var iframe = document.getElementById('preview-container');\n            var iframeDoc = iframe.contentWindow || iframe.contentDocument;\n            iframeDoc.$('.qti-item').trigger('themechange', [$(this).val()]);\n\n        }).select2({\n            minimumResultsForSearch: -1\n        });\n\n    };\n\n\n    /**\n     * Set the size for the standard preview\n     * @param height\n     * @private\n     */\n    var _updateStandardPreviewSize = function (height) {\n        var $selector = $('.standard-device-selector'),\n            values = ($selector.val() ? $selector.val().split(',') : '') || [$window.width().toString()],\n            valueStr = values.join(',');\n\n        values[1] = height || values[1] || '1200';\n\n        $selector.val(valueStr).data('value', valueStr);\n    };\n\n\n    /**\n     * Console\n     *\n     * @private\n     */\n    var _initConsole = function () {\n        var $body = $console.find('.preview-console-body'),\n            $listing = $body.find('ul'),\n            $closer = $console.find('.preview-console-closer');\n\n        $console.off('updateConsole').on('updateConsole', function (event, type, message) {\n            var timer = new Date(),\n                logTime = [\n                    strPad(timer.getHours(), 2, '0', 'STR_PAD_LEFT'),\n                    strPad(timer.getMinutes(), 2, '0', 'STR_PAD_LEFT'),\n                    strPad(timer.getSeconds(), 2, '0', 'STR_PAD_LEFT')\n                ].join(':'),\n                msgStr = '<span class=\"log-time\">' + strPad(logTime, 12, ' ') + '</span> ' +\n                    '<span class=\"log-type\">' + strPad(type, 18, ' ') + '</span> ' +\n                    '<span class=\"log-message\">' + strPad(message, 18, ' ') + '</span>';\n            $listing.append('<li><pre>' + msgStr + '</pre></li>');\n            if (!$body.is(':visible')) {\n                $body.slideDown('slow', function () {\n                    $closer.show();\n                    $listing.scrollTop(10000);\n                });\n            }\n            else {\n                $listing.scrollTop(10000);\n            }\n        });\n\n        $closer.on('click', function () {\n            $body.slideUp('slow', function () {\n                $closer.hide();\n            });\n        });\n    };\n\n\n\n    /**\n     * Display the preview\n     * @returns {Promise} resolve once the preview is shown\n     */\n    var show = function () {\n        return new Promise(function (resolve, reject){\n            var parsed = new UrlParser(itemUri);\n            parsed.params.state = JSON.stringify(state);\n            $.ajax({\n                url: itemUri,\n                dataType: 'html',\n                method : 'POST',\n                data : parsed.params\n            }).done(function (data) {\n\n                winScrollObj = { x: window.scrollX, y: window.scrollY };\n                window.scrollTo(0,0);\n\n                $body.addClass('preview-mode');\n\n                // $.show() does not work from the item manager\n                // this is either a miracle or a jquery bug\n                // overlay.hide().show();\n                overlay[0].style.display = 'block';\n\n                overlay.find('select:visible').not('.preview-theme-selector').trigger('change');\n                _scale();\n                _positionPreview();\n                $('.preview-item-container').html(data);\n                resolve();\n\n            }).fail(function(xhr){\n                reject(new Error(__('Unable to render the item from %s : %s %s', itemUri, xhr.status, xhr.statusText)));\n            });\n        });\n    };\n\n    /**\n     * Setting up screen size according preview viewport size\n     * @private\n     */\n    function _setupScreenSize() {\n        screenSize = {\n            width: $('.preview-overlay').innerWidth(),\n            height: $('.preview-overlay').innerHeight()\n        };\n    }\n\n    /**\n     * Create preview\n     *\n     * @param {String} _itemUri\n     * @param {Object} _state\n     */\n    var init = function (_itemUri, _state) {\n\n        if(!_itemUri || _itemUri.length === 0){\n            throw new TypeError('Wrong URI');\n        }\n\n        $('.preview-overlay').remove();\n        overlay = $(previewTpl({\n            mobileDevices: _getDeviceSelectorData('mobile'),\n            desktopDevices: _getDeviceSelectorData('desktop'),\n            previewTypes: _getPreviewTypes(),\n            previewType: previewType,\n            themes: _getThemes(),\n            hasThemes: _.size(themeObj.available) > 1\n        }));\n\n        $body.append(overlay);\n\n        $feedbackBox = overlay.find('.preview-message-box');\n        if ($.cookie('hidePreviewFeedback')) {\n            $feedbackBox.hide();\n            $body.addClass('no-preview-feedback');\n        }\n\n        $console = overlay.find('#preview-console');\n\n        _initConsole();\n        _updateStandardPreviewSize();\n        _setupTypeDependantElements();\n        _setupDeviceSelectors();\n        _setupOrientationSelectors();\n        _setupViewSelector();\n        _setupThemeSelector();\n        _setupClosers();\n        _setupScreenSize();\n        _computeScaleFactor();\n        _setPreviewType(previewType);\n        _setOrientation(orientation);\n\n        $window.on('resize orientationchange', function () {\n            _setupScreenSize();\n            _updateStandardPreviewSize();\n            _computeScaleFactor();\n            _scale();\n        });\n\n        itemUri = _itemUri;\n        state = _state;\n\n        return overlay;\n    };\n\n    return {\n        init: init,\n        show: show\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2018 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoItems/previewer/adapter/legacy',[\n    'util/url',\n    'taoItems/preview/preview'\n], function (urlHelper, preview) {\n    'use strict';\n\n    /**\n     * Wraps the legacy item previewer in order to be loaded by the previewer factory\n     */\n    return {\n        name: 'legacy',\n\n        /**\n         * Builds and shows the legacy item previewer\n         *\n         * @param {String} uri - The URI of the item to load\n         * @param {Object} state - The state of the item\n         * @param {Object} [config] - Some config entries\n         * @returns {Object}\n         */\n        init: function init(uri, state, config) {\n            if (typeof uri === 'object' && uri.uri) {\n                uri = uri.uri;\n            }\n            window.scrollTo(0,0);\n            preview.init(urlHelper.route('forwardMe', 'ItemPreview', 'taoItems', {uri : uri}), state);\n            preview.show();\n            return preview;\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2018-2019 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoItems/previewer/factory',[\n    'lodash',\n    'context',\n    'module',\n    'core/providerLoader',\n    'core/providerRegistry',\n    'taoItems/previewer/adapter/legacy'\n], function (\n    _,\n    context,\n    module,\n    providerLoaderFactory,\n    providerRegistry,\n    legacyPreviewer\n) {\n    'use strict';\n\n    /**\n     * Loads and display the item previewer\n     * @param {String} type - The type of previewer\n     * @param {String|Object} uri - The URI of the item to load\n     * @param {Object} state - The state of the item\n     * @param {Object} [config] - Some config entries\n     * @param {String} [config.fullPage] - Force the previewer to occupy the full window.\n     * @param {String} [config.readOnly] - Do not allow to modify the previewed item.\n     * @param {Object} [config.previewers] - Optionally load static adapters. By default take them from the module's config.\n     * @returns {Promise}\n     */\n    function previewerFactory(type, uri, state, config) {\n        config = _.defaults(config || {}, module.config());\n        return providerLoaderFactory()\n            .addList(config.previewers)\n            .load(context.bundle)\n            .then(function (providers) {\n                previewerFactory.registerProvider(legacyPreviewer.name, legacyPreviewer);\n                _.forEach(providers, function (provider) {\n                    previewerFactory.registerProvider(provider.name, provider);\n                });\n            })\n            .then(function () {\n                return previewerFactory.getProvider(type || legacyPreviewer.name);\n            })\n            .then(function (provider) {\n                return provider.init(uri, state, config);\n            });\n    }\n\n    return providerRegistry(previewerFactory, function validateProvider(provider) {\n        if (!_.isFunction(provider.init)) {\n            throw new TypeError('The previewer provider MUST have a init() method');\n        }\n        return true;\n    });\n});\n\n","\ndefine('tpl!taoItems/controller/items/tpl/relatedTestsPopup', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var helper, options;\n  return escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"s\", options) : helperMissing.call(depth0, \"__\", \"s\", options)));\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<li>\"\n    + escapeExpression(((stack1 = (depth0 && depth0.label)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</li>\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<span class=\\\"gray-others\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"and\", options) : helperMissing.call(depth0, \"__\", \"and\", options)))\n    + \" \";\n  if (helper = helpers.numberOther) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.numberOther); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"other\", options) : helperMissing.call(depth0, \"__\", \"other\", options)));\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.multipleOthers), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \".</span><br><br>\\n\";\n  return buffer;\n  }\n\n  buffer += \"<span class=\\\"icon icon-warning\\\"></span> <b>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Warning\", options) : helperMissing.call(depth0, \"__\", \"Warning\", options)))\n    + \"</b><br><br>\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The item\", options) : helperMissing.call(depth0, \"__\", \"The item\", options)))\n    + \" <b>\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</b> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"is currently in use.\", options) : helperMissing.call(depth0, \"__\", \"is currently in use.\", options)))\n    + \"\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Deleting this item will break the\", options) : helperMissing.call(depth0, \"__\", \"Deleting this item will break the\", options)))\n    + \" <b>\";\n  if (helper = helpers.number) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.number); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</b> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"test\", options) : helperMissing.call(depth0, \"__\", \"test\", options)));\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.multiple), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"using it:\", options) : helperMissing.call(depth0, \"__\", \"using it:\", options)))\n    + \"\\n<ul>\\n\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.tests), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</ul>\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.numberOther), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n<b>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Are you sure you want to delete this item?\", options) : helperMissing.call(depth0, \"__\", \"Are you sure you want to delete this item?\", options)))\n    + \"</b>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoItems/controller/items/tpl/relatedClassTestsPopup', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var helper, options;\n  return escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"s\", options) : helperMissing.call(depth0, \"__\", \"s\", options)));\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<li>\"\n    + escapeExpression(((stack1 = (depth0 && depth0.label)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</li>\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<span class=\\\"gray-others\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"and\", options) : helperMissing.call(depth0, \"__\", \"and\", options)))\n    + \" \";\n  if (helper = helpers.numberOther) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.numberOther); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"other\", options) : helperMissing.call(depth0, \"__\", \"other\", options)));\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.multipleOthers), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \".</span><br><br>\\n\";\n  return buffer;\n  }\n\n  buffer += \"<span class=\\\"icon icon-warning\\\"></span> <b>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Warning\", options) : helperMissing.call(depth0, \"__\", \"Warning\", options)))\n    + \"</b><br><br>\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The class\", options) : helperMissing.call(depth0, \"__\", \"The class\", options)))\n    + \" <b>\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</b> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"contains content that is currently in use.\", options) : helperMissing.call(depth0, \"__\", \"contains content that is currently in use.\", options)))\n    + \"\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Deleting this class will break the\", options) : helperMissing.call(depth0, \"__\", \"Deleting this class will break the\", options)))\n    + \" <b>\";\n  if (helper = helpers.number) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.number); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</b> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"test\", options) : helperMissing.call(depth0, \"__\", \"test\", options)));\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.multiple), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"using it:\", options) : helperMissing.call(depth0, \"__\", \"using it:\", options)))\n    + \"\\n<ul>\\n\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.tests), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</ul>\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.numberOther), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n<b>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Are you sure you want to delete this class and all of its content?\", options) : helperMissing.call(depth0, \"__\", \"Are you sure you want to delete this class and all of its content?\", options)))\n    + \"</b>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoItems/controller/items/tpl/forbiddenClassAction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<b>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Forbidden action\", options) : helperMissing.call(depth0, \"__\", \"Forbidden action\", options)))\n    + \"</b><br><br>\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The class\", options) : helperMissing.call(depth0, \"__\", \"The class\", options)))\n    + \" <b>\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</b> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"you are trying to delete is too large and contains too many subclasses.\", options) : helperMissing.call(depth0, \"__\", \"you are trying to delete is too large and contains too many subclasses.\", options)))\n    + \"<br>\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Please delete the subclasses before.\", options) : helperMissing.call(depth0, \"__\", \"Please delete the subclasses before.\", options)));\n  return buffer;\n  });\n});\n\n","\ndefine('css!taoItems/controller/items/css/relatedTestsPopup',[],function(){});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 - 2019 (original work) Open Assessment Techniologies SA\n *\n */\ndefine('taoItems/controller/items/action',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'module',\n    'layout/actions/binder',\n    'taoItems/previewer/factory',\n    'core/request',\n    'ui/feedback',\n    'ui/dialog/confirm',\n    'ui/dialog/alert',\n    'ui/dialog/confirmDelete',\n    'util/url',\n    'uri',\n    'util/wrapLongWords',\n    'tpl!taoItems/controller/items/tpl/relatedTestsPopup',\n    'tpl!taoItems/controller/items/tpl/relatedClassTestsPopup',\n    'tpl!taoItems/controller/items/tpl/forbiddenClassAction',\n    'css!taoItems/controller/items/css/relatedTestsPopup.css',\n], function (\n    _,\n    $,\n    __,\n    module,\n    binder,\n    previewerFactory,\n    request,\n    feedback,\n    confirmDialog,\n    alertDialog,\n    confirmDeleteDialog,\n    urlUtil,\n    uri,\n    wrapLongWords,\n    relatedTestsPopupTpl,\n    relatedClassTestsPopupTpl,\n    forbiddenClassActionTpl\n) {\n    'use strict';\n\n    binder.register('itemPreview', function itemPreview(actionContext) {\n        const defaultConfig = {\n            provider: 'qtiItem',\n            state: {},\n            uri: actionContext.id\n        };\n        const config = _.merge(defaultConfig, module.config());\n        const previewerConfig = _.omit({\n            readOnly: false,\n            fullPage: true,\n            pluginsOptions: config.pluginsOptions\n        }, _.isUndefined);\n\n        previewerFactory(config.provider, config.uri, config.state, previewerConfig);\n    });\n\n    binder.register('deleteItem', function (actionContext) {\n        return new Promise((resolve, reject) => {\n            checkRelations({\n                sourceId: actionContext.id,\n                type: 'item'\n            })\n            .then((responseRelated) => {\n                const relatedTests = responseRelated.data.relations;\n                const name = prepareName($('a.clicked', actionContext.tree).text().trim());\n                if (relatedTests.length === 0) {\n                    confirmDialog(\n                        __('Are you sure you want to delete the item %s?', `<b>${name}</b>`),\n                        () => accept(actionContext, this.url, resolve, reject),\n                        () => cancel(reject)\n                    );\n                } else {\n                    confirmDeleteDialog(\n                        relatedTestsPopupTpl({\n                            name,\n                            number: relatedTests.length,\n                            numberOther: relatedTests.length - 3 > 0 ? relatedTests.length - 3 : 0,\n                            tests: relatedTests.length <= 3 ? relatedTests : relatedTests.slice(0, 3),\n                            multiple:  relatedTests.length > 1,\n                            multipleOthers: relatedTests.length - 3 > 1,\n                        }),\n                        () => accept(actionContext, this.url, resolve, reject),\n                        () => cancel(reject)\n                    );\n                }\n            });\n        });\n    });\n\n    binder.register('deleteItemClass', function (actionContext) {\n        return new Promise((resolve, reject) => {\n            checkRelations({\n                classId: actionContext.id,\n                type: 'item'\n            })\n            .then((responseRelated) => {\n                const relatedTests = responseRelated.data.relations;\n                const name = prepareName($('a.clicked', actionContext.tree).text().trim());\n                if (relatedTests.length === 0) {\n                    confirmDeleteDialog(\n                        __('Are you sure you want to delete the class %s and all of its content?', `<b>${name}</b>`),\n                        () => accept(actionContext, this.url, resolve, reject),\n                        () => cancel(reject)\n                    );\n                } else {\n                    confirmDeleteDialog(\n                        relatedClassTestsPopupTpl({\n                            name,\n                            number: relatedTests.length,\n                            numberOther: relatedTests.length - 3 > 0 ? relatedTests.length - 3 : 0,\n                            tests: relatedTests.length <= 3 ? relatedTests : relatedTests.slice(0, 3),\n                            multiple:  relatedTests.length > 1,\n                            multipleOthers: relatedTests.length - 3 > 1,\n                        }),\n                        () => accept(actionContext, this.url, resolve, reject),\n                        () => cancel(reject)\n                    );\n                }\n            })\n            .catch(errorObject => {\n                if (errorObject.response.code === 999) {\n                    alertDialog(\n                        forbiddenClassActionTpl(),\n                        () => cancel(reject)\n                    );\n                }\n            });\n        });\n    });\n\n    function checkRelations(data) {\n        return request({\n            url: urlUtil.route('index', 'ResourceRelations', 'tao'),\n            data,\n            method: 'GET',\n            noToken: true\n        });\n    }\n\n    function accept(actionContext, url, resolve, reject) {\n        return request({\n            url: url,\n            method: 'POST',\n            data: {\n                uri: uri.decode(actionContext.uri),\n                classUri: actionContext.classUri,\n                id: actionContext.id,\n                signature: actionContext.signature\n            },\n            dataType: 'json'\n        }).then(function (response) {\n            if (response.success && response.deleted) {\n                feedback().success(response.message || __('Resource deleted'));\n\n                if (actionContext.tree) {\n                    $(actionContext.tree).trigger('removenode.taotree', [\n                        {\n                            id: actionContext.uri || actionContext.classUri\n                        }\n                    ]);\n                }\n                return resolve({\n                    uri: actionContext.uri || actionContext.classUri\n                });\n            } else {\n                if (response.success && !response.deleted) {\n                    $(actionContext.tree).trigger('refresh.taotree');\n                    reject(response.msg\n                           || response.message\n                           || __('Unable to delete the selected resource because you do not have the required rights to delete part of its content.'));\n                }\n\n                reject(response.msg\n                       || response.message\n                       || __('Unable to delete the selected resource'));\n            }\n        });\n    }\n\n    function cancel(reject) {\n        reject({ cancel: true });\n    }\n\n    function prepareName(name) {\n        if (name.length < 50) {\n            return name;\n        } else {\n            return wrapLongWords(name, 50);\n        }\n    }\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2019 (original work) Open Assessment Technologies SA;\n */\ndefine('taoItems/controller/items/edit',[\n    'jquery',\n    'i18n',\n    'module',\n    'layout/actions',\n    'ui/lock',\n    'layout/section'\n],\nfunction($, __, module, actions, lock, section){\n    'use strict';\n\n    /**\n     * The item properties controller\n     */\n    var editItemController = {\n\n        /**\n         * Controller entry point\n         */\n        start() {\n            const config = module.config();\n\n            const previewAction = actions.getBy('item-preview');\n            const authoringAction = actions.getBy('item-authoring');\n\n            if(previewAction){\n                previewAction.state.disabled = !config.isPreviewEnabled;\n            }\n            if(authoringAction){\n                authoringAction.state.disabled = !config.isAuthoringEnabled;\n            }\n            actions.updateState();\n\n            $('#lock-box').each(function() {\n                lock($(this)).register();\n            });\n\n            //some of the others sections (like the authoring) might have an impact\n            //on the state of the other actions, so we reload when we come back\n            section\n                .off('show')\n                .on('show', sectionContext => {\n                    if(sectionContext.id === 'manage_items'){\n                        actions.exec('item-properties');\n                    }\n                });\n        }\n    };\n\n    return editItemController;\n});\n\n","\ndefine('tpl!taoItems/component/category/switch', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<a href=\\\"#\\\" data-id=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"category-auto-adder\\\"><span class=\\\"icon-tag\\\"></span></a>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * A component to switch the exposition state for categories of a property\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoItems/component/category/switch',[\n    'lodash',\n    'i18n',\n    'ui/component',\n    'tpl!taoItems/component/category/switch'\n], function(_, __, component, switchTpl){\n    'use strict';\n\n    /**\n     * The titles based on current exposition state\n     */\n    var titles = {\n        expose : __('Expose the property value to create automated categories.'),\n        unexpose : __('The property is exposed to category addition.&#13Remove exposition ?')\n    };\n\n\n    /**\n     * The factory to create a new component\n     *\n     * @param {jQueryElement} $container - where to append the component\n     * @param {string} propertyId - to keep the property identifier\n     * @param {boolean} exposed - the initial exposition state\n     *\n     * @returns {categorySwitchComponent} the component\n     *\n     * @throws {TypeError} whithout the propertyId\n     */\n    return function categorySwitchFactory($container, propertyId, exposed){\n\n        var categorySwitchComponent;\n\n        if(!propertyId){\n            throw new TypeError('We need the property id');\n        }\n\n\n        /**\n         * @typedef {categorySwitchComponent} The component itself\n         */\n        categorySwitchComponent =\n            component({\n\n                /**\n                 * Change the current state\n                 *\n                 * @param {boolean} exposed - the new state\n                 *\n                 * @returns {categorySwitchComponent} chains\n                 */\n                setExposed : function setExposed(value){\n                    if (!this.is('disabled')) {\n                        this.setState('exposed', !!value);\n\n                        if(this.is('rendered')){\n                            if(value){\n                                this.getElement()\n                                    .removeClass('placeholder')\n                                    .addClass('txt-success')\n                                    .attr('title', titles.unexpose);\n                            } else {\n                                this.getElement()\n                                    .removeClass('txt-success')\n                                    .addClass('placeholder')\n                                    .attr('title', titles.expose);\n                            }\n                        }\n                    }\n                    return this;\n                },\n\n                /**\n                 * Check the exposition state\n                 *\n                 * @returns {boolean} the current state\n                 */\n                isExposed : function isExposed(){\n                    return this.is('exposed');\n                }\n            }, {})\n                .on('init', function(){\n\n                    this.setState('exposed', exposed);\n\n                    this.render($container);\n                })\n                .on('render', function(){\n                    var self = this;\n                    var $component = this.getElement();\n\n                    this.setExposed(exposed);\n                    $component\n                        .off('click')\n                        .on('click', function(e){\n                            e.preventDefault();\n                            if(!self.is('disabled')){\n\n                                /**\n                                 * We request a state change\n                                 * @event categorySwitchComponent#requestChange\n                                 * @param {string} propertyId - the property identifier\n                                 * @param {boolean} exposed - the requested exposition state\n                                 */\n                                self.trigger('requestChange', self.config.id, !self.is('exposed'));\n                            }\n                        });\n                });\n\n        //defering initialization to be able to listen\n        _.defer(function(){\n            categorySwitchComponent\n                .setTemplate(switchTpl)\n                .init({\n                    id : propertyId,\n                });\n        });\n\n        return categorySwitchComponent;\n    };\n});\n\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * Provides category data.\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoItems/provider/category',[\n    'lodash',\n    'i18n',\n    'util/url',\n    'core/dataProvider/request',\n    'core/promise'\n], function( _, __, url, request, Promise){\n    'use strict';\n\n    /**\n     * Per function requests configuration.\n     */\n    var defaultConfig = {\n        getExposedsByClass : {\n            url : url.route('getExposedsByClass', 'Category', 'taoItems')\n        },\n        setExposed : {\n            url : url.route('setExposed', 'Category', 'taoItems')\n        }\n    };\n\n\n    /**\n     * Creates a configured category provider\n     *\n     * @param {Object} [config] - to override the default config\n     * @returns {categoryProvider} the new provider\n     */\n    return function categoryProviderFactory(config){\n\n        config = _.defaults(config || {}, defaultConfig);\n\n        /**\n         * @typedef {categoryProvider}\n         */\n        return {\n\n            /**\n             * Get the properties and the exposed state for a given class\n             * @param {String} id - the class URI\n             * @returns {Promise} that resolves with and object like  propertyURI : exposed\n             */\n            getExposedsByClass: function getExposedsByClass(id){\n                return new Promise(function(resolve, reject){\n\n                    if(_.isEmpty(id)){\n                        return reject(new TypeError('The class URI must be provided in the id parameter'));\n                    }\n\n                    return resolve(request(config.getExposedsByClass.url, { id : id }));\n                });\n            },\n\n            /**\n             * Set the exposed state for a property\n             * @param {String} id - the property URI\n             * @param {Boolean} exposed - the exposed value\n             * @returns {Promise} that resolves with the list of ID definitions.\n             */\n            setExposed : function setExposed(id, exposed){\n                return new Promise(function(resolve, reject){\n\n                    if(_.isEmpty(id)){\n                        return reject(new TypeError('The property URI must be provided in the id parameter'));\n                    }\n                    if(!_.isBoolean(exposed)){\n                        return reject(new TypeError('The exposed value is required.'));\n                    }\n\n                    return resolve(request(config.setExposed.url, { id : id, exposed: exposed }));\n                });\n            }\n        };\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n *\n */\n\n\n/**\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoItems/controller/items/editItemClass',[\n    'jquery',\n    'lodash',\n    'uri',\n    'taoItems/component/category/switch',\n    'taoItems/provider/category',\n    'ui/feedback'\n], function($, _, uriUtil, categorySwitch, categoryProvider, feedback) {\n    'use strict';\n\n    var provider = categoryProvider();\n\n    /**\n     * We inject the placeholder of the switch for the given property\n     * @param {String} uri - the property uri\n     * @returns {jQueryElement} the placeholder if created\n     */\n    var injectButtonPlaceholder = function injectButtonPlaceholder(uri) {\n        var $propContainer = $('#property_' + uriUtil.encode(uri));\n        var $placeholder,\n            $propertyToolbar,\n            $editButton;\n\n        if($propContainer.length && $propContainer.hasClass('regular-property')){\n            $placeholder     = $('<span>');\n            $propertyToolbar = $('.property-heading-toolbar', $propContainer);\n            $editButton      = $('.icon-edit', $propertyToolbar);\n\n            if ($editButton.length) {\n                $placeholder.insertAfter($editButton);\n            } else {\n                $propertyToolbar.append($placeholder);\n            }\n        }\n        return $placeholder;\n    };\n\n    /**\n     * Display the error\n     * @param {Error} err - any error\n     */\n    var handleError = function handleError(err){\n        feedback().error(err.message);\n    };\n\n    /**\n     * Acc the expose category switch component to the container\n     * @param {jQueryElement} $container - where to append the switch\n     * @param {String} propertyUri - the property URI\n     * @param {Boolean} exposed - the initial state\n     * @returns {categorySwitchComponent} the component\n     */\n    var addCategorySwitch = function addCategorySwitch($container, propertyUri, exposed) {\n        return categorySwitch($container, propertyUri, exposed)\n            .on('requestChange', function(propUri, value) {\n                var self = this;\n                this.setState('disabled', true);\n\n                provider\n                    .setExposed(propUri, value)\n                    .then(function(success){\n                        self.setState('disabled', false);\n                        if(success){\n                            self.setExposed(value);\n                        }\n                    })\n                    .catch(handleError);\n            });\n    };\n\n    /**\n     * The contoller\n     */\n    return {\n\n        /**\n         * Usual entry point\n         */\n        start : function start() {\n            var classUri = $('#id').val();\n\n            provider\n                .getExposedsByClass(classUri)\n                .then(function(results){\n                    //we received the list of eligible properties and their expose state\n                    _.forEach(results, function(exposed, uri){\n                        var $container = injectButtonPlaceholder(uri);\n                        if($container && $container.length){\n                            addCategorySwitch($container, uri, exposed);\n                        }\n                    });\n                })\n                .catch(handleError);\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 - 2019 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoItems/controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'Items' : {\n            'deps' : 'controller/items/action',\n            'actions' : {\n                'editItem' : 'controller/items/edit',\n                'editItemClass': 'controller/items/editItemClass'\n            }\n        },\n    };\n});\n\n","define('taoItems/assets/manager',['lodash', 'util/url'], function (_, urlUtil) { 'use strict';\n\n    function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n    var ___default = /*#__PURE__*/_interopDefaultLegacy(_);\n    var urlUtil__default = /*#__PURE__*/_interopDefaultLegacy(urlUtil);\n\n    /*\n     * This program is free software; you can redistribute it and/or\n     * modify it under the terms of the GNU General Public License\n     * as published by the Free Software Foundation; under version 2\n     * of the License (non-upgradable).\n     *\n     * This program is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n     * GNU General Public License for more details.\n     *\n     * You should have received a copy of the GNU General Public License\n     * along with this program; if not, write to the Free Software\n     * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n     *\n     * Copyright (c) 2015-2019 (original work) Open Assessment Technologies SA;\n     *\n     */\n\n    /**\n     * @typedef AssetStrategy Defines a way to resolve an asset path\n     * @property {String} name - the strategy name\n     * @property {assetStrategyHandle} handle - how to resolve the strategy.\n     */\n\n    /**\n     * @callback assetStrategyHandle\n     * @param {String|Object} url - the URL to resolved. If parseUrl, it's an object that contains host, port, search, queryString, etc.\n     * @param {Object} data - the context data\n     * @returns {String?} falsy if not resolved otherwise the resolved URL\n     */\n\n    /**\n     * Check if the given object is a valid AssetStrategy\n     * @param {AssetStrategy} strategy\n     * @throws {TypeError}\n     */\n    var checkStrategy = function checkStrategy(strategy) {\n        if (!___default['default'].isPlainObject(strategy) || !___default['default'].isFunction(strategy.handle) || !___default['default'].isString(strategy.name)) {\n            throw new TypeError('An asset resolution strategy is an object with a handle method and a name');\n        }\n    };\n\n    /**\n     * The assetManagerFactory create a new assetManager with the given resolution strategies and a data context.\n     *\n     * @example\n     *   //define AssetStrategies with a name and a handle method\n     *   var strategies = [{\n     *       name : 'external',\n     *       handle : function(url, data){\n     *           if(/^http/.test(url)){\n     *               return path;\n     *           }\n     *       }\n     *   }, {\n     *       name : 'relative',\n     *       handle : function(url, data){\n     *           if(/^((\\.\\/)|(\\w\\/))/){\n     *               return data.baseUrl + '/' + url ;\n     *           }\n     *       }\n     *   }]);\n     *\n     *   var assetManager = assetManagerFactory(strategies, { baseUrl : 'http://t.oa/public/assets/' });\n     *   assetManager.resolve('http://foo/bar.png'); //will resolved using external\n     *   assetManager.resolve('bar.png'); //will resolved using relative strategy\n     *\n     * @param {AssetStrategy[]} strategies - the strategies\n     * @param {Object} data - the context data\n     * @param {Object} [options] - the manager options\n     * @param {Boolean} [options.parseUrl = true] - If the URL to give to the strategies should be parsed or given as it is.\n     * @param {Boolean} [options.cache] - resolve the same URL only once and store the result in memory.\n     *\n     * @exports taoItems/assets/manager\n     * @namespace assetManagerFactory\n     * @returns {Object} Asset manager\n     */\n    var assetManagerFactory = function assetManagerFactory(strategies, data, options) {\n        var cache = {},\n            assetManager;\n\n        strategies = ___default['default'].isArray(strategies) ? strategies : [strategies];\n        data = data || {};\n        options = ___default['default'].defaults(options || {}, {\n            parseUrl: true\n        });\n\n        /**\n         * A brand new asset manager is created by the factory\n         */\n        assetManager = {\n            /**\n             * The stack of strategies that would be used to resolve the asset path\n             * @type {AssetStrategy[]}\n             */\n            _strategies: [],\n\n            /**\n             * Add an asset resolution strategy at the end of the stack.\n             * The strategies will be evaluated in the order they've been added.\n             * @param {AssetStrategy} strategy - the strategy to add\n             * @throws {TypeError} if the strategy isn't defined correctly\n             */\n            addStrategy: function addStrategy(strategy) {\n                checkStrategy(strategy);\n\n                this._strategies.push(strategy);\n            },\n\n            /**\n             * Add an asset resolution strategy at the beginning of the stack.\n             * The strategies will be evaluated in the order they've been added.\n             * @param {AssetStrategy} strategy - the strategy to add\n             * @throws {TypeError} if the strategy isn't defined correctly\n             */\n            prependStrategy: function prependStrategy(strategy) {\n                checkStrategy(strategy);\n\n                this._strategies.unshift(strategy);\n            },\n\n            /**\n             * Change the strategies\n             * @param {AssetStrategy[]} newStrategies - the strategies\n             * @throws {TypeError} if the strategy isn't defined correctly\n             */\n            setStrategies: function setStrategies(newStrategies) {\n                var self = this;\n\n                this._strategies = [];\n\n                //assign the strategies to the assetManager\n                ___default['default'].forEach(newStrategies, function(strategy) {\n                    //if it's an object we add it directly\n                    if (___default['default'].isPlainObject(strategy)) {\n                        assetManager.addStrategy(strategy);\n\n                        //if it's a function, we create the strategy with a generated name\n                    } else if (___default['default'].isFunction(strategy)) {\n                        self.addStrategy({\n                            name: `strategy_${self._strategies.length + 1}`,\n                            handle: strategy\n                        });\n                    }\n                });\n            },\n\n            /**\n             * Set context data\n             * @param {String|Object} [key] - the key of the data to set or the data values if it's an object\n             * @param {*} [value] - the value to set if a key is given\n             */\n            setData: function setData(key, value) {\n                if (___default['default'].isString(key) && typeof value !== 'undefined') {\n                    data[key] = value;\n                } else if (___default['default'].isPlainObject(key)) {\n                    data = key;\n                }\n            },\n\n            /**\n             * Get context data\n             * @param {String} [key] - if we want the value of a particular key\n             * @returns {Object|*} all the data or the propriety value if key is given\n             */\n            getData: function getData(key) {\n                if (___default['default'].isString(key)) {\n                    return data[key];\n                }\n                return data;\n            },\n\n            /**\n             * Resolve the given URL against the strategies\n             * @param {String} url - the URL to resolve\n             * @returns {String?} the resolved URL or nothing\n             */\n            resolve: function resolve(url) {\n                var resolved;\n                var inputUrl;\n\n                //if caching try to load the value from the cache\n                if (options.cache && typeof cache[url] !== 'undefined') {\n                    return cache[url];\n                }\n\n                //parse the URL ?\n                inputUrl = options.parseUrl ? urlUtil__default['default'].parse(url) : url;\n\n                //call strategies handlers, in their order until once returns something\n                ___default['default'].forEach(this._strategies, function(strategy) {\n                    var result = strategy.handle(inputUrl, data);\n                    if (result) {\n                        resolved = result;\n                        return false;\n                    }\n                });\n\n                resolved = resolved || '';\n\n                if (options.cache) {\n                    cache[url] = resolved;\n                }\n\n                return resolved;\n            },\n\n            /**\n             * Resolve the given URL against the strategy identified by the given name\n             * @param {String} name - the strategy name\n             * @param {String} url - the URL to resolve\n             * @returns {String?} the resolved URL or nothing\n             */\n            resolveBy: function resolveBy(name, url) {\n                var inputUrl;\n                var resolved = '';\n                var strategy = ___default['default'].find(this._strategies, { name: name });\n                if (strategy) {\n                    //parse the URL ?\n                    inputUrl = options.parseUrl ? urlUtil__default['default'].parse(url) : url;\n                    resolved = strategy.handle(inputUrl, data);\n                }\n                return resolved;\n            },\n\n            /**\n             * When the cache is used, it could be useful to clear the cache\n             */\n            clearCache: function clearCache() {\n                if (options.cache) {\n                    cache = {};\n                }\n            }\n        };\n\n        assetManager.setStrategies(strategies);\n\n        return assetManager;\n    };\n\n    return assetManagerFactory;\n\n});\n\n","define('taoItems/assets/strategies',['util/url', 'lodash'], function (urlUtil, _) { 'use strict';\n\n    function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n    var urlUtil__default = /*#__PURE__*/_interopDefaultLegacy(urlUtil);\n    var ___default = /*#__PURE__*/_interopDefaultLegacy(_);\n\n    /*\n     * This program is free software; you can redistribute it and/or\n     * modify it under the terms of the GNU General Public License\n     * as published by the Free Software Foundation; under version 2\n     * of the License (non-upgradable).\n     *\n     * This program is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n     * GNU General Public License for more details.\n     *\n     * You should have received a copy of the GNU General Public License\n     * along with this program; if not, write to the Free Software\n     * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n     *\n     * Copyright (c) 2015-2019 (original work) Open Assessment Technologies SA;\n     *\n     */\n\n    /**\n     * Prepend a base to an URL\n     * @param {Object} url - a parsed URL\n     * @param {String} base - the base to prepend\n     * @param {Boolean} [slashcat = false] - remove dots, double slashes, etc.\n     * @returns {String} the URL\n     */\n    var prependToUrl = function prependToUrl(url, base, slashcat) {\n        //is slashcat we manage slash concact\n        if (slashcat === true) {\n            return `${base.replace(/\\/$/, '')}/${url.directory.replace(/^\\.\\//, '').replace(/^\\//, '')}${encodeURIComponent(url.file.replace(/^\\.\\//, '').replace(/^\\//, ''))}`;\n        }\n\n        return base + url.directory.replace(/^\\.?\\//, '') + encodeURIComponent(url.file.replace(/^\\.?\\//, ''));\n    };\n\n    /**\n     * Unrelated strategies accessible by there name.\n     * Remember to not use the whole object, but each one in an array since the order matters.\n     *\n     * @exports taoItems/assets/strategies\n     */\n    var strategies = {\n        //the packedUrl will replace the asset with the url given in the assets part\n        //the assetManager should add the assets part to data with .setData('assets' itemData.content.assets)\n        packedUrl: {\n            name: 'packedUrl',\n            handle: function handlePackedUrl(url, data) {\n                var type;\n                if (!___default['default'].isUndefined(url.source) && !___default['default'].isUndefined(data.assets)) {\n                    type = ___default['default'].findKey(data.assets, url.source);\n                    if (type && urlUtil__default['default'].isAbsolute(data.assets[type][url.source])) {\n                        return data.assets[type][url.source];\n                    }\n                }\n            }\n        },\n        //the baseUrl concats the baseUrl in data if the url is relative\n        baseUrl: {\n            name: 'baseUrl',\n            handle: function handleBaseUrl(url, data) {\n                if (typeof data.baseUrl === 'string' && urlUtil__default['default'].isRelative(url)) {\n                    return prependToUrl(url, data.baseUrl, data.slashcat);\n                }\n            }\n        },\n\n        //bust the cache for item CSS\n        itemCssNoCache: {\n            name: 'itemCssNoCache',\n            handle: function handleItemCss(url, data) {\n                if (typeof data.baseUrl === 'string' && urlUtil__default['default'].isRelative(url) && /\\.css$/.test(url.file)) {\n                    return urlUtil__default['default'].build(prependToUrl(url, data.baseUrl, data.slashcat), { bust: Date.now() });\n                }\n            }\n        },\n\n        //absolute URL are just left intact\n        external: {\n            name: 'external',\n            handle: function handleExternal(url) {\n                if (urlUtil__default['default'].isAbsolute(url)) {\n                    return url.toString();\n                }\n            }\n        },\n\n        //the base64 encoded resources are also left intact\n        base64: {\n            name: 'base64',\n            handle: function handleB64(url) {\n                if (urlUtil__default['default'].isBase64(url)) {\n                    return url.toString();\n                }\n            }\n        },\n\n        //special tao media protocol\n        taomedia: {\n            name: 'taomedia',\n            handle: function handleTaoMedia(url, data) {\n                //either a baseUrl is given or if empty, taomedia resources are managed as relative resources\n                var baseUrl = data.baseUrl || './';\n                if ((typeof url === 'object' && url.protocol === 'taomedia') || /^taomedia:\\/\\//.test(url.toString())) {\n                    return baseUrl + url.toString();\n                }\n            }\n        }\n    };\n\n    return strategies;\n\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n * This module allows adding extra buttons in the action bar of the test runner\n *\n */\ndefine('taoItems/preview/actionBarHook',[\n    'jquery',\n    'lodash',\n    'core/errorHandler',\n    'core/promise'\n], function ($, _, errorHandler, Promise) {\n\n    'use strict';\n\n    /**\n     * Events namespace\n     * @type {String}\n     * @private\n     */\n    var _ns = '.previewActionBarHook';\n\n\n    /**\n     * List of loaded and visible hooks\n     * @type {Object}\n     * @private\n     */\n    var tools = {};\n\n\n    /**\n     *\n     * @type {*|jQuery|HTMLElement}\n     */\n    var $toolContainers = $();\n\n\n    /**\n     * Remove tools when closing the item\n     */\n    $(document).off('.preview').on('itemunload.preview', function () {\n        $toolContainers.each(function () {\n            var $toolContainer = $(this);\n            _.forEach(tools, function (tool, id) {\n                var $btn = $toolContainer.children('[data-control=\"' + id + '\"]');\n                if ($btn.length) {\n                    tool.clear($btn);\n                    $btn.remove();\n                }\n            });\n        });\n    });\n\n\n    /**\n     * Check that the toolConfig is correct\n     *\n     * @param {Object} toolconfig\n     * @param {String} toolconfig.hook - the amd module to be loaded to initialize the button\n     * @param {String} [toolconfig.label] - the label to be displayed in the button\n     * @param {String} [toolconfig.icon] - the icon to be displayed in the button\n     * @param {String} [toolconfig.title] - the title to be displayed in the button\n     * @param {Array} [toolconfig.items] - an optional list of menu items\n     * @returns {Boolean}\n     */\n    function isValidConfig(toolconfig) {\n        return !!(_.isObject(toolconfig) && toolconfig.hook);\n    }\n\n    /**\n     * Triggers the itemLoaded event inside the provided actionBar hook\n     * @param {Object} tool\n     */\n    function triggerItemLoaded(tool) {\n        if (tool && tool.itemLoaded) {\n            tool.itemLoaded();\n        }\n    }\n\n    /**\n     * Init a test runner button from its config\n     *\n     * @param {String} id\n     * @param {Object|String} toolconfig\n     * @param {String} toolconfig.hook - the amd module to be loaded to initialize the button\n     * @param {String} [toolconfig.label] - the label to be displayed in the button\n     * @param {String} [toolconfig.icon] - the icon to be displayed in the button\n     * @param {String} [toolconfig.title] - the title to be displayed in the button\n     * @param {Array} [toolconfig.items] - an optional list of menu items\n     * // @param {Object} testContext - the complete state of the test\n     * @param {Object} testRunner - the test runner instance\n     * @fires ready.actionBarHook when the hook has been initialized\n     * @returns {Promise}\n     */\n    function initExtraButtons($toolContainer, id, toolconfig) {\n\n        if (_.isString(toolconfig)) {\n            toolconfig = {\n                hook: toolconfig\n            };\n        }\n\n        tools[id] = null;\n\n        $toolContainers = $toolContainers.add($toolContainer);\n\n        return new Promise(function(resolve) {\n            if (isValidConfig(toolconfig)) {\n\n                require([toolconfig.hook], function (hook) {\n\n                    var $button;\n                    var $existingBtn;\n\n                    if (isValidHook(hook)) {\n                        //init the control\n                        hook.init(id, toolconfig);\n\n                        //if an instance of the tool is already attached, remove it:\n                        $existingBtn = $toolContainer.children('[data-control=\"' + id + '\"]');\n                        if ($existingBtn.length) {\n                            hook.clear($existingBtn);\n                            $existingBtn.remove();\n                        }\n\n                        //keep access to the tool\n                        tools[id] = hook;\n\n                        // renders the button from the config\n                        $button = hook.render();\n\n                        //only attach the button to the dom when everything is ready\n                        _appendInOrder($toolContainer, $button);\n\n                        //ready !\n                        $button.trigger('ready' + _ns, [hook]);\n\n                        triggerItemLoaded(hook);\n\n                        resolve(hook);\n                    } else {\n                        errorHandler.throw(_ns, 'invalid hook format');\n                        resolve(null);\n                    }\n\n                }, function (e) {\n                    errorHandler.throw(_ns, 'the hook amd module cannot be found');\n                    resolve(null);\n                });\n\n            } else {\n                errorHandler.throw(_ns, 'invalid tool config format');\n                resolve(null);\n            }\n        });\n    }\n\n    /**\n     * Append a dom element $button to a $container in a specific order\n     * The orders are provided by data-order attribute set to the $button\n     *\n     * @param {JQuery} $container\n     * @param {JQuery} $button\n     */\n    function _appendInOrder($container, $button) {\n\n        var $after, $before;\n        var order = $button.data('order');\n\n        if ('last' === order) {\n\n            $container.append($button);\n\n        } else if ('first' === order) {\n\n            $container.prepend($button);\n\n        } else {\n\n            order = _.parseInt(order);\n            if (!_.isNaN(order)) {\n\n                $container.children('.action').each(function () {\n\n                    var $btn = $(this),\n                        _order = $btn.data('order');\n\n                    if ('last' === _order) {\n\n                        $before = $btn;\n                        $after = null;\n\n                    } else if ('first' === _order) {\n\n                        $before = null;\n                        $after = $btn;\n\n                    } else {\n\n                        _order = _.parseInt(_order);\n\n                        if (_.isNaN(_order) || _order > order) {\n                            $before = $btn;\n                            $after = null;\n                            //stops here because $container children returns the dom elements in the dom order\n                            return false;\n                        } else if (_order === order) {\n                            $after = $btn;\n                        } else if (_order < order) {\n                            $after = $btn;\n                            $before = null;\n                        }\n\n                    }\n\n                });\n\n                if ($after) {\n                    $after.after($button);\n                } else if ($before) {\n                    $before.before($button);\n                } else {\n                    $container.append($button);\n                }\n\n            } else {\n                //unordered buttons are append at the end (including when order equals 0)\n                $container.append($button);\n            }\n        }\n    }\n\n    /**\n     * Check if the hook object is valid\n     *\n     * @param {Object} hook\n     * @param {Function} hook.init\n     * @param {Function} hook.clear\n     * @param {Function} hook.isVisible\n     * @returns {Boolean}\n     */\n    function isValidHook(hook) {\n        return (_.isObject(hook) && _(['init', 'render', 'clear', 'isVisible']).reduce(function (result, method) {\n            return result && _.isFunction(hook[method]);\n        }, true));\n    }\n\n    return {\n        isValid: isValidConfig,\n        initExtraButtons: initExtraButtons\n    };\n});\n\n","define('taoItems/runner/api/itemRunner',['jquery', 'core/eventifier', 'taoItems/assets/manager'], function ($, eventifier, assetManagerFactory) { 'use strict';\n\n    function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n    var $__default = /*#__PURE__*/_interopDefaultLegacy($);\n    var eventifier__default = /*#__PURE__*/_interopDefaultLegacy(eventifier);\n    var assetManagerFactory__default = /*#__PURE__*/_interopDefaultLegacy(assetManagerFactory);\n\n    /*\n     * This program is free software; you can redistribute it and/or\n     * modify it under the terms of the GNU General Public License\n     * as published by the Free Software Foundation; under version 2\n     * of the License (non-upgradable).\n     *\n     * This program is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n     * GNU General Public License for more details.\n     *\n     * You should have received a copy of the GNU General Public License\n     * along with this program; if not, write to the Free Software\n     * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n     *\n     * Copyright (c) 2014-2021 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n     *\n     */\n\n    /**\n     *\n     * Builds a brand new {@link itemRunner}.\n     *\n     * <strong>The factory is an internal mechanism to create encapsulated contexts.\n     *  I suggest you to use directly the name <i>itemRunner</i> when you require this module.</strong>\n     *\n     * @example require(['itemRunner'], function(itemRunner){\n     *            itemRunner({itemId : 12})\n     *                    .on('statechange', function(state){\n     *\n     *                    })\n     *                    .on('ready', function(){\n     *\n     *                    })\n     *                    .on('response', function(){\n     *\n     *                    })\n     *                   .init()\n     *                   .render($('.item-container'));\n     *          });\n     *\n     * @exports itemRunner\n     * @namespace itemRunnerFactory\n     *\n     * @param {String} [providerName] - the name of a provider previously registered see {@link itemRunnerFactory#register}\n     * @param {Object} [data] - the data of the item to run\n     * @param {Object} [options]\n     *\n     * @returns {itemRunner}\n     */\n    const itemRunnerFactory = function itemRunnerFactory(providerName, data = {}, options = {}) {\n        //flow structure to manage sync calls in an async context.\n        const flow = {\n            init: {\n                done: false,\n                pending: []\n            },\n            render: {\n                done: false,\n                pending: []\n            }\n        };\n\n        //optional params based on type\n        if (typeof providerName === 'object') {\n            data = providerName;\n            providerName = void 0;\n        }\n\n        /*\n         * Select the provider\n         */\n        const providers = itemRunnerFactory.providers;\n\n        //check a provider is available\n        if (!providers || Object.keys(providers).length === 0) {\n            throw new Error('No provider registered');\n        }\n\n        let provider;\n\n        if (typeof providerName === 'string' && providerName.length > 0) {\n            provider = providers[providerName];\n        } else if (Object.keys(providers).length === 1) {\n            //if there is only one provider, then we take this one\n            providerName = Object.keys(providers)[0];\n            provider = providers[providerName];\n        }\n\n        //now we should have a provider\n        if (!provider) {\n            throw new Error('No candidate found for the provider');\n        }\n\n        //set up a default assetManager using a \"do nothing\" strategy\n        const assetManager =\n            options.assetManager ||\n            assetManagerFactory__default['default'](function defaultStrategy(url) {\n                return url.toString();\n            });\n\n        let suspended = false;\n        let closed = false;\n\n        /**\n         * The itemRunner\n         * @typedef {Object} itemRunner\n         */\n\n        /**\n         * @type {itemRunner}\n         * @lends itemRunnerFactory\n         */\n        return eventifier__default['default']({\n            /**\n             * Items container\n             * @type {HTMLElement}\n             */\n            container: null,\n\n            /**\n             * The asset manager used to resolve asset\n             * @see taoItems/asset/manager\n             * @type {AssetManager}\n             */\n            assetManager,\n\n            /**\n             * To give options to the item runner provider\n             * @type {Object}\n             */\n            options,\n\n            /**\n             * Initialize the runner.\n             * @param {Object} [newData] - just in case you want to change item data (it should not occurs in most case)\n             * @returns {itemRunner} to chain calls\n             *\n             * @fires itemRunner#init\n             */\n            init(newData) {\n                /**\n                 * Call back when init is done\n                 */\n                const initDone = () => {\n                    //manage pending tasks the first time\n                    if (flow.init.done === false) {\n                        flow.init.done = true;\n\n                        flow.init.pending\n                            .filter(pendingTask => typeof pendingTask === 'function')\n                            .forEach(pendingTask => pendingTask());\n\n                        flow.init.pending = [];\n                    }\n\n                    /**\n                     * the runner has initialized correclty the item\n                     * @event itemRunner#init\n                     */\n                    this.trigger('init');\n                };\n\n                //merge data\n                if (newData) {\n                    data = Object.assign(data, newData);\n                }\n\n                if (typeof provider.init === 'function') {\n                    /**\n                     * Calls provider's initialization with item data.\n                     * @callback InitItemProvider\n                     * @param {Object} data - the item data\n                     * @param {Function} done - call once the initialization is done\n                     */\n                    provider.init.call(this, data, initDone);\n                } else {\n                    initDone();\n                }\n\n                return this;\n            },\n\n            /**\n             * Configure the assetManager\n             * @see taoItems/assets/manager\n             * @param {AssetStrategy[]} strategies - the resolving strategies\n             * @param {Object} [contextData] - the context data\n             * @param {Object} [assetManagerOptions] - the asset manager options\n             * @returns {itemRunner} to chain calls\n             */\n            assets(strategies, contextData, assetManagerOptions) {\n                try {\n                    this.assetManager = assetManagerFactory__default['default'](strategies, contextData, assetManagerOptions);\n                } catch (err) {\n                    this.trigger(\n                        'error',\n                        new Error(`Something was wrong while configuring the asset manager : ${err.message}`)\n                    );\n                }\n\n                return this;\n            },\n\n            /**\n             * Initialize the current item.\n             *\n             * @param {HTMLElement|jQueryElement} elt - the DOM element that is going to contain the rendered item.\n             * @param {Object} [newOptions] - to update the runner options\n             * @returns {itemRunner} to chain calls\n             *\n             * @fires itemRunner#ready\n             * @fires itemRunner#render\n             * @fires itemRunner#error if the elt isn't valid\n             *\n             * @fires itemRunner#statechange the provider is reponsible to trigger this event\n             * @fires itemRunner#responsechange  the provider is reponsible to trigger this event\n             */\n            render(elt, newOptions = {}) {\n                /**\n                 * Call back when render is done\n                 */\n                const renderDone = () => {\n                    //manage pending tasks the first time\n                    if (flow.render.done === false) {\n                        flow.render.done = true;\n\n                        flow.render.pending\n                            .filter(pendingTask => typeof pendingTask === 'function')\n                            .forEach(pendingTask => pendingTask());\n\n                        flow.render.pending = [];\n                    }\n\n                    /**\n                     * The item is rendered\n                     * @event itemRunner#render\n                     */\n                    this.trigger('render');\n\n                    /**\n                     * The item is ready.\n                     * Alias of {@link itemRunner#render}\n                     * @event itemRunner#ready\n                     */\n                    this.trigger('ready');\n                };\n\n                options = Object.assign(options || {}, newOptions);\n                if (!options.state) {\n                    options.state = {};\n                }\n\n                //check elt\n                if (!(elt instanceof HTMLElement) && !(elt instanceof $__default['default'])) {\n                    return this.trigger(\n                        'error',\n                        new Error('A valid HTMLElement (or a jquery element) at least is required to render the item')\n                    );\n                }\n\n                //set item state to restore item state after rendering if the provider enables it\n                if (options.state) {\n                    this.setState(options.state, true);\n                }\n\n                if (flow.init.done === false) {\n                    flow.init.pending.push(() => this.render(elt, options));\n                } else {\n                    //we keep a reference to the container\n                    if (elt instanceof $__default['default']) {\n                        this.container = elt.get(0);\n                    } else {\n                        this.container = elt;\n                    }\n\n                    //the state will be applied only when the rendering is made\n\n                    if (typeof provider.render === 'function') {\n                        /**\n                         * Calls the provider's render\n                         * @callback RendertItemProvider\n                         * @param {HTMLElement} elt - the element to render inside\n                         * @param {Function} done - call once the render is done\n                         * @param {Object} [options] - the array of options that the item runner provider may supports\n                         * @param {Object} [options.state] - pass initial item state to method render() in case the item runner provider require initial state to render\n                         */\n                        provider.render.call(this, this.container, renderDone, options);\n                    } else {\n                        renderDone();\n                    }\n                }\n\n                return this;\n            },\n\n            /**\n             * Clear the running item.\n             * @returns {itemRunner}\n             *\n             * @fires itemRunner#clear\n             */\n            clear() {\n                /**\n                 * Call back when clear is done\n                 */\n                const clearDone = () => {\n                    /**\n                     * The item is ready.\n                     * @event itemRunner#clear\n                     */\n                    this.trigger('clear');\n                };\n\n                if (typeof provider.clear === 'function') {\n                    /**\n                     * Calls the provider's clear\n                     * @callback ClearItemProvider\n                     * @param {HTMLElement} elt - item's container\n                     * @param {Function} done - call once the initialization is done\n                     */\n                    provider.clear.call(this, this.container, clearDone);\n                } else {\n                    clearDone();\n                }\n\n                return this;\n            },\n\n            /**\n             * Get the current state of the running item.\n             *\n             * @returns {Object|Null} state\n             */\n            getState() {\n                if (typeof provider.getState === 'function') {\n                    /**\n                     * Calls the provider's getState\n                     * @callback GetStateItemProvider\n                     * @returns {Object} the state\n                     */\n                    return provider.getState.call(this);\n                }\n                return null;\n            },\n\n            /**\n             * Set the current state of the running item.\n             * This should have the effect to restore the item state.\n             *\n             * @param {Object} state - the new state\n             * @param {boolean} [isInitialStateRestore] - state restoring or not\n             * @returns {itemRunner}\n             *\n             * @fires itemRunner#error if the state type doesn't match\n             */\n            setState(state, isInitialStateRestore = false) {\n                if (!state || typeof state !== 'object' || Array.isArray(state)) {\n                    return this.trigger(\n                        'error',\n                        new Error(`The item's state must be a JavaScript Plain Object: ${typeof state} given`)\n                    );\n                }\n\n                //the state will be applied only when the rendering is made\n                if (flow.render.done === false) {\n                    flow.render.pending.push(() => this.setState(state, isInitialStateRestore));\n                } else if (typeof provider.setState === 'function') {\n                    /**\n                     * Calls the provider's setState\n                     * @callback SetStateItemProvider\n                     * @param {Object} state -  the state to set\n                     */\n                    provider.setState.call(this, state, isInitialStateRestore);\n                }\n                return this;\n            },\n\n            /**\n             * Get the item data.\n             *\n             * @returns {Object} the item's data\n             */\n            getData() {\n                return data;\n            },\n\n            /**\n             * Replaces item data in rendered item\n             * @param {object} itemData\n             * @returns {Promise}\n             */\n            setData(itemData) {\n                data = itemData;\n                if (typeof provider.setData === 'function') {\n                    return provider.setData.call(this, itemData);\n                }\n                return Promise.resolve();\n            },\n\n            /**\n             * Get the item runner options.\n             *\n             * @returns {Object} the item rendering options\n             */\n            getOptions() {\n                return this.options;\n            },\n\n            /**\n             * Replaces item runner's options.\n             * @param {Object} newOptions - the options to set\n             * @returns {Promise}\n             */\n            setOptions(newOptions = {}) {\n                this.options = newOptions;\n                if (typeof provider.setOptions === 'function') {\n                    return provider.setOptions.call(this, this.options);\n                }\n                return Promise.resolve();\n            },\n\n            /**\n             * Get the responses of the running item.\n             *\n             * @returns {Object} the item's responses\n             */\n            getResponses() {\n                if (typeof provider.getResponses === 'function') {\n                    /**\n                     * Calls the provider's getResponses\n                     * @callback GetResponsesItemProvider\n                     * @returns {Object} the responses\n                     */\n                    return provider.getResponses.call(this);\n                }\n                return {};\n            },\n\n            /**\n             * Append the modalFeedbacks into the item and create queue of feedbacks that should be displayed to the user\n             *\n             * @param {Object|Array} feedbacks - all feedbacks of the item\n             * @param {Object|Array} itemSession - determine feedbacks which should be displayed\n             * @param {function} done - runs after loading feedbacks into the item\n             *      # have parameter {Object|Array} renderingQueue with prepared queue of the feedbacks for displaying to the user\n             *\n             *\n             * Example:\n             *\n             *    this.renderFeedbacks({f1: 'feedback1', f2: 'feedback2', f3: 'feedback3'}, ['f2'], function(renderingQueue){\n             *      renderingQueue; // {'feedback2'}\n             *    });\n             */\n            renderFeedbacks(feedbacks, itemSession, done) {\n                if (typeof provider.renderFeedbacks === 'function') {\n                    provider.renderFeedbacks.call(this, feedbacks, itemSession, done);\n                }\n            },\n\n            /**\n             * Call the provider's suspend method\n             * @returns {Promise}\n             */\n            suspend() {\n                if (!suspended && flow.render.done && typeof provider.suspend === 'function') {\n                    return provider.suspend.call(this).then(result => {\n                        suspended = true;\n                        return result;\n                    });\n                }\n                return Promise.resolve();\n            },\n\n            /**\n             * Call the provider's hide method\n             * @returns {Promise}\n             */\n            close() {\n                if (!closed && flow.render.done && typeof provider.close === 'function') {\n                    return provider.close.call(this).then(result => {\n                        closed = true;\n                        return result;\n                    });\n                }\n                return Promise.resolve();\n            },\n\n            /**\n             * Call the provider's resume method.\n             * We can resume a previously suspended or closed item.\n             * @returns {Promise}\n             */\n            resume() {\n                if ( (suspended || closed) && flow.render.done && typeof provider.resume === 'function') {\n                    return provider.resume.call(this).then(result => {\n                        suspended = false;\n                        closed = false;\n                        return result;\n                    });\n                }\n                return Promise.resolve();\n            },\n\n            /**\n             * Is the item runner suspended\n             * @returns {boolean} true if suspended\n             */\n            isSuspended() {\n                return suspended;\n            },\n\n            /**\n             * Is the item runner closed\n             * @returns {boolean} true if closed\n             */\n            isClosed(){\n                return closed;\n            },\n        });\n    };\n\n    /**\n     * Register an <i>Item Runtime Provider</i> into the item runner.\n     * The provider provides the behavior required by the item runner.\n     *\n     * @param {String} name - the provider name will be used to select the provider while instantiating the runner\n     *\n     * @param {Object} provider - the Item Runtime Provider as a plain object. The itemRunner forwards encapsulate and delegate calls to the provider.\n     * @param {InitItemProvider} provider.init - the provider initializes the item from it's data, for example loading libraries, add some listeners, etc.\n     * @param {RenderItemProvider} provider.render - the provider renders the item within the given container element.\n     * @param {ClearItemProvider} [provider.clear] - the provider clears the item.\n     * @param {GetStateItemProvider} [provider.getState] - the provider get the item's state.\n     * @param {SetStateItemProvider} [provider.setState] - the provider restore the item to the given state.\n     * @param {GetRespnsesItemProvider} [provider.getResponses] - the provider gives the current responses.\n     *\n     * @throws TypeError when a wrong provider is given or an empty name.\n     */\n    itemRunnerFactory.register = function registerProvider(name, provider) {\n        //type checking\n        if (typeof name !== 'string' || name.length <= 0) {\n            throw new TypeError('It is required to give a name to your provider.');\n        }\n        if (\n            typeof provider !== 'object' ||\n            (typeof provider.init !== 'function' && typeof provider.render !== 'function')\n        ) {\n            throw new TypeError('A provider is an object that contains at least an init function or a render function.');\n        }\n\n        this.providers = this.providers || {};\n        this.providers[name] = provider;\n    };\n\n    return itemRunnerFactory;\n\n});\n\n","define('taoItems/runtime/ConsoleResultServer',['jquery'], function($){\n\n    function ConsoleResultServer(){\n    }\n\n    ConsoleResultServer.prototype.submitItemVariables = function(itemId, serviceCallId, responses, scores, events, callback){\n\n            var previewConsole = $('#preview-console');\n            if (previewConsole.length > 0){\n                    //In the preview console\n                    var niceResponses = '';\n                    for (var key in responses) {\n                            niceResponses = niceResponses + key + ' = ' + responses[key] + '<br />';\n                    }\n                    previewConsole.trigger('updateConsole', ['RESPONSES', niceResponses.substring(0, niceResponses.length-2)]);\n                    var niceScore = '';\n                    for (var key in scores) {\n                            niceScore = niceScore + key + ' = ' + scores[key] + ', ';\n                    }\n                    previewConsole.trigger('updateConsole', ['SCORE', niceScore.substring(0, niceScore.length-2)]);\n            } \n\n        if(typeof(callback) === \"function\") {\n            callback();\n        };\n    };\n\n    return ConsoleResultServer;\n\n});\n","define('taoItems/runtime/ItemServiceImpl',[ 'jquery' ], function($) {\n\n    function ItemServiceImpl(data) {\n\n        this.itemId = data.itemId;\n        this.serviceApi = data.serviceApi;\n        this.resultApi = data.resultApi || null;\n        this.params = data.params || {};\n        this.responses = {};\n        this.scores = {};\n        this.events = {};\n        this.connected = false;\n\n        var rawstate = this.serviceApi.getState();\n        var state = (typeof rawstate === 'undefined' || rawstate === null) ? {}\n                : $.parseJSON(rawstate);\n        this.stateVariables = typeof state === 'object' ? state : {};\n\n        this.beforeFinishCallbacks = [];\n    }\n\n    ItemServiceImpl.prototype.connect = function(frame) {\n        if (this.connected === false && frame.contentWindow) {\n            frame.contentWindow.itemApi = this;\n            \n            if (typeof (frame.contentWindow.onItemApiReady) === \"function\") {\n                frame.contentWindow.onItemApiReady(this);\n                this.connected = true;\n            }\n        }\n    };\n\n    // Response\n\n    ItemServiceImpl.prototype.saveResponses = function(valueArray) {\n        for ( var attrname in valueArray) {\n            this.responses[attrname] = valueArray[attrname];\n        }\n    };\n\n    ItemServiceImpl.prototype.traceEvents = function(eventArray) {\n        for ( var attrname in eventArray) {\n            this.events[attrname] = eventArray[attrname];\n        }\n    };\n\n    // Scoring\n    ItemServiceImpl.prototype.saveScores = function(valueArray) {\n        for ( var attrname in valueArray) {\n            this.scores[attrname] = valueArray[attrname];\n        }\n    };\n\n    ItemServiceImpl.prototype.getUserPropertyValues = function(property,\n            callback) {\n        this.serviceApi.getUserPropertyValues(property, callback);\n    };\n\n    // Flow\n    ItemServiceImpl.prototype.beforeFinish = function(callback) {\n        this.beforeFinishCallbacks.push(callback);\n    };\n\n    ItemServiceImpl.prototype.finish = function() {\n        var self = this;\n        for ( var i = 0; i < this.beforeFinishCallbacks.length; i++) {\n            this.beforeFinishCallbacks[i]();\n        }\n\n        this.submit(function() {\n            self.serviceApi.finish();\n        });\n    };\n\n    ItemServiceImpl.prototype.submit = function(after) {\n        var self = this;\n\n        this.serviceApi.setState(JSON.stringify(self.stateVariables),\n                function() {\n                    // todo add item, call id etc\n\n                    if (self.resultApi) {\n                        self.resultApi\n                                .submitItemVariables(self.itemId,\n                                        self.serviceApi.getServiceCallId(),\n                                        self.responses, self.scores,\n                                        self.events, self.params, after);\n                    } else {\n                        after();\n                    }\n                });\n    }\n\n    ItemServiceImpl.prototype.onKill = function(callback) {\n        this.serviceApi.onKill(callback);\n    };\n\n    ItemServiceImpl.prototype.getVariable = function(identifier, callback) {\n        if (typeof callback === 'function') {\n            callback(this.stateVariables[identifier] || null);\n        }\n    };\n\n    ItemServiceImpl.prototype.setVariable = function(identifier, value) {\n        this.stateVariables[identifier] = value;\n        this.serviceApi.setState(JSON.stringify(this.stateVariables));\n    };\n    \n    ItemServiceImpl.prototype.setVariables = function(values) {\n        for(var v in values){\n            this.stateVariables[v] = values[v];\n        }\n        this.serviceApi.setState(JSON.stringify(this.stateVariables));\n    };\n    \n    return ItemServiceImpl;\n});\n","\n(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('body.preview-mode{height:100vh !important;max-height:100vh;overflow:hidden}body.no-preview-feedback .preview-overlay .preview-container{background:white;overflow:auto}body.no-preview-feedback .preview-overlay .preview-container .preview-item-container,body.no-preview-feedback .preview-overlay .preview-container #preview-container{min-height:calc(100vh - 82px) !important}.preview-overlay{display:none;width:100%;height:100%;z-index:19995;position:absolute;left:0;background:rgba(0,0,0,0.7)}.preview-overlay.preview-desktop{overflow:visible}.preview-overlay.preview-desktop .mobile-only,.preview-overlay.preview-desktop .standard-only{display:none !important}.preview-overlay.preview-mobile{overflow:visible}.preview-overlay.preview-mobile .desktop-only,.preview-overlay.preview-mobile .standard-only{display:none !important}.preview-overlay.preview-standard{overflow:visible}.preview-overlay.preview-standard .desktop-only,.preview-overlay.preview-standard .mobile-only{display:none !important}.preview-overlay .preview-scale-container{position:relative;float:left}.preview-overlay .preview-container{background:white;overflow:auto}.preview-overlay .preview-container .preview-item-container,.preview-overlay .preview-container #preview-container{min-height:calc(100vh - 130px) !important}.preview-overlay .preview-container-outer{display:table;padding:0;width:100%;height:100%}.preview-overlay .preview-utility-bar{background:#f3f1ef;border-bottom:1px solid #8d949e;margin-bottom:20px;z-index:9996;overflow:hidden;padding:10px;position:fixed;top:0;left:0;width:100%}.preview-overlay .preview-utility-bar .preview-heading{min-width:140px}.preview-overlay .preview-utility-bar .device-type-and-orientation{min-width:340px}.preview-overlay .preview-utility-bar-inner{max-width:1024px;width:100%;margin:auto}.preview-overlay .preview-utility-bar-inner h1{font-size:18px;font-size:1.8rem;text-shadow:1px 1px 0px #eee}.preview-overlay .preview-utility-bar-inner .icon-info{top:7px;font-size:15px;font-size:1.5rem}.preview-overlay .preview-utility-bar-inner li{margin-left:10px}.preview-overlay .preview-utility-bar-inner .btn-info{margin-top:1px}.preview-overlay .preview-utility-bar-inner .mobile-device-selector{width:200px}.preview-overlay .preview-utility-bar-inner .preview-type-selector{width:140px}.preview-overlay .preview-utility-bar-inner .preview-theme-selector{width:140px}.preview-overlay .preview-utility-bar-inner .orientation-selector,.preview-overlay .preview-utility-bar-inner .desktop-device-selector{width:130px}.preview-overlay .preview-utility-bar-inner [class*=\\\" col-\\\"],.preview-overlay .preview-utility-bar-inner [class^=\\\"col-\\\"]{margin-bottom:0 !important}.preview-overlay #preview-console{margin:0;padding:0;border:none;z-index:auto;background:#266d9c;position:fixed;bottom:0;left:0;width:100%}.preview-overlay #preview-console .preview-console-closer{position:absolute;right:10px;top:10px;cursor:pointer;color:rgba(255,255,255,0.9);display:none;text-shadow:none}.preview-overlay #preview-console .preview-console-closer:hover{color:white}.preview-overlay #preview-console .preview-console-header{max-width:1024px;width:100%;margin:auto;padding:0}.preview-overlay #preview-console .preview-console-header [class*=\\\" col-\\\"],.preview-overlay #preview-console .preview-console-header [class^=\\\"col-\\\"]{margin-bottom:0 !important}.preview-overlay #preview-console .extra-button-action-bar{overflow:visible}.preview-overlay #preview-console .extra-button-action-bar li{margin:0 5px}.preview-overlay #preview-console .extra-button-action-bar li.btn-info{border-color:rgba(255,255,255,0.3)}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group{border:none !important;overflow:visible;padding:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a{float:left;margin:0 2px;padding:0 15px;border:1px solid rgba(255,255,255,0.3);border-radius:0px;display:inline-block;height:inherit}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a:first-of-type{border-top-left-radius:3px;border-bottom-left-radius:3px;margin-left:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a:last-of-type{border-top-right-radius:3px;border-bottom-right-radius:3px;margin-right:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a:hover,.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a.active{border-color:rgba(255,255,255,0.8)}.preview-overlay #preview-console .extra-button-action-bar li.btn-info.btn-group a .no-label{padding-right:0}.preview-overlay #preview-console .extra-button-action-bar li.btn-info:hover,.preview-overlay #preview-console .extra-button-action-bar li.btn-info.active{border-color:rgba(255,255,255,0.8)}.preview-overlay #preview-console .extra-button-action-bar.horizontal-action-bar.bottom-action-bar{overflow:visible}.preview-overlay #preview-console .extra-button-action-bar.horizontal-action-bar.bottom-action-bar .action{line-height:1.6}.preview-overlay #preview-console .preview-console-body{display:none}.preview-overlay #preview-console .preview-console-body ul{padding:5px;margin:0;height:300px;overflow:auto;background:#2b2b2b;font-family:Consolas,\\\"Andale Mono WT\\\",\\\"Andale Mono\\\",\\\"Lucida Console\\\",\\\"Lucida Sans Typewriter\\\",\\\"DejaVu Sans Mono\\\",\\\"Bitstream Vera Sans Mono\\\",\\\"Liberation Mono\\\",\\\"Nimbus Mono L\\\",Monaco,\\\"Courier New\\\",Courier,monospace;color:#fff}.preview-overlay #preview-console .preview-console-body ul .log-time{color:#999}.preview-overlay #preview-console .preview-console-body ul .log-type{color:#eee}.preview-overlay #preview-console .preview-console-body ul .log-message{color:#69f}.preview-overlay #preview-console .preview-console-body ul pre{margin:0}.preview-overlay .preview-message-box .feedback-info{margin:10px auto 0px;width:800px}.preview-overlay .preview-message-box a{float:right;padding-right:10px}.preview-overlay .desktop-preview-container{width:1024px;background:white url(data:image/gif;base64,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) no-repeat center 150px}.preview-overlay .desktop-preview-frame{position:relative;border:3px #aaa solid;border-radius:5px;background:#5a5a5a;background:linear-gradient(135deg, #5a5a5a 0%, #565656 7%, #444 15%, #141414 30%);box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7)}.preview-overlay .desktop-preview-frame.desktop-preview-landscape{padding:30px 30px}.preview-overlay .desktop-preview-frame.desktop-preview-landscape .desktop-device-toolbar{padding-right:30px}.preview-overlay .desktop-preview-frame.desktop-preview-portrait{padding:30px 30px}.preview-overlay .desktop-preview-frame.desktop-preview-portrait .desktop-device-toolbar{padding-right:30px}.preview-overlay .desktop-preview-item-container{min-height:500px;-webkit-box-shadow:0px 0px 8px #b7b1ac;-moz-box-shadow:0px 0px 8px #b7b1ac;box-shadow:0px 0px 8px #b7b1ac}.preview-overlay .preview-canvas{display:table-cell;text-align:center}.preview-overlay .preview-canvas *{text-align:left}.preview-overlay .preview-outer-frame{position:relative;display:inline-block}.preview-overlay .mobile-preview-container{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;position:relative}.preview-overlay .mobile-preview-item-container{height:100%}.preview-overlay .mobile-preview-frame{position:relative;border:3px #aaa ridge;border-radius:25px;background:#5a5a5a;background:linear-gradient(135deg, #5a5a5a 0%, #565656 7%, #444 15%, #141414 30%);box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7)}.preview-overlay .mobile-preview-frame.mobile-preview-landscape{padding:40px 40px}.preview-overlay .mobile-preview-frame.mobile-preview-landscape .mobile-device-toolbar{padding-right:40px}.preview-overlay .mobile-preview-frame.mobile-preview-portrait{padding:40px 40px}.preview-overlay .mobile-preview-frame.mobile-preview-portrait .mobile-device-toolbar{padding-right:40px}.preview-overlay .mobile-preview-container{background:white;border-radius:3px;border:2px solid;border-color:#444 #999 #999 #444}.preview-overlay .standard-preview-frame{box-shadow:0px 0px 8px rgba(0,0,0,0.7)}\\n\\n/*# sourceMappingURL=../../../taoItems/views/css/preview.css.map */.preview-modal-feedback.modal .icon-warning{font-size:150%;position:relative;top:2px}.preview-modal-feedback.modal .gray-others{opacity:0.4}\\n\\n/*# sourceMappingURL=taoItems/controller/items/css/relatedTestsPopup.css.map */');\n","\ndefine(\"taoItems/loader/taoItems.bundle\", function(){});\n"]}